{"ast":null,"code":"var _jsxFileName = \"/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\n\n// --- sizing config ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst A4_WIDTH_CM = 21.0; // reference width for calibration\nconst MULTIPLIER_CHEST = 1.75; // shoulder flat â†’ chest circumference (~1.6â€“1.9). Tune with a few tests.\n\nconst MEN_SIZE_CHART = [{\n  size: \"S\",\n  min: 88,\n  max: 94\n}, {\n  size: \"M\",\n  min: 95,\n  max: 102\n}, {\n  size: \"L\",\n  min: 103,\n  max: 110\n}, {\n  size: \"XL\",\n  min: 111,\n  max: 118\n}, {\n  size: \"2XL\",\n  min: 119,\n  max: 126\n}, {\n  size: \"3XL\",\n  min: 127,\n  max: 134\n}, {\n  size: \"4XL\",\n  min: 135,\n  max: 145\n}];\nfunction menSizeFromChest(cm) {\n  for (const row of MEN_SIZE_CHART) if (cm >= row.min && cm <= row.max) return row.size;\n  return cm < MEN_SIZE_CHART[0].min ? \"XS/S\" : \"4XL+\";\n}\n\n// --- overlay helpers (like your screenshot) ---\nconst UPPER = [[0, 1], [1, 2], [2, 3], [3, 7],\n// face-ish (optional but subtle)\n[0, 11], [0, 12],\n// nose to shoulders\n[11, 13], [13, 15],\n// left arm\n[12, 14], [14, 16],\n// right arm\n[11, 12],\n// shoulders line\n[11, 23], [12, 24] // shoulder â†’ hip\n];\nconst LOWER = [[23, 25], [25, 27], [27, 31],\n// left leg + foot\n[24, 26], [26, 28], [28, 32],\n// right leg + foot\n[23, 24] // hips line\n];\n\n// draw a colored polyline between two landmarks (if both are visible)\nfunction drawSeg(ctx, lm, a, b, color, width, W, H) {\n  var _A$visibility, _B$visibility;\n  const A = lm[a],\n    B = lm[b];\n  if (!A || !B) return;\n  if (((_A$visibility = A.visibility) !== null && _A$visibility !== void 0 ? _A$visibility : 0) < 0.4 || ((_B$visibility = B.visibility) !== null && _B$visibility !== void 0 ? _B$visibility : 0) < 0.4) return;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = width;\n  ctx.beginPath();\n  ctx.moveTo(A.x * W, A.y * H);\n  ctx.lineTo(B.x * W, B.y * H);\n  ctx.stroke();\n}\n\n// bounding box from visible landmarks\nfunction drawBBox(ctx, lm, W, H, color = \"rgba(0,255,0,0.9)\") {\n  const pts = lm.filter(p => {\n    var _p$visibility;\n    return ((_p$visibility = p === null || p === void 0 ? void 0 : p.visibility) !== null && _p$visibility !== void 0 ? _p$visibility : 0) > 0.4;\n  });\n  if (!pts.length) return;\n  const xs = pts.map(p => p.x * W);\n  const ys = pts.map(p => p.y * H);\n  const minX = Math.max(0, Math.min(...xs));\n  const maxX = Math.min(W, Math.max(...xs));\n  const minY = Math.max(0, Math.min(...ys));\n  const maxY = Math.min(H, Math.max(...ys));\n  const pad = 8;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = 3;\n  ctx.strokeRect(minX - pad, minY - pad, maxX - minX + pad * 2, maxY - minY + pad * 2);\n}\nconst Measure = () => {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n  const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level, then match the bar width.\");\n  const [cmPerPx, setCmPerPx] = useState(null);\n  const [barPx, setBarPx] = useState(300);\n  const [locked, setLocked] = useState(false);\n  const [result, setResult] = useState(null);\n\n  // stability & framing\n  const STABILITY_FRAMES = 12;\n  const MOVEMENT_EPS = 0.015;\n  const GUIDE_MARGIN = 0.08;\n  const recentShoulderN = useRef([]);\n  const getDistance = useCallback((a, b) => Math.hypot(a.x - b.x, a.y - b.y), []);\n  function stopCamera() {\n    try {\n      var _camRef$current, _camRef$current$stop;\n      (_camRef$current = camRef.current) === null || _camRef$current === void 0 ? void 0 : (_camRef$current$stop = _camRef$current.stop) === null || _camRef$current$stop === void 0 ? void 0 : _camRef$current$stop.call(_camRef$current);\n      const v = videoRef.current;\n      (v === null || v === void 0 ? void 0 : v.srcObject) && v.srcObject.getTracks().forEach(t => t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  }\n  async function startCamera(pose) {\n    const videoEl = videoRef.current;\n    const camera = new Camera(videoEl, {\n      onFrame: async () => {\n        await pose.send({\n          image: videoEl\n        });\n      },\n      width: 1280,\n      height: 720\n    });\n    camRef.current = camera;\n    camera.start();\n  }\n  useEffect(() => {\n    const canvasEl = canvasRef.current;\n    const ctx = canvasEl.getContext(\"2d\");\n    const pose = new Pose({\n      // Pin version to avoid WASM loader issues\n      locateFile: file => `https://unpkg.com/@mediapipe/pose@0.5.1675469404/${file}`\n    });\n    poseRef.current = pose;\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true,\n      enableSegmentation: false,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5\n    });\n    pose.onResults(res => {\n      if (locked) return;\n      const W = res.image.width,\n        H = res.image.height;\n      if (canvasEl.width !== W) canvasEl.width = W;\n      if (canvasEl.height !== H) canvasEl.height = H;\n      ctx.save();\n      ctx.clearRect(0, 0, W, H);\n      ctx.drawImage(res.image, 0, 0, W, H);\n\n      // guide box (outer)\n      const gx = W * GUIDE_MARGIN,\n        gy = H * GUIDE_MARGIN;\n      const gW = W * (1 - GUIDE_MARGIN * 2),\n        gH = H * (1 - GUIDE_MARGIN * 2);\n      ctx.strokeStyle = \"rgba(0,255,0,0.7)\";\n      ctx.lineWidth = 2;\n      ctx.strokeRect(gx, gy, gW, gH);\n\n      // calibration bar (visible in calibrate phase)\n      if (phase === \"calibrate\") {\n        const barH = 14;\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillRect((W - barPx) / 2, H * 0.1, barPx, barH);\n        ctx.font = \"14px system-ui, sans-serif\";\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillText(\"Match this bar to A4 width (21 cm) at chest depth.\", Math.max(12, (W - 360) / 2), H * 0.1 - 8);\n      }\n      const lm = res.poseLandmarks;\n      if (lm) {\n        // --- draw skeleton like screenshot ---\n        // green bbox around person\n        drawBBox(ctx, lm, W, H, \"rgba(0,255,0,0.9)\");\n\n        // blue upper body lines\n        UPPER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#2aa4ff\", 3, W, H));\n        // orange lower body lines\n        LOWER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#ff9933\", 3, W, H));\n\n        // small teal joints (shoulders, hip midpoint)\n        const vis = i => {\n          var _lm$i$visibility, _lm$i;\n          return ((_lm$i$visibility = (_lm$i = lm[i]) === null || _lm$i === void 0 ? void 0 : _lm$i.visibility) !== null && _lm$i$visibility !== void 0 ? _lm$i$visibility : 0) > 0.4;\n        };\n        const Lsh = lm[11],\n          Rsh = lm[12];\n        const hip = vis(23) ? lm[23] : lm[24];\n        const needed = [11, 12, 23, 24].every(vis);\n        if (needed) {\n          const shMid = {\n            x: (Lsh.x + Rsh.x) / 2,\n            y: (Lsh.y + Rsh.y) / 2\n          };\n          ctx.fillStyle = \"rgba(0,200,255,1)\";\n          [Lsh, Rsh, shMid, hip].forEach(p => {\n            ctx.beginPath();\n            ctx.arc(p.x * W, p.y * H, 6, 0, Math.PI * 2);\n            ctx.fill();\n          });\n\n          // inside guide?\n          const inGuide = [Lsh, Rsh, hip].every(p => p.x * W >= gx && p.x * W <= gx + gW && p.y * H >= gy && p.y * H <= gy + gH);\n          if (!inGuide) {\n            setStatus(\"Step back/center yourself inside the frame.\");\n            ctx.restore();\n            return;\n          }\n\n          // Only lock/measure in MEASURE phase\n          if (phase === \"measure\") {\n            const shoulderWidthN = getDistance(Lsh, Rsh);\n            const torsoHeightN = getDistance(shMid, hip);\n            if (torsoHeightN > 0 && cmPerPx) {\n              // stability buffer\n              const buf = recentShoulderN.current;\n              buf.push(shoulderWidthN);\n              if (buf.length > STABILITY_FRAMES) buf.shift();\n              if (buf.length >= STABILITY_FRAMES) {\n                const avg = buf.reduce((a, b) => a + b, 0) / buf.length;\n                const maxDev = Math.max(...buf.map(v => Math.abs(v - avg)));\n                if (maxDev < MOVEMENT_EPS) {\n                  var _MEN_SIZE_CHART$find;\n                  // compute chest (cm)\n                  const Lx = Lsh.x * W,\n                    Ly = Lsh.y * H;\n                  const Rx = Rsh.x * W,\n                    Ry = Rsh.y * H;\n                  const shoulderPx = Math.hypot(Lx - Rx, Ly - Ry);\n                  const chestFlatCm = shoulderPx * cmPerPx;\n                  const chestCm = chestFlatCm * MULTIPLIER_CHEST;\n                  const tshirt = menSizeFromChest(chestCm);\n                  const fit = chestCm <= ((_MEN_SIZE_CHART$find = MEN_SIZE_CHART.find(r => r.size === tshirt)) === null || _MEN_SIZE_CHART$find === void 0 ? void 0 : _MEN_SIZE_CHART$find.max) ? \"Slim/Regular\" : \"Regular/Relaxed\";\n                  setResult({\n                    chestCm: Number(chestCm.toFixed(1)),\n                    tshirt,\n                    hoodie: tshirt === \"S\" ? \"S\" : tshirt,\n                    fit,\n                    debug: {\n                      cmPerPx: Number(cmPerPx.toFixed(4)),\n                      shoulderPx: Math.round(shoulderPx),\n                      shoulderN: Number(shoulderWidthN.toFixed(3)),\n                      torsoN: Number(torsoHeightN.toFixed(3))\n                    }\n                  });\n                  setLocked(true);\n                  setPhase(\"locked\");\n                  setStatus(\"Locked âœ”ï¸\");\n                  stopCamera();\n                } else {\n                  setStatus(\"Hold still for a momentâ€¦\");\n                }\n              } else {\n                setStatus(\"Framing looks good â€” keep stillâ€¦\");\n              }\n            } else {\n              setStatus(\"Calibrated? If not, set calibration first.\");\n            }\n          } else if (phase === \"calibrate\") {\n            setStatus(\"Calibration: adjust bar, then click Set calibration.\");\n          }\n        } else {\n          setStatus(\"Show shoulders & upper torso.\");\n        }\n      } else {\n        setStatus(\"Detecting bodyâ€¦\");\n      }\n      ctx.restore();\n    });\n    startCamera(pose);\n    return () => {\n      stopCamera();\n    };\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n  const handleSetCalibration = () => {\n    if (barPx < 40) return;\n    setCmPerPx(A4_WIDTH_CM / barPx); // cm per pixel\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n  };\n  const handleRetake = () => {\n    setLocked(false);\n    setResult(null);\n    setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1â€“2 seconds.\");\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n  const handleRecalibrate = () => {\n    setLocked(false);\n    setResult(null);\n    setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level, then match the bar width.\");\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full min-h-screen bg-black flex flex-col items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-5xl flex items-center justify-between px-3 pt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-white/90 font-semibold\",\n        children: \"Male Upper\\u2011Body Measurement (Real\\u2011time)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/90 rounded px-3 py-1 text-sm\",\n        children: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full max-w-5xl aspect-video mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"absolute inset-0 w-full h-full object-contain bg-black\",\n        autoPlay: true,\n        muted: true,\n        playsInline: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"absolute inset-0 w-full h-full object-contain pointer-events-none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), phase === \"calibrate\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-3 left-1/2 -translate-x-1/2 bg-white/95 rounded-xl p-3 flex items-center gap-3 shadow\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm font-medium\",\n          children: \"A4 width match\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: 120,\n          max: 900,\n          value: barPx,\n          onChange: e => setBarPx(Number(e.target.value)),\n          className: \"w-64\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSetCalibration,\n          className: \"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700 text-sm\",\n          children: \"Set calibration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 11\n      }, this), phase === \"locked\" && result && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 bg-black/60 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white max-w-md w-full rounded-2xl p-5 shadow-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xl font-bold mb-2\",\n            children: \"Recommended Sizes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Chest: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [result.chestCm, \" cm\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83D\\uDC55 T\\u2011Shirt: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: result.tshirt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 34\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83E\\uDDE5 Hoodie: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: result.hoodie\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\uD83C\\uDFAF Fit: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: result.fit\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 30\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 text-xs text-gray-600\",\n            children: [\"Debug \\u2014 cm/px: \", result.debug.cmPerPx, \", shoulderPx: \", result.debug.shoulderPx, \", shoulderN: \", result.debug.shoulderN, \", torsoN: \", result.debug.torsoN]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleRetake,\n              className: \"px-4 py-2 rounded bg-black text-white hover:opacity-90\",\n              children: \"Retake (keep calibration)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleRecalibrate,\n              className: \"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300\",\n              children: \"Re\\u2011calibrate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => window.print(),\n              className: \"px-4 py-2 rounded bg-purple-600 text-white hover:bg-purple-700\",\n              children: \"Save / Print\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-2 text-white/60 text-sm text-center px-3\",\n      children: \"Tip: keep the A4 sheet flat at chest depth during calibration. Stand square to the camera for best accuracy.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 285,\n    columnNumber: 5\n  }, this);\n};\n_s(Measure, \"cdnyHDs8tzMwh56fbqpy2UhsRB8=\");\n_c = Measure;\nexport default Measure;\nvar _c;\n$RefreshReg$(_c, \"Measure\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","Pose","Camera","jsxDEV","_jsxDEV","A4_WIDTH_CM","MULTIPLIER_CHEST","MEN_SIZE_CHART","size","min","max","menSizeFromChest","cm","row","UPPER","LOWER","drawSeg","ctx","lm","a","b","color","width","W","H","_A$visibility","_B$visibility","A","B","visibility","strokeStyle","lineWidth","beginPath","moveTo","x","y","lineTo","stroke","drawBBox","pts","filter","p","_p$visibility","length","xs","map","ys","minX","Math","maxX","minY","maxY","pad","strokeRect","Measure","_s","videoRef","canvasRef","poseRef","camRef","phase","setPhase","status","setStatus","cmPerPx","setCmPerPx","barPx","setBarPx","locked","setLocked","result","setResult","STABILITY_FRAMES","MOVEMENT_EPS","GUIDE_MARGIN","recentShoulderN","getDistance","hypot","stopCamera","_camRef$current","_camRef$current$stop","current","stop","call","v","srcObject","getTracks","forEach","t","startCamera","pose","videoEl","camera","onFrame","send","image","height","start","canvasEl","getContext","locateFile","file","setOptions","modelComplexity","smoothLandmarks","enableSegmentation","minDetectionConfidence","minTrackingConfidence","onResults","res","save","clearRect","drawImage","gx","gy","gW","gH","barH","fillStyle","fillRect","font","fillText","poseLandmarks","vis","i","_lm$i$visibility","_lm$i","Lsh","Rsh","hip","needed","every","shMid","arc","PI","fill","inGuide","restore","shoulderWidthN","torsoHeightN","buf","push","shift","avg","reduce","maxDev","abs","_MEN_SIZE_CHART$find","Lx","Ly","Rx","Ry","shoulderPx","chestFlatCm","chestCm","tshirt","fit","find","r","Number","toFixed","hoodie","debug","round","shoulderN","torsoN","handleSetCalibration","handleRetake","handleRecalibrate","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","autoPlay","muted","playsInline","type","value","onChange","e","target","onClick","window","print","_c","$RefreshReg$"],"sources":["/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx"],"sourcesContent":["// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\n\n// --- sizing config ---\nconst A4_WIDTH_CM = 21.0;          // reference width for calibration\nconst MULTIPLIER_CHEST = 1.75;     // shoulder flat â†’ chest circumference (~1.6â€“1.9). Tune with a few tests.\n\nconst MEN_SIZE_CHART = [\n  { size: \"S\",   min: 88,  max: 94  },\n  { size: \"M\",   min: 95,  max: 102 },\n  { size: \"L\",   min: 103, max: 110 },\n  { size: \"XL\",  min: 111, max: 118 },\n  { size: \"2XL\", min: 119, max: 126 },\n  { size: \"3XL\", min: 127, max: 134 },\n  { size: \"4XL\", min: 135, max: 145 },\n];\n\nfunction menSizeFromChest(cm) {\n  for (const row of MEN_SIZE_CHART) if (cm >= row.min && cm <= row.max) return row.size;\n  return cm < MEN_SIZE_CHART[0].min ? \"XS/S\" : \"4XL+\";\n}\n\n// --- overlay helpers (like your screenshot) ---\nconst UPPER = [\n  [0, 1], [1, 2], [2, 3], [3, 7], // face-ish (optional but subtle)\n  [0, 11], [0, 12],               // nose to shoulders\n  [11, 13], [13, 15],             // left arm\n  [12, 14], [14, 16],             // right arm\n  [11, 12],                       // shoulders line\n  [11, 23], [12, 24],             // shoulder â†’ hip\n];\nconst LOWER = [\n  [23, 25], [25, 27], [27, 31],   // left leg + foot\n  [24, 26], [26, 28], [28, 32],   // right leg + foot\n  [23, 24],                       // hips line\n];\n\n// draw a colored polyline between two landmarks (if both are visible)\nfunction drawSeg(ctx, lm, a, b, color, width, W, H) {\n  const A = lm[a], B = lm[b];\n  if (!A || !B) return;\n  if ((A.visibility ?? 0) < 0.4 || (B.visibility ?? 0) < 0.4) return;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = width;\n  ctx.beginPath();\n  ctx.moveTo(A.x * W, A.y * H);\n  ctx.lineTo(B.x * W, B.y * H);\n  ctx.stroke();\n}\n\n// bounding box from visible landmarks\nfunction drawBBox(ctx, lm, W, H, color = \"rgba(0,255,0,0.9)\") {\n  const pts = lm.filter(p => (p?.visibility ?? 0) > 0.4);\n  if (!pts.length) return;\n  const xs = pts.map(p => p.x * W);\n  const ys = pts.map(p => p.y * H);\n  const minX = Math.max(0, Math.min(...xs));\n  const maxX = Math.min(W, Math.max(...xs));\n  const minY = Math.max(0, Math.min(...ys));\n  const maxY = Math.min(H, Math.max(...ys));\n  const pad = 8;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = 3;\n  ctx.strokeRect(minX - pad, minY - pad, (maxX - minX) + pad * 2, (maxY - minY) + pad * 2);\n}\n\nconst Measure = () => {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n\n  const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level, then match the bar width.\");\n  const [cmPerPx, setCmPerPx] = useState(null);\n  const [barPx, setBarPx] = useState(300);\n\n  const [locked, setLocked] = useState(false);\n  const [result, setResult] = useState(null);\n\n  // stability & framing\n  const STABILITY_FRAMES = 12;\n  const MOVEMENT_EPS = 0.015;\n  const GUIDE_MARGIN = 0.08;\n  const recentShoulderN = useRef([]);\n\n  const getDistance = useCallback((a, b) => Math.hypot(a.x - b.x, a.y - b.y), []);\n\n  function stopCamera() {\n    try {\n      camRef.current?.stop?.();\n      const v = videoRef.current;\n      v?.srcObject && v.srcObject.getTracks().forEach(t => t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  }\n\n  async function startCamera(pose) {\n    const videoEl = videoRef.current;\n    const camera = new Camera(videoEl, {\n      onFrame: async () => { await pose.send({ image: videoEl }); },\n      width: 1280,\n      height: 720,\n    });\n    camRef.current = camera;\n    camera.start();\n  }\n\n  useEffect(() => {\n    const canvasEl = canvasRef.current;\n    const ctx = canvasEl.getContext(\"2d\");\n\n    const pose = new Pose({\n      // Pin version to avoid WASM loader issues\n      locateFile: (file) => `https://unpkg.com/@mediapipe/pose@0.5.1675469404/${file}`,\n    });\n    poseRef.current = pose;\n\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true,\n      enableSegmentation: false,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5,\n    });\n\n    pose.onResults((res) => {\n      if (locked) return;\n\n      const W = res.image.width, H = res.image.height;\n      if (canvasEl.width !== W) canvasEl.width = W;\n      if (canvasEl.height !== H) canvasEl.height = H;\n\n      ctx.save();\n      ctx.clearRect(0, 0, W, H);\n      ctx.drawImage(res.image, 0, 0, W, H);\n\n      // guide box (outer)\n      const gx = W * GUIDE_MARGIN, gy = H * GUIDE_MARGIN;\n      const gW = W * (1 - GUIDE_MARGIN * 2), gH = H * (1 - GUIDE_MARGIN * 2);\n      ctx.strokeStyle = \"rgba(0,255,0,0.7)\";\n      ctx.lineWidth = 2;\n      ctx.strokeRect(gx, gy, gW, gH);\n\n      // calibration bar (visible in calibrate phase)\n      if (phase === \"calibrate\") {\n        const barH = 14;\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillRect((W - barPx) / 2, H * 0.1, barPx, barH);\n        ctx.font = \"14px system-ui, sans-serif\";\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillText(\"Match this bar to A4 width (21 cm) at chest depth.\", Math.max(12, (W - 360) / 2), H * 0.1 - 8);\n      }\n\n      const lm = res.poseLandmarks;\n      if (lm) {\n        // --- draw skeleton like screenshot ---\n        // green bbox around person\n        drawBBox(ctx, lm, W, H, \"rgba(0,255,0,0.9)\");\n\n        // blue upper body lines\n        UPPER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#2aa4ff\", 3, W, H));\n        // orange lower body lines\n        LOWER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#ff9933\", 3, W, H));\n\n        // small teal joints (shoulders, hip midpoint)\n        const vis = (i) => (lm[i]?.visibility ?? 0) > 0.4;\n        const Lsh = lm[11], Rsh = lm[12];\n        const hip = vis(23) ? lm[23] : lm[24];\n        const needed = [11, 12, 23, 24].every(vis);\n        if (needed) {\n          const shMid = { x: (Lsh.x + Rsh.x) / 2, y: (Lsh.y + Rsh.y) / 2 };\n          ctx.fillStyle = \"rgba(0,200,255,1)\";\n          [Lsh, Rsh, shMid, hip].forEach(p => {\n            ctx.beginPath(); ctx.arc(p.x * W, p.y * H, 6, 0, Math.PI * 2); ctx.fill();\n          });\n\n          // inside guide?\n          const inGuide = [Lsh, Rsh, hip].every(p =>\n            p.x * W >= gx && p.x * W <= gx + gW && p.y * H >= gy && p.y * H <= gy + gH\n          );\n          if (!inGuide) {\n            setStatus(\"Step back/center yourself inside the frame.\");\n            ctx.restore();\n            return;\n          }\n\n          // Only lock/measure in MEASURE phase\n          if (phase === \"measure\") {\n            const shoulderWidthN = getDistance(Lsh, Rsh);\n            const torsoHeightN = getDistance(shMid, hip);\n            if (torsoHeightN > 0 && cmPerPx) {\n              // stability buffer\n              const buf = recentShoulderN.current;\n              buf.push(shoulderWidthN);\n              if (buf.length > STABILITY_FRAMES) buf.shift();\n\n              if (buf.length >= STABILITY_FRAMES) {\n                const avg = buf.reduce((a, b) => a + b, 0) / buf.length;\n                const maxDev = Math.max(...buf.map(v => Math.abs(v - avg)));\n                if (maxDev < MOVEMENT_EPS) {\n                  // compute chest (cm)\n                  const Lx = Lsh.x * W, Ly = Lsh.y * H;\n                  const Rx = Rsh.x * W, Ry = Rsh.y * H;\n                  const shoulderPx = Math.hypot(Lx - Rx, Ly - Ry);\n                  const chestFlatCm = shoulderPx * cmPerPx;\n                  const chestCm = chestFlatCm * MULTIPLIER_CHEST;\n\n                  const tshirt = menSizeFromChest(chestCm);\n                  const fit =\n                    chestCm <= MEN_SIZE_CHART.find(r => r.size === tshirt)?.max\n                      ? \"Slim/Regular\"\n                      : \"Regular/Relaxed\";\n\n                  setResult({\n                    chestCm: Number(chestCm.toFixed(1)),\n                    tshirt,\n                    hoodie: tshirt === \"S\" ? \"S\" : tshirt,\n                    fit,\n                    debug: {\n                      cmPerPx: Number(cmPerPx.toFixed(4)),\n                      shoulderPx: Math.round(shoulderPx),\n                      shoulderN: Number(shoulderWidthN.toFixed(3)),\n                      torsoN: Number(torsoHeightN.toFixed(3)),\n                    },\n                  });\n\n                  setLocked(true);\n                  setPhase(\"locked\");\n                  setStatus(\"Locked âœ”ï¸\");\n                  stopCamera();\n                } else {\n                  setStatus(\"Hold still for a momentâ€¦\");\n                }\n              } else {\n                setStatus(\"Framing looks good â€” keep stillâ€¦\");\n              }\n            } else {\n              setStatus(\"Calibrated? If not, set calibration first.\");\n            }\n          } else if (phase === \"calibrate\") {\n            setStatus(\"Calibration: adjust bar, then click Set calibration.\");\n          }\n        } else {\n          setStatus(\"Show shoulders & upper torso.\");\n        }\n      } else {\n        setStatus(\"Detecting bodyâ€¦\");\n      }\n\n      ctx.restore();\n    });\n\n    startCamera(pose);\n\n    return () => { stopCamera(); };\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n\n  const handleSetCalibration = () => {\n    if (barPx < 40) return;\n    setCmPerPx(A4_WIDTH_CM / barPx); // cm per pixel\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n  };\n\n  const handleRetake = () => {\n    setLocked(false);\n    setResult(null);\n    setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1â€“2 seconds.\");\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  const handleRecalibrate = () => {\n    setLocked(false);\n    setResult(null);\n    setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level, then match the bar width.\");\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  return (\n    <div className=\"relative w-full min-h-screen bg-black flex flex-col items-center\">\n      {/* Header */}\n      <div className=\"w-full max-w-5xl flex items-center justify-between px-3 pt-3\">\n        <div className=\"text-white/90 font-semibold\">Male Upperâ€‘Body Measurement (Realâ€‘time)</div>\n        <div className=\"bg-white/90 rounded px-3 py-1 text-sm\">{status}</div>\n      </div>\n\n      {/* Camera */}\n      <div className=\"relative w-full max-w-5xl aspect-video mt-3\">\n        <video\n          ref={videoRef}\n          className=\"absolute inset-0 w-full h-full object-contain bg-black\"\n          autoPlay muted playsInline\n        />\n        <canvas\n          ref={canvasRef}\n          className=\"absolute inset-0 w-full h-full object-contain pointer-events-none\"\n        />\n\n        {/* Calibration UI */}\n        {phase === \"calibrate\" && (\n          <div className=\"absolute bottom-3 left-1/2 -translate-x-1/2 bg-white/95 rounded-xl p-3 flex items-center gap-3 shadow\">\n            <div className=\"text-sm font-medium\">A4 width match</div>\n            <input\n              type=\"range\"\n              min={120} max={900}\n              value={barPx}\n              onChange={(e) => setBarPx(Number(e.target.value))}\n              className=\"w-64\"\n            />\n            <button\n              onClick={handleSetCalibration}\n              className=\"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700 text-sm\"\n            >\n              Set calibration\n            </button>\n          </div>\n        )}\n\n        {/* Result modal */}\n        {phase === \"locked\" && result && (\n          <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center p-4\">\n            <div className=\"bg-white max-w-md w-full rounded-2xl p-5 shadow-xl\">\n              <div className=\"text-xl font-bold mb-2\">Recommended Sizes</div>\n              <div className=\"space-y-1\">\n                <div>Chest: <b>{result.chestCm} cm</b></div>\n                <div>ðŸ‘• Tâ€‘Shirt: <b>{result.tshirt}</b></div>\n                <div>ðŸ§¥ Hoodie: <b>{result.hoodie}</b></div>\n                <div>ðŸŽ¯ Fit: <b>{result.fit}</b></div>\n              </div>\n              <div className=\"mt-3 text-xs text-gray-600\">\n                Debug â€” cm/px: {result.debug.cmPerPx}, shoulderPx: {result.debug.shoulderPx},\n                shoulderN: {result.debug.shoulderN}, torsoN: {result.debug.torsoN}\n              </div>\n              <div className=\"mt-4 flex gap-2\">\n                <button onClick={handleRetake} className=\"px-4 py-2 rounded bg-black text-white hover:opacity-90\">\n                  Retake (keep calibration)\n                </button>\n                <button onClick={handleRecalibrate} className=\"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300\">\n                  Reâ€‘calibrate\n                </button>\n                <button onClick={() => window.print()} className=\"px-4 py-2 rounded bg-purple-600 text-white hover:bg-purple-700\">\n                  Save / Print\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <div className=\"mt-2 text-white/60 text-sm text-center px-3\">\n        Tip: keep the A4 sheet flat at chest depth during calibration. Stand square to the camera for best accuracy.\n      </div>\n    </div>\n  );\n};\n\nexport default Measure;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}