{"ast":null,"code":"var _jsxFileName = \"/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { Camera as CameraIcon, Sparkles, Activity, Target } from 'lucide-react';\n\n/* ---------- Calibration & Measurement Constants ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst A4_WIDTH_CM = 21.0; // A4 sheet width in cm\nconst CHEST_MULTIPLIER = 2.8; // shoulder width → chest circumference (realistic ratio)\nconst WAIST_MULTIPLIER = 2.2; // hip width → waist circumference (realistic ratio)\n\n/* ---------- Size Recommendation System ---------- */\nconst recommendTopSize = (chestCm, waistCm, shoulderCm, age = 'adult') => {\n  if (!chestCm || chestCm <= 0) return null;\n\n  // Age-based size charts (realistic measurements)\n  if (age === 'child') {\n    // Children sizes (ages 4-12)\n    if (chestCm < 55) return '2T-3T';\n    if (chestCm < 60) return '4T-5T';\n    if (chestCm < 65) return '6-7';\n    if (chestCm < 70) return '8-9';\n    if (chestCm < 75) return '10-11';\n    if (chestCm < 80) return '12-13';\n    return '14-15';\n  } else if (age === 'teen') {\n    // Teen sizes (ages 13-17)\n    if (chestCm < 75) return 'XS';\n    if (chestCm < 80) return 'S';\n    if (chestCm < 85) return 'M';\n    if (chestCm < 90) return 'L';\n    if (chestCm < 95) return 'XL';\n    return 'XXL';\n  } else {\n    // Adult sizes (18+)\n    if (chestCm < 80) return 'XXS';\n    if (chestCm < 85) return 'XS';\n    if (chestCm < 90) return 'S';\n    if (chestCm < 95) return 'M';\n    if (chestCm < 100) return 'L';\n    if (chestCm < 105) return 'XL';\n    if (chestCm < 110) return 'XXL';\n    if (chestCm < 115) return '3XL';\n    return '4XL';\n  }\n};\n\n// Simple pose visualization\nconst drawPose = (ctx, lm, W, H) => {\n  var _lm$11$visibility, _lm$12$visibility, _lm$23$visibility, _lm$24$visibility;\n  if (!lm) return;\n\n  // Draw key points\n  const keyPoints = [11, 12, 23, 24]; // shoulders and hips\n  keyPoints.forEach(i => {\n    var _lm$i$visibility;\n    if (lm[i] && ((_lm$i$visibility = lm[i].visibility) !== null && _lm$i$visibility !== void 0 ? _lm$i$visibility : 0) > 0.4) {\n      ctx.fillStyle = \"#3B82F6\";\n      ctx.beginPath();\n      ctx.arc(lm[i].x * W, lm[i].y * H, 6, 0, Math.PI * 2);\n      ctx.fill();\n    }\n  });\n\n  // Draw shoulder line\n  if (lm[11] && lm[12] && ((_lm$11$visibility = lm[11].visibility) !== null && _lm$11$visibility !== void 0 ? _lm$11$visibility : 0) > 0.4 && ((_lm$12$visibility = lm[12].visibility) !== null && _lm$12$visibility !== void 0 ? _lm$12$visibility : 0) > 0.4) {\n    ctx.strokeStyle = \"#10B981\";\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.moveTo(lm[11].x * W, lm[11].y * H);\n    ctx.lineTo(lm[12].x * W, lm[12].y * H);\n    ctx.stroke();\n  }\n\n  // Draw hip line\n  if (lm[23] && lm[24] && ((_lm$23$visibility = lm[23].visibility) !== null && _lm$23$visibility !== void 0 ? _lm$23$visibility : 0) > 0.4 && ((_lm$24$visibility = lm[24].visibility) !== null && _lm$24$visibility !== void 0 ? _lm$24$visibility : 0) > 0.4) {\n    ctx.strokeStyle = \"#F59E0B\";\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.moveTo(lm[23].x * W, lm[23].y * H);\n    ctx.lineTo(lm[24].x * W, lm[24].y * H);\n    ctx.stroke();\n  }\n};\nexport default function Measure() {\n  _s();\n  var _meas$chestCm, _meas$shoulderCm, _meas$waistCm;\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n  const [phase, setPhase] = useState(\"calibrate\");\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [barPx, setBarPx] = useState(300);\n  const [cmPerPx, setCmPerPx] = useState(null);\n  const [meas, setMeas] = useState(null);\n  const [locked, setLocked] = useState(false);\n  const [age, setAge] = useState('adult'); // 'child', 'teen', 'adult'\n\n  // Measurement buffers for stability\n  const chestBuf = useRef([]);\n  const shoulderBuf = useRef([]);\n  const waistBuf = useRef([]);\n  const STABILITY_FRAMES = 10;\n  const MOVEMENT_EPS = 0.02;\n  useEffect(() => {\n    if (!videoRef.current || !canvasRef.current) return;\n    const pose = new Pose({\n      locateFile: file => {\n        return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\n      }\n    });\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5\n    });\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const W = canvas.width;\n    const H = canvas.height;\n    const startCamera = async pose => {\n      try {\n        const camera = new Camera(videoRef.current, {\n          onFrame: async () => {\n            await pose.send({\n              image: videoRef.current\n            });\n          },\n          width: 1280,\n          height: 720\n        });\n        await camera.start();\n        camRef.current = camera;\n      } catch (error) {\n        console.error(\"Camera start failed:\", error);\n      }\n    };\n    const stopCamera = () => {\n      if (camRef.current) {\n        camRef.current.stop();\n        camRef.current = null;\n      }\n    };\n    pose.onResults(res => {\n      if (!res.poseLandmarks || phase === \"locked\") return;\n      ctx.clearRect(0, 0, W, H);\n      ctx.save();\n\n      // Draw calibration guide\n      if (phase === \"calibrate\") {\n        const barW = barPx;\n        const barH = 20;\n        const barY = H / 2 - 100;\n        ctx.fillStyle = \"rgba(255, 255, 255, 0.8)\";\n        ctx.fillRect((W - barW) / 2, barY, barW, barH);\n        ctx.strokeStyle = \"rgba(0, 0, 0, 0.8)\";\n        ctx.lineWidth = 2;\n        ctx.strokeRect((W - barW) / 2, barY, barW, barH);\n        ctx.font = \"16px Arial\";\n        ctx.fillStyle = \"rgba(0, 0, 0, 0.9)\";\n        ctx.textAlign = \"center\";\n        ctx.fillText(\"Match this bar to A4 width (21 cm)\", W / 2, barY - 10);\n      }\n      const lm = res.poseLandmarks;\n      if (!lm) {\n        setStatus(\"Detecting body...\");\n        ctx.restore();\n        return;\n      }\n\n      // Draw pose overlay\n      drawPose(ctx, lm, W, H);\n\n      // Check visibility of key points\n      const vis = i => {\n        var _lm$i$visibility2, _lm$i;\n        return ((_lm$i$visibility2 = (_lm$i = lm[i]) === null || _lm$i === void 0 ? void 0 : _lm$i.visibility) !== null && _lm$i$visibility2 !== void 0 ? _lm$i$visibility2 : 0) > 0.4;\n      };\n      const shouldersOK = vis(11) && vis(12);\n      const hipsOK = vis(23) || vis(24);\n      if (!(shouldersOK && hipsOK)) {\n        setStatus(\"Show shoulders & upper torso.\");\n        ctx.restore();\n        return;\n      }\n      const Lsh = lm[11],\n        Rsh = lm[12];\n      const Lhip = lm[23],\n        Rhip = lm[24];\n\n      // Check if person is inside frame\n      const margin = 50;\n      const inside = [Lsh, Rsh, Lhip, Rhip].every(p => p.x * W >= margin && p.x * W <= W - margin && p.y * H >= margin && p.y * H <= H - margin);\n      if (!inside) {\n        setStatus(\"Step back/center inside the frame.\");\n        ctx.restore();\n        return;\n      }\n      if (phase === \"calibrate\") {\n        setStatus(\"Adjust bar → Set calibration.\");\n        ctx.restore();\n        return;\n      }\n      if (!cmPerPx) {\n        setStatus(\"Click Set calibration first.\");\n        ctx.restore();\n        return;\n      }\n\n      // Calculate measurements\n      const shoulderPx = Math.abs((Lsh.x - Rsh.x) * W);\n      const shoulderCm = shoulderPx * cmPerPx;\n      const chestCm = shoulderCm * CHEST_MULTIPLIER;\n      let waistCm = null;\n      if (vis(23) && vis(24)) {\n        const hipPx = Math.abs((Lhip.x - Rhip.x) * W);\n        waistCm = hipPx * cmPerPx * WAIST_MULTIPLIER;\n      }\n\n      // Add to buffers for stability\n      const pushToBuffer = (buffer, value) => {\n        if (value && value > 0) {\n          buffer.push(value);\n          if (buffer.length > STABILITY_FRAMES) buffer.shift();\n        }\n      };\n      pushToBuffer(chestBuf, chestCm);\n      pushToBuffer(shoulderBuf, shoulderCm);\n      pushToBuffer(waistBuf, waistCm);\n\n      // Check stability\n      const isStable = chestBuf.current.length >= STABILITY_FRAMES && shoulderBuf.current.length >= STABILITY_FRAMES;\n      if (isStable) {\n        // Calculate median values for accuracy\n        const getMedian = arr => {\n          const sorted = [...arr].sort((a, b) => a - b);\n          const mid = Math.floor(sorted.length / 2);\n          return sorted.length % 2 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;\n        };\n        const finalChest = getMedian(chestBuf.current);\n        const finalShoulder = getMedian(shoulderBuf.current);\n        const finalWaist = waistBuf.current.length > 0 ? getMedian(waistBuf.current) : null;\n\n        // Validate measurements are realistic\n        if (finalChest > 40 && finalChest < 150 && finalShoulder > 20 && finalShoulder < 80) {\n          setMeas({\n            chestCm: Number(finalChest.toFixed(1)),\n            shoulderCm: Number(finalShoulder.toFixed(1)),\n            waistCm: finalWaist ? Number(finalWaist.toFixed(1)) : null\n          });\n          setLocked(true);\n          setPhase(\"locked\");\n          setStatus(\"Locked ✔️\");\n          stopCamera();\n        } else {\n          setStatus(\"Invalid measurements. Please recalibrate.\");\n        }\n      } else {\n        setStatus(\"Hold still...\");\n      }\n      ctx.restore();\n    });\n    startCamera(pose);\n    poseRef.current = pose;\n    return () => {\n      stopCamera();\n      if (poseRef.current) {\n        poseRef.current.close();\n      }\n    };\n  }, [phase, cmPerPx, barPx]);\n  const setCalibration = () => {\n    if (barPx < 100) return;\n    const newCmPerPx = A4_WIDTH_CM / barPx;\n    setCmPerPx(newCmPerPx);\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n\n    // Reset buffers\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    console.log('Calibration set:', {\n      barPx,\n      cmPerPx: newCmPerPx\n    });\n  };\n  const retake = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1–2 seconds.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n  };\n  const recalibrate = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n  };\n  const getStatusIcon = () => {\n    if (phase === \"locked\") return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"text-emerald-500 text-xl\",\n      children: \"\\u2705\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 36\n    }, this);\n    if (phase === \"measure\") return /*#__PURE__*/_jsxDEV(Activity, {\n      className: \"w-5 h-5 text-blue-500 animate-pulse\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 37\n    }, this);\n    return /*#__PURE__*/_jsxDEV(Target, {\n      className: \"w-5 h-5 text-amber-500\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 12\n    }, this);\n  };\n  const getPhaseColor = () => {\n    if (phase === \"locked\") return \"from-emerald-500 to-green-500\";\n    if (phase === \"measure\") return \"from-blue-500 to-cyan-500\";\n    return \"from-amber-500 to-orange-500\";\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 relative overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-10 left-10 w-72 h-72 bg-blue-500/10 rounded-full blur-3xl animate-pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-10 right-10 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse delay-1000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative z-10 flex flex-col items-center min-h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-7xl flex items-center justify-between px-6 py-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg\",\n            children: /*#__PURE__*/_jsxDEV(Sparkles, {\n              className: \"w-7 h-7 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold text-white\",\n              children: \"AI Fashion Fit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-200\",\n              children: \"Body Measurement System\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `bg-gradient-to-r ${getPhaseColor()} rounded-full px-6 py-3 shadow-lg backdrop-blur-sm border border-white/10`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3 text-white\",\n              children: [getStatusIcon(), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium text-sm\",\n                children: status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-4xl px-6 py-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold mb-3\",\n              children: \"Select Age Group for Accurate Sizing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center space-x-4\",\n              children: [{\n                value: 'child',\n                label: 'Child (4-12)',\n                color: 'from-pink-500 to-purple-500'\n              }, {\n                value: 'teen',\n                label: 'Teen (13-17)',\n                color: 'from-blue-500 to-cyan-500'\n              }, {\n                value: 'adult',\n                label: 'Adult (18+)',\n                color: 'from-green-500 to-emerald-500'\n              }].map(({\n                value,\n                label,\n                color\n              }) => /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setAge(value),\n                className: `px-4 py-2 rounded-xl font-medium transition-all duration-300 ${age === value ? `bg-gradient-to-r ${color} text-white shadow-lg` : 'bg-white/20 text-white/80 hover:bg-white/30'}`,\n                children: label\n              }, value, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-6xl px-6 flex-1 flex items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full bg-black/20 backdrop-blur-lg rounded-3xl overflow-hidden shadow-2xl border border-white/10\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative aspect-video\",\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              className: \"absolute inset-0 w-full h-full object-contain bg-black rounded-3xl\",\n              autoPlay: true,\n              muted: true,\n              playsInline: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              className: \"absolute inset-0 w-full h-full object-contain pointer-events-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 15\n            }, this), phase === \"calibrate\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-6 left-1/2 transform -translate-x-1/2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-white/95 backdrop-blur-md rounded-2xl px-6 py-4 shadow-2xl border border-white/20\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Target, {\n                      className: \"w-5 h-5 text-amber-600\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 416,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm font-medium text-gray-700\",\n                      children: \"A4 width calibration\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 417,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"range\",\n                    min: 100,\n                    max: 800,\n                    value: barPx,\n                    onChange: e => setBarPx(Number(e.target.value)),\n                    className: \"w-64 accent-blue-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 419,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-gray-600 w-16\",\n                    children: [barPx, \"px\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 427,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: setCalibration,\n                    className: \"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white px-6 py-2 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg\",\n                    children: \"Set Calibration\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 428,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-4xl px-6 py-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center space-x-2 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(CameraIcon, {\n                className: \"w-5 h-5 text-blue-300\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold\",\n                children: \"Instructions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-white/80 space-y-2\",\n              children: [phase === \"calibrate\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\uD83D\\uDCC4 Hold an A4 sheet at chest level and adjust the bar to match its width for accurate calibration.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this), phase === \"measure\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\uD83E\\uDDCD Stand straight with arms slightly away from your body. Hold still for precise measurement.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 19\n              }, this), phase === \"locked\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2705 Measurements captured successfully! You can retake if needed or save your results.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 9\n      }, this), phase === \"locked\" && meas && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-4xl px-6 py-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/95 backdrop-blur-md rounded-2xl p-6 border border-gray-200 shadow-xl\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-gray-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-bold mb-4\",\n              children: \"\\uD83D\\uDCCA Measurement Results\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-50 rounded-xl p-4 border border-blue-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-blue-600\",\n                  children: ((_meas$chestCm = meas.chestCm) === null || _meas$chestCm === void 0 ? void 0 : _meas$chestCm.toFixed(1)) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-blue-500\",\n                  children: \"Chest (cm)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-emerald-50 rounded-xl p-4 border border-emerald-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-emerald-600\",\n                  children: ((_meas$shoulderCm = meas.shoulderCm) === null || _meas$shoulderCm === void 0 ? void 0 : _meas$shoulderCm.toFixed(1)) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 479,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-emerald-500\",\n                  children: \"Shoulder (cm)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-purple-50 rounded-xl p-4 border border-purple-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-purple-600\",\n                  children: ((_meas$waistCm = meas.waistCm) === null || _meas$waistCm === void 0 ? void 0 : _meas$waistCm.toFixed(1)) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-purple-500\",\n                  children: \"Waist (cm)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-blue-50 to-emerald-50 rounded-xl p-4 mb-6 border border-blue-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-lg font-semibold text-gray-700 mb-2\",\n                children: \"Recommended Size\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-3xl font-bold bg-gradient-to-r from-blue-600 to-emerald-600 bg-clip-text text-transparent\",\n                children: recommendTopSize(meas.chestCm, meas.waistCm, meas.shoulderCm, age)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-600 mt-2\",\n                children: [\"Based on \", age === 'child' ? 'Children' : age === 'teen' ? 'Teen' : 'Adult', \" sizing chart\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col sm:flex-row gap-3 justify-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: retake,\n                className: \"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-gray-300\",\n                children: \"\\uD83D\\uDD04 Retake\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: recalibrate,\n                className: \"bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-blue-300\",\n                children: \"\\uD83C\\uDFAF Recalibrate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  const recommendedSize = recommendTopSize(meas.chestCm, meas.waistCm, meas.shoulderCm, age);\n                  if (recommendedSize) {\n                    const measurementData = encodeURIComponent(JSON.stringify({\n                      size: recommendedSize,\n                      gender: 'Men',\n                      age: age,\n                      measurements: {\n                        chestCm: meas.chestCm,\n                        shoulderCm: meas.shoulderCm,\n                        waistCm: meas.waistCm\n                      }\n                    }));\n                    window.location.href = `/recommendations?data=${measurementData}`;\n                  }\n                },\n                className: \"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-300 shadow-lg\",\n                children: \"\\u2728 Get Recommendations\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 344,\n    columnNumber: 5\n  }, this);\n}\n_s(Measure, \"tX4PRZcB+JumzR4X7wXbA7JtbWU=\");\n_c = Measure;\nvar _c;\n$RefreshReg$(_c, \"Measure\");","map":{"version":3,"names":["React","useRef","useEffect","useState","Pose","Camera","CameraIcon","Sparkles","Activity","Target","jsxDEV","_jsxDEV","A4_WIDTH_CM","CHEST_MULTIPLIER","WAIST_MULTIPLIER","recommendTopSize","chestCm","waistCm","shoulderCm","age","drawPose","ctx","lm","W","H","_lm$11$visibility","_lm$12$visibility","_lm$23$visibility","_lm$24$visibility","keyPoints","forEach","i","_lm$i$visibility","visibility","fillStyle","beginPath","arc","x","y","Math","PI","fill","strokeStyle","lineWidth","moveTo","lineTo","stroke","Measure","_s","_meas$chestCm","_meas$shoulderCm","_meas$waistCm","videoRef","canvasRef","poseRef","camRef","phase","setPhase","status","setStatus","barPx","setBarPx","cmPerPx","setCmPerPx","meas","setMeas","locked","setLocked","setAge","chestBuf","shoulderBuf","waistBuf","STABILITY_FRAMES","MOVEMENT_EPS","current","pose","locateFile","file","setOptions","modelComplexity","smoothLandmarks","minDetectionConfidence","minTrackingConfidence","canvas","getContext","width","height","startCamera","camera","onFrame","send","image","start","error","console","stopCamera","stop","onResults","res","poseLandmarks","clearRect","save","barW","barH","barY","fillRect","strokeRect","font","textAlign","fillText","restore","vis","_lm$i$visibility2","_lm$i","shouldersOK","hipsOK","Lsh","Rsh","Lhip","Rhip","margin","inside","every","p","shoulderPx","abs","hipPx","pushToBuffer","buffer","value","push","length","shift","isStable","getMedian","arr","sorted","sort","a","b","mid","floor","finalChest","finalShoulder","finalWaist","Number","toFixed","close","setCalibration","newCmPerPx","log","retake","recalibrate","getStatusIcon","className","children","fileName","_jsxFileName","lineNumber","columnNumber","getPhaseColor","label","color","map","onClick","ref","autoPlay","muted","playsInline","type","min","max","onChange","e","target","recommendedSize","measurementData","encodeURIComponent","JSON","stringify","size","gender","measurements","window","location","href","_c","$RefreshReg$"],"sources":["/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx"],"sourcesContent":["// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { Camera as CameraIcon, Sparkles, Activity, Target } from 'lucide-react';\n\n/* ---------- Calibration & Measurement Constants ---------- */\nconst A4_WIDTH_CM = 21.0; // A4 sheet width in cm\nconst CHEST_MULTIPLIER = 2.8; // shoulder width → chest circumference (realistic ratio)\nconst WAIST_MULTIPLIER = 2.2; // hip width → waist circumference (realistic ratio)\n\n/* ---------- Size Recommendation System ---------- */\nconst recommendTopSize = (chestCm, waistCm, shoulderCm, age = 'adult') => {\n  if (!chestCm || chestCm <= 0) return null;\n  \n  // Age-based size charts (realistic measurements)\n  if (age === 'child') {\n    // Children sizes (ages 4-12)\n    if (chestCm < 55) return '2T-3T';\n    if (chestCm < 60) return '4T-5T';\n    if (chestCm < 65) return '6-7';\n    if (chestCm < 70) return '8-9';\n    if (chestCm < 75) return '10-11';\n    if (chestCm < 80) return '12-13';\n    return '14-15';\n  } else if (age === 'teen') {\n    // Teen sizes (ages 13-17)\n    if (chestCm < 75) return 'XS';\n    if (chestCm < 80) return 'S';\n    if (chestCm < 85) return 'M';\n    if (chestCm < 90) return 'L';\n    if (chestCm < 95) return 'XL';\n    return 'XXL';\n  } else {\n    // Adult sizes (18+)\n    if (chestCm < 80) return 'XXS';\n    if (chestCm < 85) return 'XS';\n    if (chestCm < 90) return 'S';\n    if (chestCm < 95) return 'M';\n    if (chestCm < 100) return 'L';\n    if (chestCm < 105) return 'XL';\n    if (chestCm < 110) return 'XXL';\n    if (chestCm < 115) return '3XL';\n    return '4XL';\n  }\n};\n\n// Simple pose visualization\nconst drawPose = (ctx, lm, W, H) => {\n  if (!lm) return;\n  \n  // Draw key points\n  const keyPoints = [11, 12, 23, 24]; // shoulders and hips\n  keyPoints.forEach(i => {\n    if (lm[i] && (lm[i].visibility ?? 0) > 0.4) {\n      ctx.fillStyle = \"#3B82F6\";\n      ctx.beginPath();\n      ctx.arc(lm[i].x * W, lm[i].y * H, 6, 0, Math.PI * 2);\n      ctx.fill();\n    }\n  });\n  \n  // Draw shoulder line\n  if (lm[11] && lm[12] && (lm[11].visibility ?? 0) > 0.4 && (lm[12].visibility ?? 0) > 0.4) {\n    ctx.strokeStyle = \"#10B981\";\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.moveTo(lm[11].x * W, lm[11].y * H);\n    ctx.lineTo(lm[12].x * W, lm[12].y * H);\n    ctx.stroke();\n  }\n  \n  // Draw hip line\n  if (lm[23] && lm[24] && (lm[23].visibility ?? 0) > 0.4 && (lm[24].visibility ?? 0) > 0.4) {\n    ctx.strokeStyle = \"#F59E0B\";\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.moveTo(lm[23].x * W, lm[23].y * H);\n    ctx.lineTo(lm[24].x * W, lm[24].y * H);\n    ctx.stroke();\n  }\n};\n\nexport default function Measure() {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n\n  const [phase, setPhase] = useState(\"calibrate\");\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [barPx, setBarPx] = useState(300);\n  const [cmPerPx, setCmPerPx] = useState(null);\n  const [meas, setMeas] = useState(null);\n  const [locked, setLocked] = useState(false);\n  const [age, setAge] = useState('adult'); // 'child', 'teen', 'adult'\n\n  // Measurement buffers for stability\n  const chestBuf = useRef([]);\n  const shoulderBuf = useRef([]);\n  const waistBuf = useRef([]);\n\n  const STABILITY_FRAMES = 10;\n  const MOVEMENT_EPS = 0.02;\n\n  useEffect(() => {\n    if (!videoRef.current || !canvasRef.current) return;\n\n    const pose = new Pose({\n      locateFile: (file) => {\n        return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\n      }\n    });\n\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5\n    });\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const W = canvas.width;\n    const H = canvas.height;\n\n    const startCamera = async (pose) => {\n      try {\n        const camera = new Camera(videoRef.current, {\n          onFrame: async () => {\n            await pose.send({ image: videoRef.current });\n          },\n          width: 1280,\n          height: 720\n        });\n        await camera.start();\n        camRef.current = camera;\n      } catch (error) {\n        console.error(\"Camera start failed:\", error);\n      }\n    };\n\n    const stopCamera = () => {\n      if (camRef.current) {\n        camRef.current.stop();\n        camRef.current = null;\n      }\n    };\n\n    pose.onResults((res) => {\n      if (!res.poseLandmarks || phase === \"locked\") return;\n\n      ctx.clearRect(0, 0, W, H);\n      ctx.save();\n\n      // Draw calibration guide\n      if (phase === \"calibrate\") {\n        const barW = barPx;\n        const barH = 20;\n        const barY = H / 2 - 100;\n        \n        ctx.fillStyle = \"rgba(255, 255, 255, 0.8)\";\n        ctx.fillRect((W - barW) / 2, barY, barW, barH);\n        \n        ctx.strokeStyle = \"rgba(0, 0, 0, 0.8)\";\n        ctx.lineWidth = 2;\n        ctx.strokeRect((W - barW) / 2, barY, barW, barH);\n        \n        ctx.font = \"16px Arial\";\n        ctx.fillStyle = \"rgba(0, 0, 0, 0.9)\";\n        ctx.textAlign = \"center\";\n        ctx.fillText(\"Match this bar to A4 width (21 cm)\", W / 2, barY - 10);\n      }\n\n      const lm = res.poseLandmarks;\n      if (!lm) {\n        setStatus(\"Detecting body...\");\n        ctx.restore();\n        return;\n      }\n\n      // Draw pose overlay\n      drawPose(ctx, lm, W, H);\n\n      // Check visibility of key points\n      const vis = (i) => (lm[i]?.visibility ?? 0) > 0.4;\n      const shouldersOK = vis(11) && vis(12);\n      const hipsOK = vis(23) || vis(24);\n      \n      if (!(shouldersOK && hipsOK)) {\n        setStatus(\"Show shoulders & upper torso.\");\n        ctx.restore();\n        return;\n      }\n\n      const Lsh = lm[11], Rsh = lm[12];\n      const Lhip = lm[23], Rhip = lm[24];\n\n      // Check if person is inside frame\n      const margin = 50;\n      const inside = [Lsh, Rsh, Lhip, Rhip].every(p => \n        p.x * W >= margin && p.x * W <= W - margin && \n        p.y * H >= margin && p.y * H <= H - margin\n      );\n      \n      if (!inside) {\n        setStatus(\"Step back/center inside the frame.\");\n        ctx.restore();\n        return;\n      }\n\n      if (phase === \"calibrate\") {\n        setStatus(\"Adjust bar → Set calibration.\");\n        ctx.restore();\n        return;\n      }\n      \n      if (!cmPerPx) {\n        setStatus(\"Click Set calibration first.\");\n        ctx.restore();\n        return;\n      }\n\n      // Calculate measurements\n      const shoulderPx = Math.abs((Lsh.x - Rsh.x) * W);\n      const shoulderCm = shoulderPx * cmPerPx;\n      \n      const chestCm = shoulderCm * CHEST_MULTIPLIER;\n      \n      let waistCm = null;\n      if (vis(23) && vis(24)) {\n        const hipPx = Math.abs((Lhip.x - Rhip.x) * W);\n        waistCm = hipPx * cmPerPx * WAIST_MULTIPLIER;\n      }\n\n      // Add to buffers for stability\n      const pushToBuffer = (buffer, value) => {\n        if (value && value > 0) {\n          buffer.push(value);\n          if (buffer.length > STABILITY_FRAMES) buffer.shift();\n        }\n      };\n\n      pushToBuffer(chestBuf, chestCm);\n      pushToBuffer(shoulderBuf, shoulderCm);\n      pushToBuffer(waistBuf, waistCm);\n\n      // Check stability\n      const isStable = chestBuf.current.length >= STABILITY_FRAMES && \n                      shoulderBuf.current.length >= STABILITY_FRAMES;\n\n      if (isStable) {\n        // Calculate median values for accuracy\n        const getMedian = (arr) => {\n          const sorted = [...arr].sort((a, b) => a - b);\n          const mid = Math.floor(sorted.length / 2);\n          return sorted.length % 2 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;\n        };\n\n        const finalChest = getMedian(chestBuf.current);\n        const finalShoulder = getMedian(shoulderBuf.current);\n        const finalWaist = waistBuf.current.length > 0 ? getMedian(waistBuf.current) : null;\n\n        // Validate measurements are realistic\n        if (finalChest > 40 && finalChest < 150 && finalShoulder > 20 && finalShoulder < 80) {\n          setMeas({\n            chestCm: Number(finalChest.toFixed(1)),\n            shoulderCm: Number(finalShoulder.toFixed(1)),\n            waistCm: finalWaist ? Number(finalWaist.toFixed(1)) : null\n          });\n          setLocked(true);\n          setPhase(\"locked\");\n          setStatus(\"Locked ✔️\");\n          stopCamera();\n        } else {\n          setStatus(\"Invalid measurements. Please recalibrate.\");\n        }\n      } else {\n        setStatus(\"Hold still...\");\n      }\n\n      ctx.restore();\n    });\n\n    startCamera(pose);\n    poseRef.current = pose;\n\n    return () => {\n      stopCamera();\n      if (poseRef.current) {\n        poseRef.current.close();\n      }\n    };\n  }, [phase, cmPerPx, barPx]);\n\n  const setCalibration = () => {\n    if (barPx < 100) return;\n    const newCmPerPx = A4_WIDTH_CM / barPx;\n    setCmPerPx(newCmPerPx);\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n    \n    // Reset buffers\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    \n    console.log('Calibration set:', { barPx, cmPerPx: newCmPerPx });\n  };\n\n  const retake = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1–2 seconds.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n  };\n\n  const recalibrate = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n  };\n\n  const getStatusIcon = () => {\n    if (phase === \"locked\") return <span className=\"text-emerald-500 text-xl\">✅</span>;\n    if (phase === \"measure\") return <Activity className=\"w-5 h-5 text-blue-500 animate-pulse\" />;\n    return <Target className=\"w-5 h-5 text-amber-500\" />;\n  };\n\n  const getPhaseColor = () => {\n    if (phase === \"locked\") return \"from-emerald-500 to-green-500\";\n    if (phase === \"measure\") return \"from-blue-500 to-cyan-500\";\n    return \"from-amber-500 to-orange-500\";\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 relative overflow-hidden\">\n      {/* Background */}\n      <div className=\"absolute inset-0\">\n        <div className=\"absolute top-10 left-10 w-72 h-72 bg-blue-500/10 rounded-full blur-3xl animate-pulse\"></div>\n        <div className=\"absolute bottom-10 right-10 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n      </div>\n\n      <div className=\"relative z-10 flex flex-col items-center min-h-screen\">\n        {/* Header */}\n        <div className=\"w-full max-w-7xl flex items-center justify-between px-6 py-6\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg\">\n              <Sparkles className=\"w-7 h-7 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-bold text-white\">AI Fashion Fit</h1>\n              <p className=\"text-sm text-blue-200\">Body Measurement System</p>\n            </div>\n          </div>\n          \n          {/* Status Badge */}\n          <div className=\"flex items-center space-x-3\">\n            <div className={`bg-gradient-to-r ${getPhaseColor()} rounded-full px-6 py-3 shadow-lg backdrop-blur-sm border border-white/10`}>\n              <div className=\"flex items-center space-x-3 text-white\">\n                {getStatusIcon()}\n                <span className=\"font-medium text-sm\">{status}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Age Selection */}\n        <div className=\"w-full max-w-4xl px-6 py-4\">\n          <div className=\"bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/20\">\n            <div className=\"text-center text-white\">\n              <h3 className=\"font-semibold mb-3\">Select Age Group for Accurate Sizing</h3>\n              <div className=\"flex justify-center space-x-4\">\n                {[\n                  { value: 'child', label: 'Child (4-12)', color: 'from-pink-500 to-purple-500' },\n                  { value: 'teen', label: 'Teen (13-17)', color: 'from-blue-500 to-cyan-500' },\n                  { value: 'adult', label: 'Adult (18+)', color: 'from-green-500 to-emerald-500' }\n                ].map(({ value, label, color }) => (\n                  <button\n                    key={value}\n                    onClick={() => setAge(value)}\n                    className={`px-4 py-2 rounded-xl font-medium transition-all duration-300 ${\n                      age === value \n                        ? `bg-gradient-to-r ${color} text-white shadow-lg` \n                        : 'bg-white/20 text-white/80 hover:bg-white/30'\n                    }`}\n                  >\n                    {label}\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Camera Section */}\n        <div className=\"w-full max-w-6xl px-6 flex-1 flex items-center\">\n          <div className=\"relative w-full bg-black/20 backdrop-blur-lg rounded-3xl overflow-hidden shadow-2xl border border-white/10\">\n            <div className=\"relative aspect-video\">\n              <video ref={videoRef} className=\"absolute inset-0 w-full h-full object-contain bg-black rounded-3xl\" autoPlay muted playsInline />\n              <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full object-contain pointer-events-none\" />\n\n              {/* Calibration UI */}\n              {phase === \"calibrate\" && (\n                <div className=\"absolute bottom-6 left-1/2 transform -translate-x-1/2\">\n                  <div className=\"bg-white/95 backdrop-blur-md rounded-2xl px-6 py-4 shadow-2xl border border-white/20\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Target className=\"w-5 h-5 text-amber-600\" />\n                        <span className=\"text-sm font-medium text-gray-700\">A4 width calibration</span>\n                      </div>\n                      <input \n                        type=\"range\" \n                        min={100} \n                        max={800} \n                        value={barPx} \n                        onChange={(e) => setBarPx(Number(e.target.value))} \n                        className=\"w-64 accent-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-600 w-16\">{barPx}px</span>\n                      <button \n                        onClick={setCalibration} \n                        className=\"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white px-6 py-2 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg\"\n                      >\n                        Set Calibration\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Instructions */}\n        <div className=\"w-full max-w-4xl px-6 py-4\">\n          <div className=\"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20\">\n            <div className=\"text-center text-white\">\n              <div className=\"flex items-center justify-center space-x-2 mb-3\">\n                <CameraIcon className=\"w-5 h-5 text-blue-300\" />\n                <h3 className=\"font-semibold\">Instructions</h3>\n              </div>\n              <div className=\"text-sm text-white/80 space-y-2\">\n                {phase === \"calibrate\" && (\n                  <p>📄 Hold an A4 sheet at chest level and adjust the bar to match its width for accurate calibration.</p>\n                )}\n                {phase === \"measure\" && (\n                  <p>🧍 Stand straight with arms slightly away from your body. Hold still for precise measurement.</p>\n                )}\n                {phase === \"locked\" && (\n                  <p>✅ Measurements captured successfully! You can retake if needed or save your results.</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Results Display */}\n        {phase === \"locked\" && meas && (\n          <div className=\"w-full max-w-4xl px-6 py-6\">\n            <div className=\"bg-white/95 backdrop-blur-md rounded-2xl p-6 border border-gray-200 shadow-xl\">\n              <div className=\"text-center text-gray-800\">\n                <h3 className=\"text-xl font-bold mb-4\">📊 Measurement Results</h3>\n                \n                {/* Measurements Grid */}\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n                  <div className=\"bg-blue-50 rounded-xl p-4 border border-blue-200\">\n                    <div className=\"text-2xl font-bold text-blue-600\">{meas.chestCm?.toFixed(1) || 'N/A'}</div>\n                    <div className=\"text-sm text-blue-500\">Chest (cm)</div>\n                  </div>\n                  <div className=\"bg-emerald-50 rounded-xl p-4 border border-emerald-200\">\n                    <div className=\"text-2xl font-bold text-emerald-600\">{meas.shoulderCm?.toFixed(1) || 'N/A'}</div>\n                    <div className=\"text-sm text-emerald-500\">Shoulder (cm)</div>\n                  </div>\n                  <div className=\"bg-purple-50 rounded-xl p-4 border border-purple-200\">\n                    <div className=\"text-2xl font-bold text-purple-600\">{meas.waistCm?.toFixed(1) || 'N/A'}</div>\n                    <div className=\"text-sm text-purple-500\">Waist (cm)</div>\n                  </div>\n                </div>\n\n                {/* Size Recommendation */}\n                <div className=\"bg-gradient-to-r from-blue-50 to-emerald-50 rounded-xl p-4 mb-6 border border-blue-200\">\n                  <div className=\"text-lg font-semibold text-gray-700 mb-2\">Recommended Size</div>\n                  <div className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-emerald-600 bg-clip-text text-transparent\">\n                    {recommendTopSize(meas.chestCm, meas.waistCm, meas.shoulderCm, age)}\n                  </div>\n                  <div className=\"text-sm text-gray-600 mt-2\">\n                    Based on {age === 'child' ? 'Children' : age === 'teen' ? 'Teen' : 'Adult'} sizing chart\n                  </div>\n                </div>\n\n                {/* Action Buttons */}\n                <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n                  <button \n                    onClick={retake}\n                    className=\"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-gray-300\"\n                  >\n                    🔄 Retake\n                  </button>\n                  <button \n                    onClick={recalibrate}\n                    className=\"bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-blue-300\"\n                  >\n                    🎯 Recalibrate\n                  </button>\n                  <button \n                    onClick={() => {\n                      const recommendedSize = recommendTopSize(meas.chestCm, meas.waistCm, meas.shoulderCm, age);\n                      if (recommendedSize) {\n                        const measurementData = encodeURIComponent(JSON.stringify({\n                          size: recommendedSize,\n                          gender: 'Men',\n                          age: age,\n                          measurements: {\n                            chestCm: meas.chestCm,\n                            shoulderCm: meas.shoulderCm,\n                            waistCm: meas.waistCm\n                          }\n                        }));\n                        window.location.href = `/recommendations?data=${measurementData}`;\n                      }\n                    }}\n                    className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-300 shadow-lg\"\n                  >\n                    ✨ Get Recommendations\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}