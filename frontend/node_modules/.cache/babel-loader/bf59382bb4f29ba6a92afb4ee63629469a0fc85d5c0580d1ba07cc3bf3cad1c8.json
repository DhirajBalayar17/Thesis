{"ast":null,"code":"var _jsxFileName = \"/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\n\n/* ---------- Calibration ---------- */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst A4_WIDTH_CM = 21.0; // reference width\nconst CHEST_MULTIPLIER = 1.75; // shoulder flat → chest circumference (tune 1.70–1.85)\nconst UPPER_WAIST_FACTOR = 0.90; // hip width ≈ a bit wider than upper waist\n\n/* ---------- Overlay helpers ---------- */\nconst UPPER = [[0, 1], [1, 2], [2, 3], [3, 7], [0, 11], [0, 12], [11, 13], [13, 15], [12, 14], [14, 16], [11, 12], [11, 23], [12, 24]];\nconst LOWER = [[23, 25], [25, 27], [27, 31], [24, 26], [26, 28], [28, 32], [23, 24]];\nconst drawSeg = (ctx, lm, a, b, color, width, W, H) => {\n  var _A$visibility, _B$visibility;\n  const A = lm[a],\n    B = lm[b];\n  if (!A || !B) return;\n  if (((_A$visibility = A.visibility) !== null && _A$visibility !== void 0 ? _A$visibility : 0) < 0.4 || ((_B$visibility = B.visibility) !== null && _B$visibility !== void 0 ? _B$visibility : 0) < 0.4) return;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = width;\n  ctx.beginPath();\n  ctx.moveTo(A.x * W, A.y * H);\n  ctx.lineTo(B.x * W, B.y * H);\n  ctx.stroke();\n};\nconst drawBBox = (ctx, lm, W, H, color = \"rgba(0,255,0,0.9)\") => {\n  const pts = lm.filter(p => {\n    var _p$visibility;\n    return ((_p$visibility = p === null || p === void 0 ? void 0 : p.visibility) !== null && _p$visibility !== void 0 ? _p$visibility : 0) > 0.4;\n  });\n  if (!pts.length) return;\n  const xs = pts.map(p => p.x * W),\n    ys = pts.map(p => p.y * H);\n  const minX = Math.max(0, Math.min(...xs)),\n    maxX = Math.min(W, Math.max(...xs));\n  const minY = Math.max(0, Math.min(...ys)),\n    maxY = Math.min(H, Math.max(...ys));\n  const pad = 8;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = 3;\n  ctx.strokeRect(minX - pad, minY - pad, maxX - minX + pad * 2, maxY - minY + pad * 2);\n};\n\n/* ---------- Simple universal top size (kept) ---------- */\nconst recommendTopSize = chestCm => {\n  var _hit$size;\n  if (!chestCm) return null;\n  const table = [{\n    size: \"XS\",\n    min: 78,\n    max: 86\n  }, {\n    size: \"S\",\n    min: 86,\n    max: 94\n  }, {\n    size: \"M\",\n    min: 94,\n    max: 102\n  }, {\n    size: \"L\",\n    min: 102,\n    max: 110\n  }, {\n    size: \"XL\",\n    min: 110,\n    max: 118\n  }, {\n    size: \"XXL\",\n    min: 118,\n    max: 126\n  }];\n  const hit = table.find(r => chestCm >= r.min && chestCm < r.max);\n  return (_hit$size = hit === null || hit === void 0 ? void 0 : hit.size) !== null && _hit$size !== void 0 ? _hit$size : chestCm < table[0].min ? \"XS\" : \"XXL+\";\n};\n\n/* ---------- Auto outfit suggestion (brand-aware) ---------- */\n/* Sample brand chart. Replace with your real data later. */\nconst BRAND_TOPS = {\n  tshirt: [{\n    size: \"XS\",\n    chestMin: 84,\n    chestMax: 89\n  }, {\n    size: \"S\",\n    chestMin: 90,\n    chestMax: 95\n  }, {\n    size: \"M\",\n    chestMin: 96,\n    chestMax: 101\n  }, {\n    size: \"L\",\n    chestMin: 102,\n    chestMax: 107\n  }, {\n    size: \"XL\",\n    chestMin: 108,\n    chestMax: 113\n  }],\n  shirt: [{\n    size: \"36\",\n    chestMin: 88,\n    chestMax: 92,\n    yokeMin: 40,\n    yokeMax: 43\n  }, {\n    size: \"38\",\n    chestMin: 93,\n    chestMax: 97,\n    yokeMin: 42,\n    yokeMax: 45\n  }, {\n    size: \"40\",\n    chestMin: 98,\n    chestMax: 102,\n    yokeMin: 44,\n    yokeMax: 47\n  }],\n  jacket: [{\n    size: \"S\",\n    chestMin: 90,\n    chestMax: 96\n  }, {\n    size: \"M\",\n    chestMin: 97,\n    chestMax: 103\n  }, {\n    size: \"L\",\n    chestMin: 104,\n    chestMax: 110\n  }]\n};\nconst pickFit = (chest, shoulder) => {\n  const r = chest / Math.max(shoulder, 1);\n  if (r <= 3.6) return \"Relaxed\";\n  if (r >= 4.6) return \"Slim\";\n  return \"Regular\";\n};\nconst easeFor = (garment, fit) => {\n  const base = {\n    tshirt: {\n      Slim: 4,\n      Regular: 6,\n      Relaxed: 8\n    },\n    shirt: {\n      Slim: 6,\n      Regular: 8,\n      Relaxed: 10\n    },\n    jacket: {\n      Slim: 10,\n      Regular: 12,\n      Relaxed: 14\n    }\n  }[garment] || {\n    Slim: 6,\n    Regular: 8,\n    Relaxed: 10\n  };\n  return base[fit] || base.Regular;\n};\nfunction mapToBrandSize({\n  garment,\n  chestCm,\n  shoulderCm,\n  table\n}) {\n  var _match, _match2, _match3;\n  const fit = pickFit(chestCm, shoulderCm);\n  const ease = easeFor(garment, fit);\n  const targetChest = chestCm + ease;\n  let match = table.find(r => targetChest >= r.chestMin && targetChest <= r.chestMax);\n  if (!match && table.length) {\n    var _table$reduce;\n    match = (_table$reduce = table.reduce((best, r) => {\n      const mid = (r.chestMin + r.chestMax) / 2;\n      const diff = Math.abs(mid - targetChest);\n      return !best || diff < best.diff ? {\n        row: r,\n        diff\n      } : best;\n    }, null)) === null || _table$reduce === void 0 ? void 0 : _table$reduce.row;\n  }\n\n  // shoulder refine if yoke in table\n  if ((_match = match) !== null && _match !== void 0 && _match.yokeMin && (_match2 = match) !== null && _match2 !== void 0 && _match2.yokeMax && shoulderCm) {\n    const idx = table.indexOf(match);\n    if (shoulderCm > match.yokeMax && table[idx + 1]) match = table[idx + 1];\n    if (shoulderCm < match.yokeMin && table[idx - 1]) match = table[idx - 1];\n  }\n  return {\n    garment,\n    size: ((_match3 = match) === null || _match3 === void 0 ? void 0 : _match3.size) || \"—\",\n    fit,\n    targetChest: Math.round(targetChest)\n  };\n}\nfunction recommendUpperWear(chestCm, shoulderCm) {\n  return [\"tshirt\", \"shirt\", \"jacket\"].map(g => mapToBrandSize({\n    garment: g,\n    chestCm,\n    shoulderCm,\n    table: BRAND_TOPS[g] || []\n  }));\n}\n\n/* ---------- Optional style hint ---------- */\nconst styleHint = (chestCm, shoulderCm) => {\n  if (!chestCm || !shoulderCm) return \"\";\n  const ratio = chestCm / (shoulderCm || 1);\n  if (ratio < 3.6) return \"Try regular/relaxed fits.\";\n  if (ratio > 4.6) return \"Slim or tailored fits may suit better.\";\n  return \"Regular fit is likely comfortable.\";\n};\nexport default function Measure() {\n  _s();\n  var _meas$suggestions;\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n  const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [barPx, setBarPx] = useState(300);\n  const [cmPerPx, setCmPerPx] = useState(null);\n  const [locked, setLocked] = useState(false);\n  const [meas, setMeas] = useState(null); // { chestCm, shoulderCm, upperWaistCm, quality, suggestions? }\n\n  // stability settings\n  const GUIDE_MARGIN = 0.08;\n  const STABILITY_FRAMES = 12;\n  const MOVEMENT_EPS = 0.015;\n  const recentShoulderN = useRef([]);\n  const chestBuf = useRef([]);\n  const shoulderBuf = useRef([]);\n  const waistBuf = useRef([]);\n  const getDistance = useCallback((a, b) => Math.hypot(a.x - b.x, a.y - b.y), []);\n  const stopCamera = () => {\n    try {\n      var _camRef$current, _camRef$current$stop;\n      (_camRef$current = camRef.current) === null || _camRef$current === void 0 ? void 0 : (_camRef$current$stop = _camRef$current.stop) === null || _camRef$current$stop === void 0 ? void 0 : _camRef$current$stop.call(_camRef$current);\n      const v = videoRef.current;\n      (v === null || v === void 0 ? void 0 : v.srcObject) && v.srcObject.getTracks().forEach(t => t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  };\n  const startCamera = async pose => {\n    const v = videoRef.current;\n    const camera = new Camera(v, {\n      onFrame: async () => {\n        await pose.send({\n          image: v\n        });\n      },\n      width: 1280,\n      height: 720\n    });\n    camRef.current = camera;\n    camera.start();\n  };\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const pose = new Pose({\n      locateFile: file => `/mediapipe/pose/${file.replace('simd_', '')}`\n    });\n    poseRef.current = pose;\n    pose.setOptions({\n      modelComplexity: /Mobi|Android/i.test(navigator.userAgent) ? 0 : 1,\n      smoothLandmarks: true,\n      enableSegmentation: false,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5\n    });\n    pose.onResults(res => {\n      if (locked) return;\n      const W = res.image.width,\n        H = res.image.height;\n      if (canvas.width !== W) canvas.width = W;\n      if (canvas.height !== H) canvas.height = H;\n      ctx.save();\n      ctx.clearRect(0, 0, W, H);\n      ctx.drawImage(res.image, 0, 0, W, H);\n\n      // guide box\n      const gx = W * GUIDE_MARGIN,\n        gy = H * GUIDE_MARGIN;\n      const gW = W * (1 - GUIDE_MARGIN * 2),\n        gH = H * (1 - GUIDE_MARGIN * 2);\n      ctx.strokeStyle = \"rgba(125,255,160,0.85)\";\n      ctx.lineWidth = 3;\n      ctx.strokeRect(gx, gy, gW, gH);\n\n      // calibration bar\n      if (phase === \"calibrate\") {\n        const barH = 14;\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillRect((W - barPx) / 2, H * 0.1, barPx, barH);\n        ctx.font = \"14px system-ui, sans-serif\";\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillText(\"Match this bar to A4 width (21 cm) at chest depth.\", Math.max(12, (W - 360) / 2), H * 0.1 - 8);\n      }\n      const lm = res.poseLandmarks;\n      if (!lm) {\n        setStatus(\"Detecting body…\");\n        ctx.restore();\n        return;\n      }\n\n      // overlay\n      drawBBox(ctx, lm, W, H);\n      UPPER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#2aa4ff\", 3, W, H));\n      LOWER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#ff9933\", 3, W, H));\n      const vis = i => {\n        var _lm$i$visibility, _lm$i;\n        return ((_lm$i$visibility = (_lm$i = lm[i]) === null || _lm$i === void 0 ? void 0 : _lm$i.visibility) !== null && _lm$i$visibility !== void 0 ? _lm$i$visibility : 0) > 0.45;\n      };\n      const shouldersOK = vis(11) && vis(12);\n      const hipsOK = vis(23) || vis(24);\n      if (!(shouldersOK && hipsOK)) {\n        setStatus(\"Show shoulders & upper torso.\");\n        ctx.restore();\n        return;\n      }\n      const Lsh = lm[11],\n        Rsh = lm[12];\n      const Lhip = lm[23],\n        Rhip = lm[24];\n      const hip = vis(23) ? Lhip : Rhip;\n\n      // key dots\n      const shMid = {\n        x: (Lsh.x + Rsh.x) / 2,\n        y: (Lsh.y + Rsh.y) / 2\n      };\n      ctx.fillStyle = \"rgba(0,200,255,1)\";\n      [Lsh, Rsh, shMid, hip].forEach(p => {\n        ctx.beginPath();\n        ctx.arc(p.x * W, p.y * H, 6, 0, Math.PI * 2);\n        ctx.fill();\n      });\n\n      // must be inside guide\n      const inside = [Lsh, Rsh, hip].every(p => p.x * W >= gx && p.x * W <= gx + gW && p.y * H >= gy && p.y * H <= gy + gH);\n      if (!inside) {\n        setStatus(\"Step back/center inside the frame.\");\n        ctx.restore();\n        return;\n      }\n      if (phase === \"calibrate\") {\n        setStatus(\"Adjust bar → Set calibration.\");\n        ctx.restore();\n        return;\n      }\n      if (!cmPerPx) {\n        setStatus(\"Click Set calibration first.\");\n        ctx.restore();\n        return;\n      }\n\n      // normalized stability\n      const shoulderWidthN = getDistance(Lsh, Rsh);\n      const torsoHeightN = getDistance(shMid, hip);\n      if (torsoHeightN <= 0) {\n        setStatus(\"Hold still…\");\n        ctx.restore();\n        return;\n      }\n      const bufN = recentShoulderN.current;\n      bufN.push(shoulderWidthN);\n      if (bufN.length > STABILITY_FRAMES) bufN.shift();\n      const avg = bufN.reduce((a, b) => a + b, 0) / bufN.length;\n      const maxDev = Math.max(...bufN.map(v => Math.abs(v - avg)));\n\n      // ----- measurements in cm -----\n      const shoulderPx = Math.abs((Lsh.x - Rsh.x) * W);\n      const shoulderCm = shoulderPx * cmPerPx;\n      const chestCmInstant = shoulderCm * CHEST_MULTIPLIER;\n      let upperWaistCmInstant = null;\n      if (vis(23) && vis(24)) {\n        const hipFlatCm = Math.abs((Lhip.x - Rhip.x) * W) * cmPerPx;\n        upperWaistCmInstant = hipFlatCm * UPPER_WAIST_FACTOR;\n      }\n\n      // median smoothing\n      const pushMed = (ref, val, n = 15) => {\n        if (val == null) return null;\n        ref.current.push(val);\n        if (ref.current.length > n) ref.current.shift();\n        const s = [...ref.current].sort((a, b) => a - b);\n        const m = Math.floor(s.length / 2);\n        return s.length % 2 ? s[m] : (s[m - 1] + s[m]) / 2;\n      };\n      const chestMed = pushMed(chestBuf, chestCmInstant);\n      const shoulderMed = pushMed(shoulderBuf, shoulderCm);\n      const waistMed = pushMed(waistBuf, upperWaistCmInstant);\n\n      // stability: normalized shoulders + cm spread\n      const spread = chestBuf.current.length >= 8 ? Math.max(...chestBuf.current) - Math.min(...chestBuf.current) : 999;\n      const stable = bufN.length >= STABILITY_FRAMES && maxDev < MOVEMENT_EPS && spread < 1.8;\n      if (stable && chestMed && shoulderMed) {\n        const out = {\n          chestCm: Number(chestMed.toFixed(1)),\n          shoulderCm: Number(shoulderMed.toFixed(1)),\n          upperWaistCm: waistMed ? Number(waistMed.toFixed(1)) : undefined,\n          quality: {\n            frames: chestBuf.current.length,\n            spreadCm: Number(spread.toFixed(2))\n          }\n        };\n\n        // 🔥 Auto-build clothing suggestions (brand-aware)\n        out.suggestions = recommendUpperWear(out.chestCm, out.shoulderCm);\n        setMeas(out);\n        setLocked(true);\n        setPhase(\"locked\");\n        setStatus(\"Locked ✔️\");\n        stopCamera();\n      } else {\n        setStatus(\"Hold still…\");\n      }\n      ctx.restore();\n    });\n    startCamera(pose);\n    return () => {\n      stopCamera();\n    };\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n  const setCalibration = () => {\n    if (barPx < 40) return;\n    setCmPerPx(A4_WIDTH_CM / barPx);\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n  };\n  const retake = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1–2 seconds.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n  const recalibrate = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full min-h-screen bg-gradient-to-b from-[#0b0f14] to-[#111827] flex flex-col items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-6xl flex items-center justify-between px-4 pt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-white font-semibold text-lg\",\n        children: \"AI Fashion Fit \\u2014 Upper Body (Measurements)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/90 rounded-full px-3 py-1 text-sm shadow\",\n        children: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full max-w-6xl aspect-video mt-4 rounded-2xl overflow-hidden shadow-2xl ring-1 ring-white/10\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"absolute inset-0 w-full h-full object-contain bg-black\",\n        autoPlay: true,\n        muted: true,\n        playsInline: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"absolute inset-0 w-full h-full object-contain pointer-events-none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this), phase === \"calibrate\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-4 left-1/2 -translate-x-1/2 bg-white/95 backdrop-blur rounded-2xl px-4 py-3 flex items-center gap-4 shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm font-medium\",\n          children: \"A4 width match\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: 120,\n          max: 900,\n          value: barPx,\n          onChange: e => setBarPx(Number(e.target.value)),\n          className: \"w-72 accent-purple-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: setCalibration,\n          className: \"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700 text-sm shadow\",\n          children: \"Set calibration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 11\n      }, this), phase === \"locked\" && meas && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 bg-black/60 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white max-w-md w-full rounded-2xl p-6 shadow-2xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xl font-bold mb-3\",\n            children: \"Upper\\u2011Body Measurements\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-y-1 text-[15px]\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Chest (circ.)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold\",\n              children: [meas.chestCm, \" cm\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Shoulder width\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold\",\n              children: [meas.shoulderCm, \" cm\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 42\n            }, this), meas.upperWaistCm !== undefined && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"Upper\\u2011waist (flat)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-semibold\",\n                children: [meas.upperWaistCm, \" cm\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 50\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 p-3 rounded-xl bg-purple-50 border border-purple-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-purple-900\",\n              children: \"Suggested top size\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg font-semibold text-purple-900\",\n              children: recommendTopSize(meas.chestCm)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-purple-700 mt-1\",\n              children: [styleHint(meas.chestCm, meas.shoulderCm), \" Based on chest circumference; refine per brand later.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 p-3 rounded-xl bg-indigo-50 border border-indigo-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-indigo-900 mb-2\",\n              children: \"Brand suggestions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"space-y-2\",\n              children: (_meas$suggestions = meas.suggestions) === null || _meas$suggestions === void 0 ? void 0 : _meas$suggestions.map((s, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"bg-white border border-indigo-100 rounded-lg p-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold capitalize\",\n                    children: s.garment\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 401,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm\",\n                    children: [s.size, \" \\xB7 \", s.fit]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 402,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-indigo-800\",\n                  children: [\"Target chest: \", s.targetChest, \" cm\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 23\n                }, this)]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-[11px] text-indigo-700 mt-2\",\n              children: \"Uses sample brand chart. Replace with your brand tables for exact matches.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 text-xs text-gray-600\",\n            children: [\"Quality \\u2014 frames: \", meas.quality.frames, \", spread: \", meas.quality.spreadCm, \" cm\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-5 flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: retake,\n              className: \"px-4 py-2 rounded-xl bg-black text-white hover:opacity-90\",\n              children: \"Retake\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: recalibrate,\n              className: \"px-4 py-2 rounded-xl bg-gray-200 hover:bg-gray-300\",\n              children: \"Re\\u2011calibrate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => window.print(),\n              className: \"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700\",\n              children: \"Save / Print\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-3 text-white/60 text-sm text-center px-4\",\n      children: \"Tip: keep the A4 sheet flat at chest depth during calibration. Stand square to the camera. Hold still for 1\\u20132 seconds.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 345,\n    columnNumber: 5\n  }, this);\n}\n_s(Measure, \"vfDiX3M2kd+Wt+O4kRhlVrYCCig=\");\n_c = Measure;\nvar _c;\n$RefreshReg$(_c, \"Measure\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","Pose","Camera","jsxDEV","_jsxDEV","Fragment","_Fragment","A4_WIDTH_CM","CHEST_MULTIPLIER","UPPER_WAIST_FACTOR","UPPER","LOWER","drawSeg","ctx","lm","a","b","color","width","W","H","_A$visibility","_B$visibility","A","B","visibility","strokeStyle","lineWidth","beginPath","moveTo","x","y","lineTo","stroke","drawBBox","pts","filter","p","_p$visibility","length","xs","map","ys","minX","Math","max","min","maxX","minY","maxY","pad","strokeRect","recommendTopSize","chestCm","_hit$size","table","size","hit","find","r","BRAND_TOPS","tshirt","chestMin","chestMax","shirt","yokeMin","yokeMax","jacket","pickFit","chest","shoulder","easeFor","garment","fit","base","Slim","Regular","Relaxed","mapToBrandSize","shoulderCm","_match","_match2","_match3","ease","targetChest","match","_table$reduce","reduce","best","mid","diff","abs","row","idx","indexOf","round","recommendUpperWear","g","styleHint","ratio","Measure","_s","_meas$suggestions","videoRef","canvasRef","poseRef","camRef","phase","setPhase","status","setStatus","barPx","setBarPx","cmPerPx","setCmPerPx","locked","setLocked","meas","setMeas","GUIDE_MARGIN","STABILITY_FRAMES","MOVEMENT_EPS","recentShoulderN","chestBuf","shoulderBuf","waistBuf","getDistance","hypot","stopCamera","_camRef$current","_camRef$current$stop","current","stop","call","v","srcObject","getTracks","forEach","t","startCamera","pose","camera","onFrame","send","image","height","start","canvas","getContext","locateFile","file","replace","setOptions","modelComplexity","test","navigator","userAgent","smoothLandmarks","enableSegmentation","minDetectionConfidence","minTrackingConfidence","onResults","res","save","clearRect","drawImage","gx","gy","gW","gH","barH","fillStyle","fillRect","font","fillText","poseLandmarks","restore","vis","i","_lm$i$visibility","_lm$i","shouldersOK","hipsOK","Lsh","Rsh","Lhip","Rhip","hip","shMid","arc","PI","fill","inside","every","shoulderWidthN","torsoHeightN","bufN","push","shift","avg","maxDev","shoulderPx","chestCmInstant","upperWaistCmInstant","hipFlatCm","pushMed","ref","val","n","s","sort","m","floor","chestMed","shoulderMed","waistMed","spread","stable","out","Number","toFixed","upperWaistCm","undefined","quality","frames","spreadCm","suggestions","setCalibration","retake","recalibrate","className","children","fileName","_jsxFileName","lineNumber","columnNumber","autoPlay","muted","playsInline","type","value","onChange","e","target","onClick","window","print","_c","$RefreshReg$"],"sources":["/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx"],"sourcesContent":["// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\n\n/* ---------- Calibration ---------- */\nconst A4_WIDTH_CM = 21.0; // reference width\nconst CHEST_MULTIPLIER = 1.75; // shoulder flat → chest circumference (tune 1.70–1.85)\nconst UPPER_WAIST_FACTOR = 0.90; // hip width ≈ a bit wider than upper waist\n\n/* ---------- Overlay helpers ---------- */\nconst UPPER = [\n  [0,1],[1,2],[2,3],[3,7],\n  [0,11],[0,12],\n  [11,13],[13,15],\n  [12,14],[14,16],\n  [11,12],\n  [11,23],[12,24],\n];\nconst LOWER = [\n  [23,25],[25,27],[27,31],\n  [24,26],[26,28],[28,32],\n  [23,24],\n];\nconst drawSeg = (ctx, lm, a, b, color, width, W, H) => {\n  const A = lm[a], B = lm[b];\n  if (!A || !B) return;\n  if ((A.visibility ?? 0) < 0.4 || (B.visibility ?? 0) < 0.4) return;\n  ctx.strokeStyle = color; ctx.lineWidth = width;\n  ctx.beginPath(); ctx.moveTo(A.x*W, A.y*H); ctx.lineTo(B.x*W, B.y*H); ctx.stroke();\n};\nconst drawBBox = (ctx, lm, W, H, color=\"rgba(0,255,0,0.9)\") => {\n  const pts = lm.filter(p => (p?.visibility ?? 0) > 0.4);\n  if (!pts.length) return;\n  const xs = pts.map(p=>p.x*W), ys = pts.map(p=>p.y*H);\n  const minX = Math.max(0, Math.min(...xs)), maxX = Math.min(W, Math.max(...xs));\n  const minY = Math.max(0, Math.min(...ys)), maxY = Math.min(H, Math.max(...ys));\n  const pad = 8; ctx.strokeStyle = color; ctx.lineWidth = 3;\n  ctx.strokeRect(minX-pad, minY-pad, (maxX-minX)+pad*2, (maxY-minY)+pad*2);\n};\n\n/* ---------- Simple universal top size (kept) ---------- */\nconst recommendTopSize = (chestCm) => {\n  if (!chestCm) return null;\n  const table = [\n    { size: \"XS\", min: 78, max: 86 },\n    { size: \"S\",  min: 86, max: 94 },\n    { size: \"M\",  min: 94, max: 102 },\n    { size: \"L\",  min: 102, max: 110 },\n    { size: \"XL\", min: 110, max: 118 },\n    { size: \"XXL\",min: 118, max: 126 },\n  ];\n  const hit = table.find(r => chestCm >= r.min && chestCm < r.max);\n  return hit?.size ?? (chestCm < table[0].min ? \"XS\" : \"XXL+\");\n};\n\n/* ---------- Auto outfit suggestion (brand-aware) ---------- */\n/* Sample brand chart. Replace with your real data later. */\nconst BRAND_TOPS = {\n  tshirt: [\n    { size: \"XS\", chestMin: 84, chestMax: 89 },\n    { size: \"S\",  chestMin: 90, chestMax: 95 },\n    { size: \"M\",  chestMin: 96, chestMax: 101 },\n    { size: \"L\",  chestMin: 102, chestMax: 107 },\n    { size: \"XL\", chestMin: 108, chestMax: 113 },\n  ],\n  shirt: [\n    { size: \"36\", chestMin: 88, chestMax: 92, yokeMin: 40, yokeMax: 43 },\n    { size: \"38\", chestMin: 93, chestMax: 97, yokeMin: 42, yokeMax: 45 },\n    { size: \"40\", chestMin: 98, chestMax: 102, yokeMin: 44, yokeMax: 47 },\n  ],\n  jacket: [\n    { size: \"S\", chestMin: 90, chestMax: 96 },\n    { size: \"M\", chestMin: 97, chestMax: 103 },\n    { size: \"L\", chestMin: 104, chestMax: 110 },\n  ]\n};\n\nconst pickFit = (chest, shoulder) => {\n  const r = chest / Math.max(shoulder, 1);\n  if (r <= 3.6) return \"Relaxed\";\n  if (r >= 4.6) return \"Slim\";\n  return \"Regular\";\n};\nconst easeFor = (garment, fit) => {\n  const base = {\n    tshirt:  { Slim: 4, Regular: 6, Relaxed: 8 },\n    shirt:   { Slim: 6, Regular: 8, Relaxed: 10 },\n    jacket:  { Slim:10, Regular:12, Relaxed: 14 },\n  }[garment] || { Slim: 6, Regular: 8, Relaxed: 10 };\n  return base[fit] || base.Regular;\n};\nfunction mapToBrandSize({ garment, chestCm, shoulderCm, table }) {\n  const fit = pickFit(chestCm, shoulderCm);\n  const ease = easeFor(garment, fit);\n  const targetChest = chestCm + ease;\n\n  let match = table.find(r => targetChest >= r.chestMin && targetChest <= r.chestMax);\n  if (!match && table.length) {\n    match = table.reduce((best, r) => {\n      const mid = (r.chestMin + r.chestMax) / 2;\n      const diff = Math.abs(mid - targetChest);\n      return !best || diff < best.diff ? { row: r, diff } : best;\n    }, null)?.row;\n  }\n\n  // shoulder refine if yoke in table\n  if (match?.yokeMin && match?.yokeMax && shoulderCm) {\n    const idx = table.indexOf(match);\n    if (shoulderCm > match.yokeMax && table[idx+1]) match = table[idx+1];\n    if (shoulderCm < match.yokeMin && table[idx-1]) match = table[idx-1];\n  }\n\n  return {\n    garment,\n    size: match?.size || \"—\",\n    fit,\n    targetChest: Math.round(targetChest)\n  };\n}\nfunction recommendUpperWear(chestCm, shoulderCm) {\n  return [\"tshirt\",\"shirt\",\"jacket\"].map(g =>\n    mapToBrandSize({ garment: g, chestCm, shoulderCm, table: BRAND_TOPS[g] || [] })\n  );\n}\n\n/* ---------- Optional style hint ---------- */\nconst styleHint = (chestCm, shoulderCm) => {\n  if (!chestCm || !shoulderCm) return \"\";\n  const ratio = chestCm / (shoulderCm || 1);\n  if (ratio < 3.6) return \"Try regular/relaxed fits.\";\n  if (ratio > 4.6) return \"Slim or tailored fits may suit better.\";\n  return \"Regular fit is likely comfortable.\";\n};\n\nexport default function Measure() {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n\n  const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [barPx, setBarPx] = useState(300);\n  const [cmPerPx, setCmPerPx] = useState(null);\n\n  const [locked, setLocked] = useState(false);\n  const [meas, setMeas] = useState(null); // { chestCm, shoulderCm, upperWaistCm, quality, suggestions? }\n\n  // stability settings\n  const GUIDE_MARGIN = 0.08;\n  const STABILITY_FRAMES = 12;\n  const MOVEMENT_EPS = 0.015;\n  const recentShoulderN = useRef([]);\n  const chestBuf = useRef([]);\n  const shoulderBuf = useRef([]);\n  const waistBuf = useRef([]);\n\n  const getDistance = useCallback((a,b)=>Math.hypot(a.x-b.x,a.y-b.y),[]);\n\n  const stopCamera = () => {\n    try {\n      camRef.current?.stop?.();\n      const v = videoRef.current;\n      v?.srcObject && v.srcObject.getTracks().forEach(t=>t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  };\n\n  const startCamera = async (pose) => {\n    const v = videoRef.current;\n    const camera = new Camera(v, {\n      onFrame: async () => { await pose.send({ image: v }); },\n      width: 1280, height: 720,\n    });\n    camRef.current = camera;\n    camera.start();\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    const pose = new Pose({\n      locateFile: (file) => `/mediapipe/pose/${file.replace('simd_', '')}`,\n    });\n    poseRef.current = pose;\n\n    pose.setOptions({\n      modelComplexity: /Mobi|Android/i.test(navigator.userAgent) ? 0 : 1,\n      smoothLandmarks: true,\n      enableSegmentation: false,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5,\n    });\n\n    pose.onResults((res) => {\n      if (locked) return;\n\n      const W = res.image.width, H = res.image.height;\n      if (canvas.width !== W) canvas.width = W;\n      if (canvas.height !== H) canvas.height = H;\n\n      ctx.save();\n      ctx.clearRect(0,0,W,H);\n      ctx.drawImage(res.image,0,0,W,H);\n\n      // guide box\n      const gx = W*GUIDE_MARGIN, gy = H*GUIDE_MARGIN;\n      const gW = W*(1-GUIDE_MARGIN*2), gH = H*(1-GUIDE_MARGIN*2);\n      ctx.strokeStyle = \"rgba(125,255,160,0.85)\";\n      ctx.lineWidth = 3; ctx.strokeRect(gx, gy, gW, gH);\n\n      // calibration bar\n      if (phase === \"calibrate\") {\n        const barH = 14;\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillRect((W-barPx)/2, H*0.1, barPx, barH);\n        ctx.font = \"14px system-ui, sans-serif\";\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillText(\n          \"Match this bar to A4 width (21 cm) at chest depth.\",\n          Math.max(12,(W-360)/2), H*0.1-8\n        );\n      }\n\n      const lm = res.poseLandmarks;\n      if (!lm) { setStatus(\"Detecting body…\"); ctx.restore(); return; }\n\n      // overlay\n      drawBBox(ctx, lm, W, H);\n      UPPER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#2aa4ff\",3,W,H));\n      LOWER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#ff9933\",3,W,H));\n\n      const vis = (i) => (lm[i]?.visibility ?? 0) > 0.45;\n      const shouldersOK = vis(11) && vis(12);\n      const hipsOK = vis(23) || vis(24);\n      if (!(shouldersOK && hipsOK)) { setStatus(\"Show shoulders & upper torso.\"); ctx.restore(); return; }\n\n      const Lsh = lm[11], Rsh = lm[12];\n      const Lhip = lm[23], Rhip = lm[24];\n      const hip = vis(23) ? Lhip : Rhip;\n\n      // key dots\n      const shMid = { x:(Lsh.x+Rsh.x)/2, y:(Lsh.y+Rsh.y)/2 };\n      ctx.fillStyle = \"rgba(0,200,255,1)\";\n      [Lsh, Rsh, shMid, hip].forEach(p => { ctx.beginPath(); ctx.arc(p.x*W, p.y*H, 6, 0, Math.PI*2); ctx.fill(); });\n\n      // must be inside guide\n      const inside = [Lsh,Rsh,hip].every(p => p.x*W>=gx && p.x*W<=gx+gW && p.y*H>=gy && p.y*H<=gy+gH);\n      if (!inside) { setStatus(\"Step back/center inside the frame.\"); ctx.restore(); return; }\n\n      if (phase === \"calibrate\") { setStatus(\"Adjust bar → Set calibration.\"); ctx.restore(); return; }\n      if (!cmPerPx) { setStatus(\"Click Set calibration first.\"); ctx.restore(); return; }\n\n      // normalized stability\n      const shoulderWidthN = getDistance(Lsh,Rsh);\n      const torsoHeightN = getDistance(shMid, hip);\n      if (torsoHeightN <= 0) { setStatus(\"Hold still…\"); ctx.restore(); return; }\n\n      const bufN = recentShoulderN.current;\n      bufN.push(shoulderWidthN); if (bufN.length > STABILITY_FRAMES) bufN.shift();\n      const avg = bufN.reduce((a,b)=>a+b,0)/bufN.length;\n      const maxDev = Math.max(...bufN.map(v=>Math.abs(v-avg)));\n\n      // ----- measurements in cm -----\n      const shoulderPx = Math.abs((Lsh.x - Rsh.x) * W);\n      const shoulderCm = shoulderPx * cmPerPx;\n\n      const chestCmInstant = shoulderCm * CHEST_MULTIPLIER;\n\n      let upperWaistCmInstant = null;\n      if (vis(23) && vis(24)) {\n        const hipFlatCm = Math.abs((Lhip.x - Rhip.x) * W) * cmPerPx;\n        upperWaistCmInstant = hipFlatCm * UPPER_WAIST_FACTOR;\n      }\n\n      // median smoothing\n      const pushMed = (ref, val, n=15) => {\n        if (val==null) return null;\n        ref.current.push(val);\n        if (ref.current.length>n) ref.current.shift();\n        const s=[...ref.current].sort((a,b)=>a-b);\n        const m=Math.floor(s.length/2);\n        return s.length%2 ? s[m] : (s[m-1]+s[m])/2;\n      };\n      const chestMed = pushMed(chestBuf, chestCmInstant);\n      const shoulderMed = pushMed(shoulderBuf, shoulderCm);\n      const waistMed = pushMed(waistBuf, upperWaistCmInstant);\n\n      // stability: normalized shoulders + cm spread\n      const spread = chestBuf.current.length>=8 ? Math.max(...chestBuf.current)-Math.min(...chestBuf.current) : 999;\n      const stable = bufN.length>=STABILITY_FRAMES && maxDev < MOVEMENT_EPS && spread < 1.8;\n\n      if (stable && chestMed && shoulderMed) {\n        const out = {\n          chestCm: Number(chestMed.toFixed(1)),\n          shoulderCm: Number(shoulderMed.toFixed(1)),\n          upperWaistCm: waistMed ? Number(waistMed.toFixed(1)) : undefined,\n          quality: { frames: chestBuf.current.length, spreadCm: Number(spread.toFixed(2)) }\n        };\n\n        // 🔥 Auto-build clothing suggestions (brand-aware)\n        out.suggestions = recommendUpperWear(out.chestCm, out.shoulderCm);\n\n        setMeas(out);\n        setLocked(true);\n        setPhase(\"locked\");\n        setStatus(\"Locked ✔️\");\n        stopCamera();\n      } else {\n        setStatus(\"Hold still…\");\n      }\n\n      ctx.restore();\n    });\n\n    startCamera(pose);\n    return () => { stopCamera(); };\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n\n  const setCalibration = () => {\n    if (barPx < 40) return;\n    setCmPerPx(A4_WIDTH_CM / barPx);\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n    chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n  };\n\n  const retake = () => {\n    setLocked(false); setMeas(null); setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1–2 seconds.\");\n    chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  const recalibrate = () => {\n    setLocked(false); setMeas(null); setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  return (\n    <div className=\"relative w-full min-h-screen bg-gradient-to-b from-[#0b0f14] to-[#111827] flex flex-col items-center\">\n      {/* Header */}\n      <div className=\"w-full max-w-6xl flex items-center justify-between px-4 pt-4\">\n        <div className=\"text-white font-semibold text-lg\">AI Fashion Fit — Upper Body (Measurements)</div>\n        <div className=\"bg-white/90 rounded-full px-3 py-1 text-sm shadow\">{status}</div>\n      </div>\n\n      {/* Camera */}\n      <div className=\"relative w-full max-w-6xl aspect-video mt-4 rounded-2xl overflow-hidden shadow-2xl ring-1 ring-white/10\">\n        <video ref={videoRef} className=\"absolute inset-0 w-full h-full object-contain bg-black\" autoPlay muted playsInline />\n        <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full object-contain pointer-events-none\" />\n\n        {/* Calibration UI */}\n        {phase === \"calibrate\" && (\n          <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 bg-white/95 backdrop-blur rounded-2xl px-4 py-3 flex items-center gap-4 shadow-lg\">\n            <div className=\"text-sm font-medium\">A4 width match</div>\n            <input type=\"range\" min={120} max={900} value={barPx} onChange={(e)=>setBarPx(Number(e.target.value))} className=\"w-72 accent-purple-600\" />\n            <button onClick={setCalibration} className=\"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700 text-sm shadow\">\n              Set calibration\n            </button>\n          </div>\n        )}\n\n        {/* Results */}\n        {phase === \"locked\" && meas && (\n          <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center p-4\">\n            <div className=\"bg-white max-w-md w-full rounded-2xl p-6 shadow-2xl\">\n              <div className=\"text-xl font-bold mb-3\">Upper‑Body Measurements</div>\n              <div className=\"grid grid-cols-2 gap-y-1 text-[15px]\">\n                <div>Chest (circ.)</div><div className=\"font-semibold\">{meas.chestCm} cm</div>\n                <div>Shoulder width</div><div className=\"font-semibold\">{meas.shoulderCm} cm</div>\n                {meas.upperWaistCm !== undefined && (\n                  <>\n                    <div>Upper‑waist (flat)</div><div className=\"font-semibold\">{meas.upperWaistCm} cm</div>\n                  </>\n                )}\n              </div>\n\n              {/* Universal size + style (kept) */}\n              <div className=\"mt-4 p-3 rounded-xl bg-purple-50 border border-purple-200\">\n                <div className=\"text-sm text-purple-900\">Suggested top size</div>\n                <div className=\"text-lg font-semibold text-purple-900\">\n                  {recommendTopSize(meas.chestCm)}\n                </div>\n                <div className=\"text-xs text-purple-700 mt-1\">\n                  {styleHint(meas.chestCm, meas.shoulderCm)} Based on chest circumference; refine per brand later.\n                </div>\n              </div>\n\n              {/* ✅ Brand-aware suggestions (auto) */}\n              <div className=\"mt-4 p-3 rounded-xl bg-indigo-50 border border-indigo-200\">\n                <div className=\"text-sm text-indigo-900 mb-2\">Brand suggestions</div>\n                <ul className=\"space-y-2\">\n                  {meas.suggestions?.map((s, i) => (\n                    <li key={i} className=\"bg-white border border-indigo-100 rounded-lg p-3\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-semibold capitalize\">{s.garment}</span>\n                        <span className=\"text-sm\">{s.size} · {s.fit}</span>\n                      </div>\n                      <div className=\"text-xs text-indigo-800\">Target chest: {s.targetChest} cm</div>\n                    </li>\n                  ))}\n                </ul>\n                <div className=\"text-[11px] text-indigo-700 mt-2\">\n                  Uses sample brand chart. Replace with your brand tables for exact matches.\n                </div>\n              </div>\n\n              <div className=\"mt-3 text-xs text-gray-600\">\n                Quality — frames: {meas.quality.frames}, spread: {meas.quality.spreadCm} cm\n              </div>\n              <div className=\"mt-5 flex gap-2\">\n                <button onClick={retake} className=\"px-4 py-2 rounded-xl bg-black text-white hover:opacity-90\">Retake</button>\n                <button onClick={recalibrate} className=\"px-4 py-2 rounded-xl bg-gray-200 hover:bg-gray-300\">Re‑calibrate</button>\n                <button onClick={()=>window.print()} className=\"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700\">Save / Print</button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <p className=\"mt-3 text-white/60 text-sm text-center px-4\">\n        Tip: keep the A4 sheet flat at chest depth during calibration. Stand square to the camera. Hold still for 1–2 seconds.\n      </p>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}