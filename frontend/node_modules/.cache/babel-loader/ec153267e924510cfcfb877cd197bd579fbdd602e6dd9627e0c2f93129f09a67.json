{"ast":null,"code":"var _jsxFileName = \"/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\n\n/* ---------- Sizing config ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst A4_WIDTH_CM = 21.0; // calibration reference\nconst MULTIPLIER_CHEST = 1.75; // shoulder flat → chest circumference (tune 1.6–1.9)\n\nconst MEN_SIZE_CHART = [{\n  size: \"S\",\n  min: 88,\n  max: 94\n}, {\n  size: \"M\",\n  min: 95,\n  max: 102\n}, {\n  size: \"L\",\n  min: 103,\n  max: 110\n}, {\n  size: \"XL\",\n  min: 111,\n  max: 118\n}, {\n  size: \"2XL\",\n  min: 119,\n  max: 126\n}, {\n  size: \"3XL\",\n  min: 127,\n  max: 134\n}, {\n  size: \"4XL\",\n  min: 135,\n  max: 145\n}];\nconst menSizeFromChest = cm => {\n  for (const r of MEN_SIZE_CHART) if (cm >= r.min && cm <= r.max) return r.size;\n  return cm < MEN_SIZE_CHART[0].min ? \"XS/S\" : \"4XL+\";\n};\n\n/* ---------- Overlay (screenshot style) ---------- */\nconst UPPER = [[0, 1], [1, 2], [2, 3], [3, 7], [0, 11], [0, 12], [11, 13], [13, 15], [12, 14], [14, 16], [11, 12], [11, 23], [12, 24]];\nconst LOWER = [[23, 25], [25, 27], [27, 31], [24, 26], [26, 28], [28, 32], [23, 24]];\nconst drawSeg = (ctx, lm, a, b, color, width, W, H) => {\n  var _A$visibility, _B$visibility;\n  const A = lm[a],\n    B = lm[b];\n  if (!A || !B) return;\n  if (((_A$visibility = A.visibility) !== null && _A$visibility !== void 0 ? _A$visibility : 0) < 0.4 || ((_B$visibility = B.visibility) !== null && _B$visibility !== void 0 ? _B$visibility : 0) < 0.4) return;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = width;\n  ctx.beginPath();\n  ctx.moveTo(A.x * W, A.y * H);\n  ctx.lineTo(B.x * W, B.y * H);\n  ctx.stroke();\n};\nconst drawBBox = (ctx, lm, W, H, color = \"rgba(0,255,0,0.9)\") => {\n  const pts = lm.filter(p => {\n    var _p$visibility;\n    return ((_p$visibility = p === null || p === void 0 ? void 0 : p.visibility) !== null && _p$visibility !== void 0 ? _p$visibility : 0) > 0.4;\n  });\n  if (!pts.length) return;\n  const xs = pts.map(p => p.x * W),\n    ys = pts.map(p => p.y * H);\n  const minX = Math.max(0, Math.min(...xs)),\n    maxX = Math.min(W, Math.max(...xs));\n  const minY = Math.max(0, Math.min(...ys)),\n    maxY = Math.min(H, Math.max(...ys));\n  const pad = 8;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = 3;\n  ctx.strokeRect(minX - pad, minY - pad, maxX - minX + pad * 2, maxY - minY + pad * 2);\n};\n\n/* ---------- Component ---------- */\nconst Measure = () => {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n  const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [cmPerPx, setCmPerPx] = useState(null);\n  const [barPx, setBarPx] = useState(300);\n  const [locked, setLocked] = useState(false);\n  const [result, setResult] = useState(null);\n\n  // stability & UI\n  const STABILITY_FRAMES = 12;\n  const MOVEMENT_EPS = 0.015;\n  const GUIDE_MARGIN = 0.08;\n  const recentShoulderN = useRef([]);\n  const chestBufRef = useRef([]);\n  const getDistance = useCallback((a, b) => Math.hypot(a.x - b.x, a.y - b.y), []);\n  const stopCamera = () => {\n    try {\n      var _camRef$current, _camRef$current$stop;\n      (_camRef$current = camRef.current) === null || _camRef$current === void 0 ? void 0 : (_camRef$current$stop = _camRef$current.stop) === null || _camRef$current$stop === void 0 ? void 0 : _camRef$current$stop.call(_camRef$current);\n      const v = videoRef.current;\n      (v === null || v === void 0 ? void 0 : v.srcObject) && v.srcObject.getTracks().forEach(t => t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  };\n  const startCamera = async pose => {\n    const v = videoRef.current;\n    const camera = new Camera(v, {\n      onFrame: async () => {\n        await pose.send({\n          image: v\n        });\n      },\n      width: 1280,\n      height: 720\n    });\n    camRef.current = camera;\n    camera.start();\n  };\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const pose = new Pose({\n      // ⭐ Serve local files + force non‑SIMD to avoid CDN WASM crash\n      locateFile: file => `/mediapipe/pose/${file.replace('simd_', '')}`\n    });\n    poseRef.current = pose;\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true,\n      enableSegmentation: false,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5\n    });\n    pose.onResults(res => {\n      if (locked) return;\n      const W = res.image.width,\n        H = res.image.height;\n      if (canvas.width !== W) canvas.width = W;\n      if (canvas.height !== H) canvas.height = H;\n      ctx.save();\n      ctx.clearRect(0, 0, W, H);\n      ctx.drawImage(res.image, 0, 0, W, H);\n\n      // soft vignette for nicer look\n      const grd = ctx.createLinearGradient(0, 0, 0, H);\n      grd.addColorStop(0, \"rgba(0,0,0,0.10)\");\n      grd.addColorStop(1, \"rgba(0,0,0,0.15)\");\n      ctx.fillStyle = grd;\n      ctx.fillRect(0, 0, W, H);\n\n      // guide box\n      const gx = W * GUIDE_MARGIN,\n        gy = H * GUIDE_MARGIN;\n      const gW = W * (1 - GUIDE_MARGIN * 2),\n        gH = H * (1 - GUIDE_MARGIN * 2);\n      ctx.strokeStyle = \"rgba(125, 255, 160, 0.85)\";\n      ctx.lineWidth = 3;\n      ctx.strokeRect(gx, gy, gW, gH);\n\n      // calibration bar (phase: calibrate)\n      if (phase === \"calibrate\") {\n        const barH = 14;\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillRect((W - barPx) / 2, H * 0.1, barPx, barH);\n        ctx.font = \"14px system-ui, sans-serif\";\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillText(\"Match this bar to A4 width (21 cm) at chest depth.\", Math.max(12, (W - 360) / 2), H * 0.1 - 8);\n      }\n      const lm = res.poseLandmarks;\n      if (!lm) {\n        setStatus(\"Detecting body…\");\n        ctx.restore();\n        return;\n      }\n\n      // overlay\n      drawBBox(ctx, lm, W, H);\n      UPPER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#2aa4ff\", 3, W, H));\n      LOWER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#ff9933\", 3, W, H));\n      const vis = i => {\n        var _lm$i$visibility, _lm$i;\n        return ((_lm$i$visibility = (_lm$i = lm[i]) === null || _lm$i === void 0 ? void 0 : _lm$i.visibility) !== null && _lm$i$visibility !== void 0 ? _lm$i$visibility : 0) > 0.4;\n      };\n      const shouldersOK = vis(11) && vis(12);\n      const hipsOK = vis(23) || vis(24);\n      if (!(shouldersOK && hipsOK)) {\n        setStatus(\"Show shoulders & upper torso.\");\n        ctx.restore();\n        return;\n      }\n      const Lsh = lm[11],\n        Rsh = lm[12];\n      const hip = vis(23) ? lm[23] : lm[24];\n\n      // draw key points\n      const shMid = {\n        x: (Lsh.x + Rsh.x) / 2,\n        y: (Lsh.y + Rsh.y) / 2\n      };\n      ctx.fillStyle = \"rgba(0,200,255,1)\";\n      [Lsh, Rsh, shMid, hip].forEach(p => {\n        ctx.beginPath();\n        ctx.arc(p.x * W, p.y * H, 6, 0, Math.PI * 2);\n        ctx.fill();\n      });\n\n      // must be inside guide\n      const inGuide = [Lsh, Rsh, hip].every(p => p.x * W >= gx && p.x * W <= gx + gW && p.y * H >= gy && p.y * H <= gy + gH);\n      if (!inGuide) {\n        setStatus(\"Step back/center yourself inside the frame.\");\n        ctx.restore();\n        return;\n      }\n      if (phase === \"calibrate\") {\n        setStatus(\"Adjust bar to A4 width, then click Set calibration.\");\n        ctx.restore();\n        return;\n      }\n\n      // ------- MEASURE phase -------\n      if (!cmPerPx) {\n        setStatus(\"Click Set calibration first.\");\n        ctx.restore();\n        return;\n      }\n\n      // normalized for stability\n      const shoulderWidthN = getDistance(Lsh, Rsh);\n      const torsoHeightN = getDistance(shMid, hip);\n      if (torsoHeightN <= 0) {\n        setStatus(\"Hold still…\");\n        ctx.restore();\n        return;\n      }\n\n      // stability buffer on normalized shoulder width\n      const bufN = recentShoulderN.current;\n      bufN.push(shoulderWidthN);\n      if (bufN.length > STABILITY_FRAMES) bufN.shift();\n      const avg = bufN.reduce((a, b) => a + b, 0) / bufN.length;\n      const maxDev = Math.max(...bufN.map(v => Math.abs(v - avg)));\n\n      // convert to pixels (use horizontal shoulder distance for stability)\n      const Lx = Lsh.x * W,\n        Rx = Rsh.x * W;\n      const shoulderPx = Math.abs(Lx - Rx); // 👈 horizontal only (stable)\n      const chestFlatCm = shoulderPx * cmPerPx;\n      const chestCmInstant = chestFlatCm * MULTIPLIER_CHEST;\n\n      // median smoothing on chest cm\n      const b = chestBufRef.current;\n      b.push(chestCmInstant);\n      if (b.length > 15) b.shift();\n      const median = arr => {\n        const s = [...arr].sort((a, b) => a - b);\n        const m = Math.floor(s.length / 2);\n        return s.length % 2 ? s[m] : (s[m - 1] + s[m]) / 2;\n      };\n      const chestCmMed = median(b);\n      const spread = b.length >= 8 ? Math.max(...b) - Math.min(...b) : 999;\n      const stableCm = b.length >= 8 && spread < 1.2; // <1.2 cm variation\n\n      if (bufN.length >= STABILITY_FRAMES && maxDev < MOVEMENT_EPS && stableCm) {\n        var _MEN_SIZE_CHART$find;\n        const chestCm = Number(chestCmMed.toFixed(1));\n        const tshirt = menSizeFromChest(chestCm);\n        const fit = chestCm <= ((_MEN_SIZE_CHART$find = MEN_SIZE_CHART.find(r => r.size === tshirt)) === null || _MEN_SIZE_CHART$find === void 0 ? void 0 : _MEN_SIZE_CHART$find.max) ? \"Slim/Regular\" : \"Regular/Relaxed\";\n        setResult({\n          chestCm,\n          tshirt,\n          hoodie: tshirt === \"S\" ? \"S\" : tshirt,\n          fit,\n          debug: {\n            cmPerPx: Number(cmPerPx.toFixed(4)),\n            shoulderPx: Math.round(shoulderPx)\n          }\n        });\n        setLocked(true);\n        setPhase(\"locked\");\n        setStatus(\"Locked ✔️\");\n        stopCamera();\n      } else {\n        setStatus(\"Hold still…\");\n      }\n      ctx.restore();\n    });\n    startCamera(pose);\n    return () => {\n      stopCamera();\n    };\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n  const handleSetCalibration = () => {\n    if (barPx < 40) return;\n    setCmPerPx(A4_WIDTH_CM / barPx); // cm per pixel\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n  };\n  const handleRetake = () => {\n    setLocked(false);\n    setResult(null);\n    setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1–2 seconds.\");\n    chestBufRef.current = [];\n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n  const handleRecalibrate = () => {\n    setLocked(false);\n    setResult(null);\n    setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBufRef.current = [];\n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full min-h-screen bg-gradient-to-b from-[#0b0f14] to-[#111827] flex flex-col items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-6xl flex items-center justify-between px-4 pt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-white font-semibold text-lg\",\n        children: \"AI Fashion Fit \\u2014 Upper Body\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/90 rounded-full px-3 py-1 text-sm shadow\",\n        children: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full max-w-6xl aspect-video mt-4 rounded-2xl overflow-hidden shadow-2xl ring-1 ring-white/10\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"absolute inset-0 w-full h-full object-contain bg-black\",\n        autoPlay: true,\n        muted: true,\n        playsInline: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"absolute inset-0 w-full h-full object-contain pointer-events-none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), phase === \"calibrate\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-4 left-1/2 -translate-x-1/2 bg-white/95 backdrop-blur rounded-2xl px-4 py-3 flex items-center gap-4 shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm font-medium\",\n          children: \"A4 width match\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: 120,\n          max: 900,\n          value: barPx,\n          onChange: e => setBarPx(Number(e.target.value)),\n          className: \"w-72 accent-purple-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSetCalibration,\n          className: \"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700 text-sm shadow\",\n          children: \"Set calibration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }, this), phase === \"locked\" && result && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 bg-black/60 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white max-w-md w-full rounded-2xl p-6 shadow-2xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xl font-bold mb-3\",\n            children: \"Recommended Sizes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-y-1 text-[15px]\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Chest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold\",\n              children: [result.chestCm, \" cm\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\uD83D\\uDC55 T\\u2011Shirt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold\",\n              children: result.tshirt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 38\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\uD83E\\uDDE5 Hoodie\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold\",\n              children: result.hoodie\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\uD83C\\uDFAF Fit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold\",\n              children: result.fit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 text-xs text-gray-600\",\n            children: [\"Debug \\u2014 cm/px: \", result.debug.cmPerPx, \", shoulderPx: \", result.debug.shoulderPx]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-5 flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleRetake,\n              className: \"px-4 py-2 rounded-xl bg-black text-white hover:opacity-90\",\n              children: \"Retake\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleRecalibrate,\n              className: \"px-4 py-2 rounded-xl bg-gray-200 hover:bg-gray-300\",\n              children: \"Re\\u2011calibrate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => window.print(),\n              className: \"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700\",\n              children: \"Save / Print\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-3 text-white/60 text-sm text-center px-4\",\n      children: \"Tip: hold the A4 sheet flat at chest depth during calibration. Stand square to the camera. Keep still for 1\\u20132 seconds.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 245,\n    columnNumber: 5\n  }, this);\n};\n_s(Measure, \"8K+HPT6eQd3bwm0BTFX0GGDME1Q=\");\n_c = Measure;\nexport default Measure;\nvar _c;\n$RefreshReg$(_c, \"Measure\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","Pose","Camera","jsxDEV","_jsxDEV","A4_WIDTH_CM","MULTIPLIER_CHEST","MEN_SIZE_CHART","size","min","max","menSizeFromChest","cm","r","UPPER","LOWER","drawSeg","ctx","lm","a","b","color","width","W","H","_A$visibility","_B$visibility","A","B","visibility","strokeStyle","lineWidth","beginPath","moveTo","x","y","lineTo","stroke","drawBBox","pts","filter","p","_p$visibility","length","xs","map","ys","minX","Math","maxX","minY","maxY","pad","strokeRect","Measure","_s","videoRef","canvasRef","poseRef","camRef","phase","setPhase","status","setStatus","cmPerPx","setCmPerPx","barPx","setBarPx","locked","setLocked","result","setResult","STABILITY_FRAMES","MOVEMENT_EPS","GUIDE_MARGIN","recentShoulderN","chestBufRef","getDistance","hypot","stopCamera","_camRef$current","_camRef$current$stop","current","stop","call","v","srcObject","getTracks","forEach","t","startCamera","pose","camera","onFrame","send","image","height","start","canvas","getContext","locateFile","file","replace","setOptions","modelComplexity","smoothLandmarks","enableSegmentation","minDetectionConfidence","minTrackingConfidence","onResults","res","save","clearRect","drawImage","grd","createLinearGradient","addColorStop","fillStyle","fillRect","gx","gy","gW","gH","barH","font","fillText","poseLandmarks","restore","vis","i","_lm$i$visibility","_lm$i","shouldersOK","hipsOK","Lsh","Rsh","hip","shMid","arc","PI","fill","inGuide","every","shoulderWidthN","torsoHeightN","bufN","push","shift","avg","reduce","maxDev","abs","Lx","Rx","shoulderPx","chestFlatCm","chestCmInstant","median","arr","s","sort","m","floor","chestCmMed","spread","stableCm","_MEN_SIZE_CHART$find","chestCm","Number","toFixed","tshirt","fit","find","hoodie","debug","round","handleSetCalibration","handleRetake","handleRecalibrate","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","autoPlay","muted","playsInline","type","value","onChange","e","target","onClick","window","print","_c","$RefreshReg$"],"sources":["/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\n\n/* ---------- Sizing config ---------- */\nconst A4_WIDTH_CM = 21.0;          // calibration reference\nconst MULTIPLIER_CHEST = 1.75;     // shoulder flat → chest circumference (tune 1.6–1.9)\n\nconst MEN_SIZE_CHART = [\n  { size: \"S\",   min: 88,  max: 94  },\n  { size: \"M\",   min: 95,  max: 102 },\n  { size: \"L\",   min: 103, max: 110 },\n  { size: \"XL\",  min: 111, max: 118 },\n  { size: \"2XL\", min: 119, max: 126 },\n  { size: \"3XL\", min: 127, max: 134 },\n  { size: \"4XL\", min: 135, max: 145 },\n];\nconst menSizeFromChest = (cm) => {\n  for (const r of MEN_SIZE_CHART) if (cm >= r.min && cm <= r.max) return r.size;\n  return cm < MEN_SIZE_CHART[0].min ? \"XS/S\" : \"4XL+\";\n};\n\n/* ---------- Overlay (screenshot style) ---------- */\nconst UPPER = [\n  [0,1],[1,2],[2,3],[3,7],\n  [0,11],[0,12],\n  [11,13],[13,15],\n  [12,14],[14,16],\n  [11,12],\n  [11,23],[12,24],\n];\nconst LOWER = [\n  [23,25],[25,27],[27,31],\n  [24,26],[26,28],[28,32],\n  [23,24],\n];\nconst drawSeg = (ctx, lm, a, b, color, width, W, H) => {\n  const A = lm[a], B = lm[b];\n  if (!A || !B) return;\n  if ((A.visibility ?? 0) < 0.4 || (B.visibility ?? 0) < 0.4) return;\n  ctx.strokeStyle = color; ctx.lineWidth = width;\n  ctx.beginPath(); ctx.moveTo(A.x*W, A.y*H); ctx.lineTo(B.x*W, B.y*H); ctx.stroke();\n};\nconst drawBBox = (ctx, lm, W, H, color=\"rgba(0,255,0,0.9)\") => {\n  const pts = lm.filter(p => (p?.visibility ?? 0) > 0.4); if (!pts.length) return;\n  const xs = pts.map(p=>p.x*W), ys = pts.map(p=>p.y*H);\n  const minX = Math.max(0, Math.min(...xs)), maxX = Math.min(W, Math.max(...xs));\n  const minY = Math.max(0, Math.min(...ys)), maxY = Math.min(H, Math.max(...ys));\n  const pad = 8; ctx.strokeStyle = color; ctx.lineWidth = 3;\n  ctx.strokeRect(minX-pad, minY-pad, (maxX-minX)+pad*2, (maxY-minY)+pad*2);\n};\n\n/* ---------- Component ---------- */\nconst Measure = () => {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n\n  const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [cmPerPx, setCmPerPx] = useState(null);\n  const [barPx, setBarPx] = useState(300);\n\n  const [locked, setLocked] = useState(false);\n  const [result, setResult] = useState(null);\n\n  // stability & UI\n  const STABILITY_FRAMES = 12;\n  const MOVEMENT_EPS = 0.015;\n  const GUIDE_MARGIN = 0.08;\n  const recentShoulderN = useRef([]);\n  const chestBufRef = useRef([]);\n\n  const getDistance = useCallback((a,b)=>Math.hypot(a.x-b.x,a.y-b.y),[]);\n\n  const stopCamera = () => {\n    try {\n      camRef.current?.stop?.();\n      const v = videoRef.current;\n      v?.srcObject && v.srcObject.getTracks().forEach(t=>t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  };\n\n  const startCamera = async (pose) => {\n    const v = videoRef.current;\n    const camera = new Camera(v, {\n      onFrame: async () => { await pose.send({ image: v }); },\n      width: 1280, height: 720,\n    });\n    camRef.current = camera;\n    camera.start();\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    const pose = new Pose({\n      // ⭐ Serve local files + force non‑SIMD to avoid CDN WASM crash\n      locateFile: (file) => `/mediapipe/pose/${file.replace('simd_', '')}`,\n    });\n    poseRef.current = pose;\n\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true,\n      enableSegmentation: false,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5,\n    });\n\n    pose.onResults((res) => {\n      if (locked) return;\n\n      const W = res.image.width, H = res.image.height;\n      if (canvas.width !== W) canvas.width = W;\n      if (canvas.height !== H) canvas.height = H;\n\n      ctx.save();\n      ctx.clearRect(0,0,W,H);\n      ctx.drawImage(res.image,0,0,W,H);\n\n      // soft vignette for nicer look\n      const grd = ctx.createLinearGradient(0,0,0,H);\n      grd.addColorStop(0,\"rgba(0,0,0,0.10)\"); grd.addColorStop(1,\"rgba(0,0,0,0.15)\");\n      ctx.fillStyle = grd; ctx.fillRect(0,0,W,H);\n\n      // guide box\n      const gx = W*GUIDE_MARGIN, gy = H*GUIDE_MARGIN;\n      const gW = W*(1-GUIDE_MARGIN*2), gH = H*(1-GUIDE_MARGIN*2);\n      ctx.strokeStyle = \"rgba(125, 255, 160, 0.85)\";\n      ctx.lineWidth = 3; ctx.strokeRect(gx, gy, gW, gH);\n\n      // calibration bar (phase: calibrate)\n      if (phase === \"calibrate\") {\n        const barH = 14;\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillRect((W-barPx)/2, H*0.1, barPx, barH);\n        ctx.font = \"14px system-ui, sans-serif\";\n        ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n        ctx.fillText(\"Match this bar to A4 width (21 cm) at chest depth.\",\n          Math.max(12,(W-360)/2), H*0.1-8);\n      }\n\n      const lm = res.poseLandmarks;\n      if (!lm) { setStatus(\"Detecting body…\"); ctx.restore(); return; }\n\n      // overlay\n      drawBBox(ctx, lm, W, H);\n      UPPER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#2aa4ff\",3,W,H));\n      LOWER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#ff9933\",3,W,H));\n\n      const vis = (i) => (lm[i]?.visibility ?? 0) > 0.4;\n      const shouldersOK = vis(11) && vis(12);\n      const hipsOK = vis(23) || vis(24);\n      if (!(shouldersOK && hipsOK)) { setStatus(\"Show shoulders & upper torso.\"); ctx.restore(); return; }\n\n      const Lsh = lm[11], Rsh = lm[12];\n      const hip = vis(23) ? lm[23] : lm[24];\n\n      // draw key points\n      const shMid = { x:(Lsh.x+Rsh.x)/2, y:(Lsh.y+Rsh.y)/2 };\n      ctx.fillStyle = \"rgba(0,200,255,1)\";\n      [Lsh, Rsh, shMid, hip].forEach(p => { ctx.beginPath(); ctx.arc(p.x*W, p.y*H, 6, 0, Math.PI*2); ctx.fill(); });\n\n      // must be inside guide\n      const inGuide = [Lsh,Rsh,hip].every(p => p.x*W>=gx && p.x*W<=gx+gW && p.y*H>=gy && p.y*H<=gy+gH);\n      if (!inGuide) { setStatus(\"Step back/center yourself inside the frame.\"); ctx.restore(); return; }\n\n      if (phase === \"calibrate\") {\n        setStatus(\"Adjust bar to A4 width, then click Set calibration.\");\n        ctx.restore(); return;\n      }\n\n      // ------- MEASURE phase -------\n      if (!cmPerPx) { setStatus(\"Click Set calibration first.\"); ctx.restore(); return; }\n\n      // normalized for stability\n      const shoulderWidthN = getDistance(Lsh,Rsh);\n      const torsoHeightN = getDistance(shMid,hip);\n      if (torsoHeightN <= 0) { setStatus(\"Hold still…\"); ctx.restore(); return; }\n\n      // stability buffer on normalized shoulder width\n      const bufN = recentShoulderN.current;\n      bufN.push(shoulderWidthN); if (bufN.length > STABILITY_FRAMES) bufN.shift();\n      const avg = bufN.reduce((a,b)=>a+b,0)/bufN.length;\n      const maxDev = Math.max(...bufN.map(v=>Math.abs(v-avg)));\n\n      // convert to pixels (use horizontal shoulder distance for stability)\n      const Lx = Lsh.x*W, Rx = Rsh.x*W;\n      const shoulderPx = Math.abs(Lx - Rx);               // 👈 horizontal only (stable)\n      const chestFlatCm = shoulderPx * cmPerPx;\n      const chestCmInstant = chestFlatCm * MULTIPLIER_CHEST;\n\n      // median smoothing on chest cm\n      const b = chestBufRef.current; b.push(chestCmInstant); if (b.length > 15) b.shift();\n      const median = (arr)=>{ const s=[...arr].sort((a,b)=>a-b); const m=Math.floor(s.length/2); return s.length%2?s[m]:(s[m-1]+s[m])/2; };\n      const chestCmMed = median(b);\n      const spread = b.length >= 8 ? Math.max(...b) - Math.min(...b) : 999;\n      const stableCm = b.length >= 8 && spread < 1.2;     // <1.2 cm variation\n\n      if (bufN.length >= STABILITY_FRAMES && maxDev < MOVEMENT_EPS && stableCm) {\n        const chestCm = Number(chestCmMed.toFixed(1));\n        const tshirt = menSizeFromChest(chestCm);\n        const fit = chestCm <= MEN_SIZE_CHART.find(r=>r.size===tshirt)?.max ? \"Slim/Regular\" : \"Regular/Relaxed\";\n\n        setResult({\n          chestCm, tshirt, hoodie: tshirt===\"S\"?\"S\":tshirt, fit,\n          debug: { cmPerPx: Number(cmPerPx.toFixed(4)), shoulderPx: Math.round(shoulderPx) }\n        });\n        setLocked(true); setPhase(\"locked\"); setStatus(\"Locked ✔️\"); stopCamera();\n      } else {\n        setStatus(\"Hold still…\");\n      }\n\n      ctx.restore();\n    });\n\n    startCamera(pose);\n    return () => { stopCamera(); };\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n\n  const handleSetCalibration = () => {\n    if (barPx < 40) return;\n    setCmPerPx(A4_WIDTH_CM / barPx);  // cm per pixel\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n  };\n  const handleRetake = () => {\n    setLocked(false); setResult(null); setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1–2 seconds.\");\n    chestBufRef.current = []; recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n  const handleRecalibrate = () => {\n    setLocked(false); setResult(null); setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBufRef.current = []; recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  return (\n    <div className=\"relative w-full min-h-screen bg-gradient-to-b from-[#0b0f14] to-[#111827] flex flex-col items-center\">\n      {/* Header */}\n      <div className=\"w-full max-w-6xl flex items-center justify-between px-4 pt-4\">\n        <div className=\"text-white font-semibold text-lg\">AI Fashion Fit — Upper Body</div>\n        <div className=\"bg-white/90 rounded-full px-3 py-1 text-sm shadow\">{status}</div>\n      </div>\n\n      {/* Camera */}\n      <div className=\"relative w-full max-w-6xl aspect-video mt-4 rounded-2xl overflow-hidden shadow-2xl ring-1 ring-white/10\">\n        <video ref={videoRef} className=\"absolute inset-0 w-full h-full object-contain bg-black\" autoPlay muted playsInline />\n        <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full object-contain pointer-events-none\" />\n\n        {/* Calibration UI */}\n        {phase === \"calibrate\" && (\n          <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 bg-white/95 backdrop-blur rounded-2xl px-4 py-3 flex items-center gap-4 shadow-lg\">\n            <div className=\"text-sm font-medium\">A4 width match</div>\n            <input type=\"range\" min={120} max={900} value={barPx} onChange={(e)=>setBarPx(Number(e.target.value))} className=\"w-72 accent-purple-600\" />\n            <button onClick={handleSetCalibration} className=\"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700 text-sm shadow\">\n              Set calibration\n            </button>\n          </div>\n        )}\n\n        {/* Result modal */}\n        {phase === \"locked\" && result && (\n          <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center p-4\">\n            <div className=\"bg-white max-w-md w-full rounded-2xl p-6 shadow-2xl\">\n              <div className=\"text-xl font-bold mb-3\">Recommended Sizes</div>\n              <div className=\"grid grid-cols-2 gap-y-1 text-[15px]\">\n                <div>Chest</div><div className=\"font-semibold\">{result.chestCm} cm</div>\n                <div>👕 T‑Shirt</div><div className=\"font-semibold\">{result.tshirt}</div>\n                <div>🧥 Hoodie</div><div className=\"font-semibold\">{result.hoodie}</div>\n                <div>🎯 Fit</div><div className=\"font-semibold\">{result.fit}</div>\n              </div>\n              <div className=\"mt-3 text-xs text-gray-600\">\n                Debug — cm/px: {result.debug.cmPerPx}, shoulderPx: {result.debug.shoulderPx}\n              </div>\n              <div className=\"mt-5 flex gap-2\">\n                <button onClick={handleRetake} className=\"px-4 py-2 rounded-xl bg-black text-white hover:opacity-90\">Retake</button>\n                <button onClick={handleRecalibrate} className=\"px-4 py-2 rounded-xl bg-gray-200 hover:bg-gray-300\">Re‑calibrate</button>\n                <button onClick={()=>window.print()} className=\"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700\">Save / Print</button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <p className=\"mt-3 text-white/60 text-sm text-center px-4\">\n        Tip: hold the A4 sheet flat at chest depth during calibration. Stand square to the camera. Keep still for 1–2 seconds.\n      </p>\n    </div>\n  );\n};\n\nexport default Measure;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AACvE,SAASC,IAAI,QAAQ,iBAAiB;AACtC,SAASC,MAAM,QAAQ,yBAAyB;;AAEhD;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,WAAW,GAAG,IAAI,CAAC,CAAU;AACnC,MAAMC,gBAAgB,GAAG,IAAI,CAAC,CAAK;;AAEnC,MAAMC,cAAc,GAAG,CACrB;EAAEC,IAAI,EAAE,GAAG;EAAIC,GAAG,EAAE,EAAE;EAAGC,GAAG,EAAE;AAAI,CAAC,EACnC;EAAEF,IAAI,EAAE,GAAG;EAAIC,GAAG,EAAE,EAAE;EAAGC,GAAG,EAAE;AAAI,CAAC,EACnC;EAAEF,IAAI,EAAE,GAAG;EAAIC,GAAG,EAAE,GAAG;EAAEC,GAAG,EAAE;AAAI,CAAC,EACnC;EAAEF,IAAI,EAAE,IAAI;EAAGC,GAAG,EAAE,GAAG;EAAEC,GAAG,EAAE;AAAI,CAAC,EACnC;EAAEF,IAAI,EAAE,KAAK;EAAEC,GAAG,EAAE,GAAG;EAAEC,GAAG,EAAE;AAAI,CAAC,EACnC;EAAEF,IAAI,EAAE,KAAK;EAAEC,GAAG,EAAE,GAAG;EAAEC,GAAG,EAAE;AAAI,CAAC,EACnC;EAAEF,IAAI,EAAE,KAAK;EAAEC,GAAG,EAAE,GAAG;EAAEC,GAAG,EAAE;AAAI,CAAC,CACpC;AACD,MAAMC,gBAAgB,GAAIC,EAAE,IAAK;EAC/B,KAAK,MAAMC,CAAC,IAAIN,cAAc,EAAE,IAAIK,EAAE,IAAIC,CAAC,CAACJ,GAAG,IAAIG,EAAE,IAAIC,CAAC,CAACH,GAAG,EAAE,OAAOG,CAAC,CAACL,IAAI;EAC7E,OAAOI,EAAE,GAAGL,cAAc,CAAC,CAAC,CAAC,CAACE,GAAG,GAAG,MAAM,GAAG,MAAM;AACrD,CAAC;;AAED;AACA,MAAMK,KAAK,GAAG,CACZ,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EACvB,CAAC,CAAC,EAAC,EAAE,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC,EACb,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EACf,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EACf,CAAC,EAAE,EAAC,EAAE,CAAC,EACP,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,CAChB;AACD,MAAMC,KAAK,GAAG,CACZ,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EACvB,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EACvB,CAAC,EAAE,EAAC,EAAE,CAAC,CACR;AACD,MAAMC,OAAO,GAAGA,CAACC,GAAG,EAAEC,EAAE,EAAEC,CAAC,EAAEC,CAAC,EAAEC,KAAK,EAAEC,KAAK,EAAEC,CAAC,EAAEC,CAAC,KAAK;EAAA,IAAAC,aAAA,EAAAC,aAAA;EACrD,MAAMC,CAAC,GAAGT,EAAE,CAACC,CAAC,CAAC;IAAES,CAAC,GAAGV,EAAE,CAACE,CAAC,CAAC;EAC1B,IAAI,CAACO,CAAC,IAAI,CAACC,CAAC,EAAE;EACd,IAAI,EAAAH,aAAA,GAACE,CAAC,CAACE,UAAU,cAAAJ,aAAA,cAAAA,aAAA,GAAI,CAAC,IAAI,GAAG,IAAI,EAAAC,aAAA,GAACE,CAAC,CAACC,UAAU,cAAAH,aAAA,cAAAA,aAAA,GAAI,CAAC,IAAI,GAAG,EAAE;EAC5DT,GAAG,CAACa,WAAW,GAAGT,KAAK;EAAEJ,GAAG,CAACc,SAAS,GAAGT,KAAK;EAC9CL,GAAG,CAACe,SAAS,CAAC,CAAC;EAAEf,GAAG,CAACgB,MAAM,CAACN,CAAC,CAACO,CAAC,GAACX,CAAC,EAAEI,CAAC,CAACQ,CAAC,GAACX,CAAC,CAAC;EAAEP,GAAG,CAACmB,MAAM,CAACR,CAAC,CAACM,CAAC,GAACX,CAAC,EAAEK,CAAC,CAACO,CAAC,GAACX,CAAC,CAAC;EAAEP,GAAG,CAACoB,MAAM,CAAC,CAAC;AACnF,CAAC;AACD,MAAMC,QAAQ,GAAGA,CAACrB,GAAG,EAAEC,EAAE,EAAEK,CAAC,EAAEC,CAAC,EAAEH,KAAK,GAAC,mBAAmB,KAAK;EAC7D,MAAMkB,GAAG,GAAGrB,EAAE,CAACsB,MAAM,CAACC,CAAC;IAAA,IAAAC,aAAA;IAAA,OAAI,EAAAA,aAAA,GAACD,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEZ,UAAU,cAAAa,aAAA,cAAAA,aAAA,GAAI,CAAC,IAAI,GAAG;EAAA,EAAC;EAAE,IAAI,CAACH,GAAG,CAACI,MAAM,EAAE;EACzE,MAAMC,EAAE,GAAGL,GAAG,CAACM,GAAG,CAACJ,CAAC,IAAEA,CAAC,CAACP,CAAC,GAACX,CAAC,CAAC;IAAEuB,EAAE,GAAGP,GAAG,CAACM,GAAG,CAACJ,CAAC,IAAEA,CAAC,CAACN,CAAC,GAACX,CAAC,CAAC;EACpD,MAAMuB,IAAI,GAAGC,IAAI,CAACtC,GAAG,CAAC,CAAC,EAAEsC,IAAI,CAACvC,GAAG,CAAC,GAAGmC,EAAE,CAAC,CAAC;IAAEK,IAAI,GAAGD,IAAI,CAACvC,GAAG,CAACc,CAAC,EAAEyB,IAAI,CAACtC,GAAG,CAAC,GAAGkC,EAAE,CAAC,CAAC;EAC9E,MAAMM,IAAI,GAAGF,IAAI,CAACtC,GAAG,CAAC,CAAC,EAAEsC,IAAI,CAACvC,GAAG,CAAC,GAAGqC,EAAE,CAAC,CAAC;IAAEK,IAAI,GAAGH,IAAI,CAACvC,GAAG,CAACe,CAAC,EAAEwB,IAAI,CAACtC,GAAG,CAAC,GAAGoC,EAAE,CAAC,CAAC;EAC9E,MAAMM,GAAG,GAAG,CAAC;EAAEnC,GAAG,CAACa,WAAW,GAAGT,KAAK;EAAEJ,GAAG,CAACc,SAAS,GAAG,CAAC;EACzDd,GAAG,CAACoC,UAAU,CAACN,IAAI,GAACK,GAAG,EAAEF,IAAI,GAACE,GAAG,EAAGH,IAAI,GAACF,IAAI,GAAEK,GAAG,GAAC,CAAC,EAAGD,IAAI,GAACD,IAAI,GAAEE,GAAG,GAAC,CAAC,CAAC;AAC1E,CAAC;;AAED;AACA,MAAME,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAMC,QAAQ,GAAG3D,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAM4D,SAAS,GAAG5D,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM6D,OAAO,GAAG7D,MAAM,CAAC,IAAI,CAAC;EAC5B,MAAM8D,MAAM,GAAG9D,MAAM,CAAC,IAAI,CAAC;EAE3B,MAAM,CAAC+D,KAAK,EAAEC,QAAQ,CAAC,GAAG9D,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;EACjD,MAAM,CAAC+D,MAAM,EAAEC,SAAS,CAAC,GAAGhE,QAAQ,CAAC,0DAA0D,CAAC;EAChG,MAAM,CAACiE,OAAO,EAAEC,UAAU,CAAC,GAAGlE,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACmE,KAAK,EAAEC,QAAQ,CAAC,GAAGpE,QAAQ,CAAC,GAAG,CAAC;EAEvC,MAAM,CAACqE,MAAM,EAAEC,SAAS,CAAC,GAAGtE,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACuE,MAAM,EAAEC,SAAS,CAAC,GAAGxE,QAAQ,CAAC,IAAI,CAAC;;EAE1C;EACA,MAAMyE,gBAAgB,GAAG,EAAE;EAC3B,MAAMC,YAAY,GAAG,KAAK;EAC1B,MAAMC,YAAY,GAAG,IAAI;EACzB,MAAMC,eAAe,GAAG9E,MAAM,CAAC,EAAE,CAAC;EAClC,MAAM+E,WAAW,GAAG/E,MAAM,CAAC,EAAE,CAAC;EAE9B,MAAMgF,WAAW,GAAG7E,WAAW,CAAC,CAACmB,CAAC,EAACC,CAAC,KAAG4B,IAAI,CAAC8B,KAAK,CAAC3D,CAAC,CAACe,CAAC,GAACd,CAAC,CAACc,CAAC,EAACf,CAAC,CAACgB,CAAC,GAACf,CAAC,CAACe,CAAC,CAAC,EAAC,EAAE,CAAC;EAEtE,MAAM4C,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAI;MAAA,IAAAC,eAAA,EAAAC,oBAAA;MACF,CAAAD,eAAA,GAAArB,MAAM,CAACuB,OAAO,cAAAF,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBG,IAAI,cAAAF,oBAAA,uBAApBA,oBAAA,CAAAG,IAAA,CAAAJ,eAAuB,CAAC;MACxB,MAAMK,CAAC,GAAG7B,QAAQ,CAAC0B,OAAO;MAC1B,CAAAG,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEC,SAAS,KAAID,CAAC,CAACC,SAAS,CAACC,SAAS,CAAC,CAAC,CAACC,OAAO,CAACC,CAAC,IAAEA,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC;MAC5D,IAAIE,CAAC,EAAEA,CAAC,CAACC,SAAS,GAAG,IAAI;IAC3B,CAAC,CAAC,MAAM,CAAC;EACX,CAAC;EAED,MAAMI,WAAW,GAAG,MAAOC,IAAI,IAAK;IAClC,MAAMN,CAAC,GAAG7B,QAAQ,CAAC0B,OAAO;IAC1B,MAAMU,MAAM,GAAG,IAAI1F,MAAM,CAACmF,CAAC,EAAE;MAC3BQ,OAAO,EAAE,MAAAA,CAAA,KAAY;QAAE,MAAMF,IAAI,CAACG,IAAI,CAAC;UAAEC,KAAK,EAAEV;QAAE,CAAC,CAAC;MAAE,CAAC;MACvD/D,KAAK,EAAE,IAAI;MAAE0E,MAAM,EAAE;IACvB,CAAC,CAAC;IACFrC,MAAM,CAACuB,OAAO,GAAGU,MAAM;IACvBA,MAAM,CAACK,KAAK,CAAC,CAAC;EAChB,CAAC;EAEDnG,SAAS,CAAC,MAAM;IACd,MAAMoG,MAAM,GAAGzC,SAAS,CAACyB,OAAO;IAChC,MAAMjE,GAAG,GAAGiF,MAAM,CAACC,UAAU,CAAC,IAAI,CAAC;IAEnC,MAAMR,IAAI,GAAG,IAAI1F,IAAI,CAAC;MACpB;MACAmG,UAAU,EAAGC,IAAI,IAAK,mBAAmBA,IAAI,CAACC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;IACpE,CAAC,CAAC;IACF5C,OAAO,CAACwB,OAAO,GAAGS,IAAI;IAEtBA,IAAI,CAACY,UAAU,CAAC;MACdC,eAAe,EAAE,CAAC;MAClBC,eAAe,EAAE,IAAI;MACrBC,kBAAkB,EAAE,KAAK;MACzBC,sBAAsB,EAAE,GAAG;MAC3BC,qBAAqB,EAAE;IACzB,CAAC,CAAC;IAEFjB,IAAI,CAACkB,SAAS,CAAEC,GAAG,IAAK;MACtB,IAAI1C,MAAM,EAAE;MAEZ,MAAM7C,CAAC,GAAGuF,GAAG,CAACf,KAAK,CAACzE,KAAK;QAAEE,CAAC,GAAGsF,GAAG,CAACf,KAAK,CAACC,MAAM;MAC/C,IAAIE,MAAM,CAAC5E,KAAK,KAAKC,CAAC,EAAE2E,MAAM,CAAC5E,KAAK,GAAGC,CAAC;MACxC,IAAI2E,MAAM,CAACF,MAAM,KAAKxE,CAAC,EAAE0E,MAAM,CAACF,MAAM,GAAGxE,CAAC;MAE1CP,GAAG,CAAC8F,IAAI,CAAC,CAAC;MACV9F,GAAG,CAAC+F,SAAS,CAAC,CAAC,EAAC,CAAC,EAACzF,CAAC,EAACC,CAAC,CAAC;MACtBP,GAAG,CAACgG,SAAS,CAACH,GAAG,CAACf,KAAK,EAAC,CAAC,EAAC,CAAC,EAACxE,CAAC,EAACC,CAAC,CAAC;;MAEhC;MACA,MAAM0F,GAAG,GAAGjG,GAAG,CAACkG,oBAAoB,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC3F,CAAC,CAAC;MAC7C0F,GAAG,CAACE,YAAY,CAAC,CAAC,EAAC,kBAAkB,CAAC;MAAEF,GAAG,CAACE,YAAY,CAAC,CAAC,EAAC,kBAAkB,CAAC;MAC9EnG,GAAG,CAACoG,SAAS,GAAGH,GAAG;MAAEjG,GAAG,CAACqG,QAAQ,CAAC,CAAC,EAAC,CAAC,EAAC/F,CAAC,EAACC,CAAC,CAAC;;MAE1C;MACA,MAAM+F,EAAE,GAAGhG,CAAC,GAACmD,YAAY;QAAE8C,EAAE,GAAGhG,CAAC,GAACkD,YAAY;MAC9C,MAAM+C,EAAE,GAAGlG,CAAC,IAAE,CAAC,GAACmD,YAAY,GAAC,CAAC,CAAC;QAAEgD,EAAE,GAAGlG,CAAC,IAAE,CAAC,GAACkD,YAAY,GAAC,CAAC,CAAC;MAC1DzD,GAAG,CAACa,WAAW,GAAG,2BAA2B;MAC7Cb,GAAG,CAACc,SAAS,GAAG,CAAC;MAAEd,GAAG,CAACoC,UAAU,CAACkE,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,CAAC;;MAEjD;MACA,IAAI9D,KAAK,KAAK,WAAW,EAAE;QACzB,MAAM+D,IAAI,GAAG,EAAE;QACf1G,GAAG,CAACoG,SAAS,GAAG,wBAAwB;QACxCpG,GAAG,CAACqG,QAAQ,CAAC,CAAC/F,CAAC,GAAC2C,KAAK,IAAE,CAAC,EAAE1C,CAAC,GAAC,GAAG,EAAE0C,KAAK,EAAEyD,IAAI,CAAC;QAC7C1G,GAAG,CAAC2G,IAAI,GAAG,4BAA4B;QACvC3G,GAAG,CAACoG,SAAS,GAAG,wBAAwB;QACxCpG,GAAG,CAAC4G,QAAQ,CAAC,oDAAoD,EAC/D7E,IAAI,CAACtC,GAAG,CAAC,EAAE,EAAC,CAACa,CAAC,GAAC,GAAG,IAAE,CAAC,CAAC,EAAEC,CAAC,GAAC,GAAG,GAAC,CAAC,CAAC;MACpC;MAEA,MAAMN,EAAE,GAAG4F,GAAG,CAACgB,aAAa;MAC5B,IAAI,CAAC5G,EAAE,EAAE;QAAE6C,SAAS,CAAC,iBAAiB,CAAC;QAAE9C,GAAG,CAAC8G,OAAO,CAAC,CAAC;QAAE;MAAQ;;MAEhE;MACAzF,QAAQ,CAACrB,GAAG,EAAEC,EAAE,EAAEK,CAAC,EAAEC,CAAC,CAAC;MACvBV,KAAK,CAAC0E,OAAO,CAAC,CAAC,CAACrE,CAAC,EAACC,CAAC,CAAC,KAAGJ,OAAO,CAACC,GAAG,EAACC,EAAE,EAACC,CAAC,EAACC,CAAC,EAAC,SAAS,EAAC,CAAC,EAACG,CAAC,EAACC,CAAC,CAAC,CAAC;MAC3DT,KAAK,CAACyE,OAAO,CAAC,CAAC,CAACrE,CAAC,EAACC,CAAC,CAAC,KAAGJ,OAAO,CAACC,GAAG,EAACC,EAAE,EAACC,CAAC,EAACC,CAAC,EAAC,SAAS,EAAC,CAAC,EAACG,CAAC,EAACC,CAAC,CAAC,CAAC;MAE3D,MAAMwG,GAAG,GAAIC,CAAC;QAAA,IAAAC,gBAAA,EAAAC,KAAA;QAAA,OAAK,EAAAD,gBAAA,IAAAC,KAAA,GAACjH,EAAE,CAAC+G,CAAC,CAAC,cAAAE,KAAA,uBAALA,KAAA,CAAOtG,UAAU,cAAAqG,gBAAA,cAAAA,gBAAA,GAAI,CAAC,IAAI,GAAG;MAAA;MACjD,MAAME,WAAW,GAAGJ,GAAG,CAAC,EAAE,CAAC,IAAIA,GAAG,CAAC,EAAE,CAAC;MACtC,MAAMK,MAAM,GAAGL,GAAG,CAAC,EAAE,CAAC,IAAIA,GAAG,CAAC,EAAE,CAAC;MACjC,IAAI,EAAEI,WAAW,IAAIC,MAAM,CAAC,EAAE;QAAEtE,SAAS,CAAC,+BAA+B,CAAC;QAAE9C,GAAG,CAAC8G,OAAO,CAAC,CAAC;QAAE;MAAQ;MAEnG,MAAMO,GAAG,GAAGpH,EAAE,CAAC,EAAE,CAAC;QAAEqH,GAAG,GAAGrH,EAAE,CAAC,EAAE,CAAC;MAChC,MAAMsH,GAAG,GAAGR,GAAG,CAAC,EAAE,CAAC,GAAG9G,EAAE,CAAC,EAAE,CAAC,GAAGA,EAAE,CAAC,EAAE,CAAC;;MAErC;MACA,MAAMuH,KAAK,GAAG;QAAEvG,CAAC,EAAC,CAACoG,GAAG,CAACpG,CAAC,GAACqG,GAAG,CAACrG,CAAC,IAAE,CAAC;QAAEC,CAAC,EAAC,CAACmG,GAAG,CAACnG,CAAC,GAACoG,GAAG,CAACpG,CAAC,IAAE;MAAE,CAAC;MACtDlB,GAAG,CAACoG,SAAS,GAAG,mBAAmB;MACnC,CAACiB,GAAG,EAAEC,GAAG,EAAEE,KAAK,EAAED,GAAG,CAAC,CAAChD,OAAO,CAAC/C,CAAC,IAAI;QAAExB,GAAG,CAACe,SAAS,CAAC,CAAC;QAAEf,GAAG,CAACyH,GAAG,CAACjG,CAAC,CAACP,CAAC,GAACX,CAAC,EAAEkB,CAAC,CAACN,CAAC,GAACX,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEwB,IAAI,CAAC2F,EAAE,GAAC,CAAC,CAAC;QAAE1H,GAAG,CAAC2H,IAAI,CAAC,CAAC;MAAE,CAAC,CAAC;;MAE7G;MACA,MAAMC,OAAO,GAAG,CAACP,GAAG,EAACC,GAAG,EAACC,GAAG,CAAC,CAACM,KAAK,CAACrG,CAAC,IAAIA,CAAC,CAACP,CAAC,GAACX,CAAC,IAAEgG,EAAE,IAAI9E,CAAC,CAACP,CAAC,GAACX,CAAC,IAAEgG,EAAE,GAACE,EAAE,IAAIhF,CAAC,CAACN,CAAC,GAACX,CAAC,IAAEgG,EAAE,IAAI/E,CAAC,CAACN,CAAC,GAACX,CAAC,IAAEgG,EAAE,GAACE,EAAE,CAAC;MAChG,IAAI,CAACmB,OAAO,EAAE;QAAE9E,SAAS,CAAC,6CAA6C,CAAC;QAAE9C,GAAG,CAAC8G,OAAO,CAAC,CAAC;QAAE;MAAQ;MAEjG,IAAInE,KAAK,KAAK,WAAW,EAAE;QACzBG,SAAS,CAAC,qDAAqD,CAAC;QAChE9C,GAAG,CAAC8G,OAAO,CAAC,CAAC;QAAE;MACjB;;MAEA;MACA,IAAI,CAAC/D,OAAO,EAAE;QAAED,SAAS,CAAC,8BAA8B,CAAC;QAAE9C,GAAG,CAAC8G,OAAO,CAAC,CAAC;QAAE;MAAQ;;MAElF;MACA,MAAMgB,cAAc,GAAGlE,WAAW,CAACyD,GAAG,EAACC,GAAG,CAAC;MAC3C,MAAMS,YAAY,GAAGnE,WAAW,CAAC4D,KAAK,EAACD,GAAG,CAAC;MAC3C,IAAIQ,YAAY,IAAI,CAAC,EAAE;QAAEjF,SAAS,CAAC,aAAa,CAAC;QAAE9C,GAAG,CAAC8G,OAAO,CAAC,CAAC;QAAE;MAAQ;;MAE1E;MACA,MAAMkB,IAAI,GAAGtE,eAAe,CAACO,OAAO;MACpC+D,IAAI,CAACC,IAAI,CAACH,cAAc,CAAC;MAAE,IAAIE,IAAI,CAACtG,MAAM,GAAG6B,gBAAgB,EAAEyE,IAAI,CAACE,KAAK,CAAC,CAAC;MAC3E,MAAMC,GAAG,GAAGH,IAAI,CAACI,MAAM,CAAC,CAAClI,CAAC,EAACC,CAAC,KAAGD,CAAC,GAACC,CAAC,EAAC,CAAC,CAAC,GAAC6H,IAAI,CAACtG,MAAM;MACjD,MAAM2G,MAAM,GAAGtG,IAAI,CAACtC,GAAG,CAAC,GAAGuI,IAAI,CAACpG,GAAG,CAACwC,CAAC,IAAErC,IAAI,CAACuG,GAAG,CAAClE,CAAC,GAAC+D,GAAG,CAAC,CAAC,CAAC;;MAExD;MACA,MAAMI,EAAE,GAAGlB,GAAG,CAACpG,CAAC,GAACX,CAAC;QAAEkI,EAAE,GAAGlB,GAAG,CAACrG,CAAC,GAACX,CAAC;MAChC,MAAMmI,UAAU,GAAG1G,IAAI,CAACuG,GAAG,CAACC,EAAE,GAAGC,EAAE,CAAC,CAAC,CAAe;MACpD,MAAME,WAAW,GAAGD,UAAU,GAAG1F,OAAO;MACxC,MAAM4F,cAAc,GAAGD,WAAW,GAAGrJ,gBAAgB;;MAErD;MACA,MAAMc,CAAC,GAAGwD,WAAW,CAACM,OAAO;MAAE9D,CAAC,CAAC8H,IAAI,CAACU,cAAc,CAAC;MAAE,IAAIxI,CAAC,CAACuB,MAAM,GAAG,EAAE,EAAEvB,CAAC,CAAC+H,KAAK,CAAC,CAAC;MACnF,MAAMU,MAAM,GAAIC,GAAG,IAAG;QAAE,MAAMC,CAAC,GAAC,CAAC,GAAGD,GAAG,CAAC,CAACE,IAAI,CAAC,CAAC7I,CAAC,EAACC,CAAC,KAAGD,CAAC,GAACC,CAAC,CAAC;QAAE,MAAM6I,CAAC,GAACjH,IAAI,CAACkH,KAAK,CAACH,CAAC,CAACpH,MAAM,GAAC,CAAC,CAAC;QAAE,OAAOoH,CAAC,CAACpH,MAAM,GAAC,CAAC,GAACoH,CAAC,CAACE,CAAC,CAAC,GAAC,CAACF,CAAC,CAACE,CAAC,GAAC,CAAC,CAAC,GAACF,CAAC,CAACE,CAAC,CAAC,IAAE,CAAC;MAAE,CAAC;MACpI,MAAME,UAAU,GAAGN,MAAM,CAACzI,CAAC,CAAC;MAC5B,MAAMgJ,MAAM,GAAGhJ,CAAC,CAACuB,MAAM,IAAI,CAAC,GAAGK,IAAI,CAACtC,GAAG,CAAC,GAAGU,CAAC,CAAC,GAAG4B,IAAI,CAACvC,GAAG,CAAC,GAAGW,CAAC,CAAC,GAAG,GAAG;MACpE,MAAMiJ,QAAQ,GAAGjJ,CAAC,CAACuB,MAAM,IAAI,CAAC,IAAIyH,MAAM,GAAG,GAAG,CAAC,CAAK;;MAEpD,IAAInB,IAAI,CAACtG,MAAM,IAAI6B,gBAAgB,IAAI8E,MAAM,GAAG7E,YAAY,IAAI4F,QAAQ,EAAE;QAAA,IAAAC,oBAAA;QACxE,MAAMC,OAAO,GAAGC,MAAM,CAACL,UAAU,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC;QAC7C,MAAMC,MAAM,GAAG/J,gBAAgB,CAAC4J,OAAO,CAAC;QACxC,MAAMI,GAAG,GAAGJ,OAAO,MAAAD,oBAAA,GAAI/J,cAAc,CAACqK,IAAI,CAAC/J,CAAC,IAAEA,CAAC,CAACL,IAAI,KAAGkK,MAAM,CAAC,cAAAJ,oBAAA,uBAAvCA,oBAAA,CAAyC5J,GAAG,IAAG,cAAc,GAAG,iBAAiB;QAExG6D,SAAS,CAAC;UACRgG,OAAO;UAAEG,MAAM;UAAEG,MAAM,EAAEH,MAAM,KAAG,GAAG,GAAC,GAAG,GAACA,MAAM;UAAEC,GAAG;UACrDG,KAAK,EAAE;YAAE9G,OAAO,EAAEwG,MAAM,CAACxG,OAAO,CAACyG,OAAO,CAAC,CAAC,CAAC,CAAC;YAAEf,UAAU,EAAE1G,IAAI,CAAC+H,KAAK,CAACrB,UAAU;UAAE;QACnF,CAAC,CAAC;QACFrF,SAAS,CAAC,IAAI,CAAC;QAAER,QAAQ,CAAC,QAAQ,CAAC;QAAEE,SAAS,CAAC,WAAW,CAAC;QAAEgB,UAAU,CAAC,CAAC;MAC3E,CAAC,MAAM;QACLhB,SAAS,CAAC,aAAa,CAAC;MAC1B;MAEA9C,GAAG,CAAC8G,OAAO,CAAC,CAAC;IACf,CAAC,CAAC;IAEFrC,WAAW,CAACC,IAAI,CAAC;IACjB,OAAO,MAAM;MAAEZ,UAAU,CAAC,CAAC;IAAE,CAAC;EAChC,CAAC,EAAE,CAACnB,KAAK,EAAEI,OAAO,EAAEa,WAAW,EAAET,MAAM,EAAEF,KAAK,CAAC,CAAC;EAEhD,MAAM8G,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAI9G,KAAK,GAAG,EAAE,EAAE;IAChBD,UAAU,CAAC5D,WAAW,GAAG6D,KAAK,CAAC,CAAC,CAAE;IAClCL,QAAQ,CAAC,SAAS,CAAC;IACnBE,SAAS,CAAC,mEAAmE,CAAC;EAChF,CAAC;EACD,MAAMkH,YAAY,GAAGA,CAAA,KAAM;IACzB5G,SAAS,CAAC,KAAK,CAAC;IAAEE,SAAS,CAAC,IAAI,CAAC;IAAEV,QAAQ,CAAC,SAAS,CAAC;IACtDE,SAAS,CAAC,yCAAyC,CAAC;IACpDa,WAAW,CAACM,OAAO,GAAG,EAAE;IAAEP,eAAe,CAACO,OAAO,GAAG,EAAE;IACtD,IAAIxB,OAAO,CAACwB,OAAO,EAAEQ,WAAW,CAAChC,OAAO,CAACwB,OAAO,CAAC;EACnD,CAAC;EACD,MAAMgG,iBAAiB,GAAGA,CAAA,KAAM;IAC9B7G,SAAS,CAAC,KAAK,CAAC;IAAEE,SAAS,CAAC,IAAI,CAAC;IAAEV,QAAQ,CAAC,WAAW,CAAC;IACxDE,SAAS,CAAC,0DAA0D,CAAC;IACrEa,WAAW,CAACM,OAAO,GAAG,EAAE;IAAEP,eAAe,CAACO,OAAO,GAAG,EAAE;IACtD,IAAIxB,OAAO,CAACwB,OAAO,EAAEQ,WAAW,CAAChC,OAAO,CAACwB,OAAO,CAAC;EACnD,CAAC;EAED,oBACE9E,OAAA;IAAK+K,SAAS,EAAC,sGAAsG;IAAAC,QAAA,gBAEnHhL,OAAA;MAAK+K,SAAS,EAAC,8DAA8D;MAAAC,QAAA,gBAC3EhL,OAAA;QAAK+K,SAAS,EAAC,kCAAkC;QAAAC,QAAA,EAAC;MAA2B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACnFpL,OAAA;QAAK+K,SAAS,EAAC,mDAAmD;QAAAC,QAAA,EAAEtH;MAAM;QAAAuH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9E,CAAC,eAGNpL,OAAA;MAAK+K,SAAS,EAAC,yGAAyG;MAAAC,QAAA,gBACtHhL,OAAA;QAAOqL,GAAG,EAAEjI,QAAS;QAAC2H,SAAS,EAAC,wDAAwD;QAACO,QAAQ;QAACC,KAAK;QAACC,WAAW;MAAA;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACtHpL,OAAA;QAAQqL,GAAG,EAAEhI,SAAU;QAAC0H,SAAS,EAAC;MAAmE;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EAGvG5H,KAAK,KAAK,WAAW,iBACpBxD,OAAA;QAAK+K,SAAS,EAAC,+HAA+H;QAAAC,QAAA,gBAC5IhL,OAAA;UAAK+K,SAAS,EAAC,qBAAqB;UAAAC,QAAA,EAAC;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACzDpL,OAAA;UAAOyL,IAAI,EAAC,OAAO;UAACpL,GAAG,EAAE,GAAI;UAACC,GAAG,EAAE,GAAI;UAACoL,KAAK,EAAE5H,KAAM;UAAC6H,QAAQ,EAAGC,CAAC,IAAG7H,QAAQ,CAACqG,MAAM,CAACwB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAAE;UAACX,SAAS,EAAC;QAAwB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAC5IpL,OAAA;UAAQ8L,OAAO,EAAElB,oBAAqB;UAACG,SAAS,EAAC,kFAAkF;UAAAC,QAAA,EAAC;QAEpI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CACN,EAGA5H,KAAK,KAAK,QAAQ,IAAIU,MAAM,iBAC3BlE,OAAA;QAAK+K,SAAS,EAAC,mEAAmE;QAAAC,QAAA,eAChFhL,OAAA;UAAK+K,SAAS,EAAC,qDAAqD;UAAAC,QAAA,gBAClEhL,OAAA;YAAK+K,SAAS,EAAC,wBAAwB;YAAAC,QAAA,EAAC;UAAiB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAC/DpL,OAAA;YAAK+K,SAAS,EAAC,sCAAsC;YAAAC,QAAA,gBACnDhL,OAAA;cAAAgL,QAAA,EAAK;YAAK;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAAApL,OAAA;cAAK+K,SAAS,EAAC,eAAe;cAAAC,QAAA,GAAE9G,MAAM,CAACiG,OAAO,EAAC,KAAG;YAAA;cAAAc,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACxEpL,OAAA;cAAAgL,QAAA,EAAK;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAAApL,OAAA;cAAK+K,SAAS,EAAC,eAAe;cAAAC,QAAA,EAAE9G,MAAM,CAACoG;YAAM;cAAAW,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACzEpL,OAAA;cAAAgL,QAAA,EAAK;YAAS;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAAApL,OAAA;cAAK+K,SAAS,EAAC,eAAe;cAAAC,QAAA,EAAE9G,MAAM,CAACuG;YAAM;cAAAQ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACxEpL,OAAA;cAAAgL,QAAA,EAAK;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAAApL,OAAA;cAAK+K,SAAS,EAAC,eAAe;cAAAC,QAAA,EAAE9G,MAAM,CAACqG;YAAG;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/D,CAAC,eACNpL,OAAA;YAAK+K,SAAS,EAAC,4BAA4B;YAAAC,QAAA,GAAC,sBAC3B,EAAC9G,MAAM,CAACwG,KAAK,CAAC9G,OAAO,EAAC,gBAAc,EAACM,MAAM,CAACwG,KAAK,CAACpB,UAAU;UAAA;YAAA2B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxE,CAAC,eACNpL,OAAA;YAAK+K,SAAS,EAAC,iBAAiB;YAAAC,QAAA,gBAC9BhL,OAAA;cAAQ8L,OAAO,EAAEjB,YAAa;cAACE,SAAS,EAAC,2DAA2D;cAAAC,QAAA,EAAC;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACpHpL,OAAA;cAAQ8L,OAAO,EAAEhB,iBAAkB;cAACC,SAAS,EAAC,oDAAoD;cAAAC,QAAA,EAAC;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACxHpL,OAAA;cAAQ8L,OAAO,EAAEA,CAAA,KAAIC,MAAM,CAACC,KAAK,CAAC,CAAE;cAACjB,SAAS,EAAC,mEAAmE;cAAAC,QAAA,EAAC;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAENpL,OAAA;MAAG+K,SAAS,EAAC,6CAA6C;MAAAC,QAAA,EAAC;IAE3D;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACD,CAAC;AAEV,CAAC;AAACjI,EAAA,CAnPID,OAAO;AAAA+I,EAAA,GAAP/I,OAAO;AAqPb,eAAeA,OAAO;AAAC,IAAA+I,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}