{"ast":null,"code":"var _jsxFileName = \"/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { Camera as CameraIcon, Sparkles, Activity, Target } from \"lucide-react\";\n\n/* ---------- Calibration & Measurement Constants ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst A4_WIDTH_CM = 21.0; // A4 paper width in cm\nconst UPPER_WAIST_FACTOR = 0.90; // hip width â‰ˆ a bit wider than upper waist\n\n/* Chest estimation factor - adjusted for better accuracy */\nconst CHEST_BASE_K = 2.2; // Increased from 1.78 for more realistic chest measurements\n\n/* Realistic measurement ranges for validation */\nconst MIN_CHEST_CM = 60; // Minimum realistic chest measurement\nconst MAX_CHEST_CM = 150; // Maximum realistic chest measurement\nconst MIN_SHOULDER_CM = 30; // Minimum realistic shoulder measurement\nconst MAX_SHOULDER_CM = 80; // Maximum realistic shoulder measurement\n\n/* ---------- Overlay helpers ---------- */\nconst UPPER = [[0, 1], [1, 2], [2, 3], [3, 7], [0, 11], [0, 12], [11, 13], [13, 15], [12, 14], [14, 16], [11, 12], [11, 23], [12, 24]];\nconst LOWER = [[23, 25], [25, 27], [27, 31], [24, 26], [26, 28], [28, 32], [23, 24]];\nconst drawSeg = (ctx, lm, a, b, color, width, W, H) => {\n  var _A$visibility, _B$visibility;\n  const A = lm[a],\n    B = lm[b];\n  if (!A || !B) return;\n  if (((_A$visibility = A.visibility) !== null && _A$visibility !== void 0 ? _A$visibility : 0) < 0.4 || ((_B$visibility = B.visibility) !== null && _B$visibility !== void 0 ? _B$visibility : 0) < 0.4) return;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = width;\n  ctx.beginPath();\n  ctx.moveTo(A.x * W, A.y * H);\n  ctx.lineTo(B.x * W, B.y * H);\n  ctx.stroke();\n};\nconst drawBBox = (ctx, lm, W, H, color = \"rgba(16,185,129,0.9)\") => {\n  const pts = lm.filter(p => {\n    var _p$visibility;\n    return ((_p$visibility = p === null || p === void 0 ? void 0 : p.visibility) !== null && _p$visibility !== void 0 ? _p$visibility : 0) > 0.4;\n  });\n  if (!pts.length) return;\n  const xs = pts.map(p => p.x * W),\n    ys = pts.map(p => p.y * H);\n  const minX = Math.max(0, Math.min(...xs)),\n    maxX = Math.min(W, Math.max(...xs));\n  const minY = Math.max(0, Math.min(...ys)),\n    maxY = Math.min(H, Math.max(...ys));\n  const pad = 8;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = 3;\n  ctx.strokeRect(minX - pad, minY - pad, maxX - minX + pad * 2, maxY - minY + pad * 2);\n};\n\n/* ---------- Size recommendation (custom ranges as requested) ---------- */\nconst recommendTopSize = (chestCm, waistCm, shoulderCm) => {\n  if (!Number.isFinite(chestCm) || !Number.isFinite(waistCm) || !Number.isFinite(shoulderCm)) return null;\n  if (chestCm <= 0 || waistCm <= 0 || shoulderCm <= 0) return null;\n\n  // REALISTIC size ranges for actual human measurements\n  // Based on standard clothing sizes and your dataset availability\n  let primarySize = 'M';\n  if (chestCm < 80) primarySize = 'XXS'; // Very small frame (children/teens)\n  else if (chestCm < 85) primarySize = 'XS'; // Small frame\n  else if (chestCm < 90) primarySize = 'S'; // Small-medium frame\n  else if (chestCm < 95) primarySize = 'M'; // Medium frame (most common)\n  else if (chestCm < 100) primarySize = 'L'; // Large frame\n  else if (chestCm < 105) primarySize = 'XL'; // Extra large frame\n  else if (chestCm < 110) primarySize = 'XXL'; // 2X large frame\n  else primarySize = 'XXL'; // Maximum size available in dataset\n\n  // Secondary adjustment based on waist-to-chest ratio\n  const waistChestRatio = waistCm / chestCm;\n  let sizeAdjustment = 0;\n  if (waistChestRatio < 0.80) sizeAdjustment = -1; // slim build\n  else if (waistChestRatio > 0.90) sizeAdjustment = 1; // fuller build\n\n  // Tertiary adjustment based on shoulder-to-chest ratio\n  const shoulderChestRatio = shoulderCm / chestCm;\n  if (shoulderChestRatio > 0.60) sizeAdjustment += 1; // very broad shoulders\n  else if (shoulderChestRatio < 0.50) sizeAdjustment -= 1; // narrow shoulders\n\n  // Prevent stacked adjustments from jumping too far\n  sizeAdjustment = Math.max(-1, Math.min(1, sizeAdjustment));\n\n  // Only sizes available in dataset (XXS, XS, S, M, L, XL, XXL)\n  const sizeOrder = ['XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL'];\n  const currentIndex = Math.max(0, sizeOrder.indexOf(primarySize));\n  const adjustedIndex = Math.max(0, Math.min(sizeOrder.length - 1, currentIndex + sizeAdjustment));\n  const finalSize = sizeOrder[adjustedIndex];\n\n  // Debug logging to help troubleshoot size recommendations\n  console.log(`ðŸ” Size Calculation Debug:`, {\n    measurements: {\n      chestCm,\n      waistCm,\n      shoulderCm\n    },\n    primarySize,\n    ratios: {\n      waistChestRatio: waistChestRatio.toFixed(3),\n      shoulderChestRatio: shoulderChestRatio.toFixed(3)\n    },\n    adjustments: {\n      sizeAdjustment\n    },\n    finalSize,\n    sizeOrder: sizeOrder.join(' â†’ ')\n  });\n  return finalSize;\n};\n\n/* ---------- Optional style hint ---------- */\nconst styleHint = (chestCm, shoulderCm) => {\n  if (!chestCm || !shoulderCm) return \"\";\n  const ratio = chestCm / (shoulderCm || 1); // ~3â€“5 normal\n  if (ratio < 3.6) return \"Try regular/relaxed fits.\";\n  if (ratio > 4.6) return \"Slim or tailored fits may suit better.\";\n  return \"Regular fit is likely comfortable.\";\n};\n\n/* ---------- Error boundary ---------- */\nconst MediaPipeErrorBoundary = ({\n  children\n}) => {\n  _s();\n  const [hasError, setHasError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  if (hasError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/95 backdrop-blur-md rounded-3xl p-8 max-w-lg text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-2xl\",\n            children: \"\\u26A0\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-800 mb-4\",\n          children: \"MediaPipe Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-6\",\n          children: errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.location.reload(),\n            className: \"w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-xl font-medium\",\n            children: \"\\uD83D\\uDD04 Refresh Page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setHasError(false),\n            className: \"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium\",\n            children: \"\\uD83D\\uDEAB Dismiss\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n    onError: error => {\n      console.error(\"MediaPipe Error:\", error);\n      setErrorMessage(error.message || \"An error occurred with MediaPipe\");\n      setHasError(true);\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this);\n};\n_s(MediaPipeErrorBoundary, \"Ppbo90q2qovzt36/WmzhdCYninM=\");\n_c = MediaPipeErrorBoundary;\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false\n    };\n  }\n  static getDerivedStateFromError() {\n    return {\n      hasError: true\n    };\n  }\n  componentDidCatch(error, info) {\n    this.props.onError && this.props.onError(error, info);\n  }\n  render() {\n    return this.state.hasError ? null : this.props.children;\n  }\n}\n\n/* ---------- Page ---------- */\nexport default function Measure() {\n  _s2();\n  var _meas$chestCm, _meas$shoulderCm, _meas$upperWaistCm, _meas$chestCm2, _meas$chestCm3;\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n  const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [barPx, setBarPx] = useState(600);\n  const [cmPerPx, setCmPerPx] = useState(null);\n  const [locked, setLocked] = useState(false);\n  const [meas, setMeas] = useState(null); // { chestCm, shoulderCm, upperWaistCm, quality }\n\n  // stability settings - made more lenient for easier measurements\n  const GUIDE_MARGIN = 0.08;\n  const STABILITY_FRAMES = 8; // Reduced from 12 to 8 for easier measurement\n  const MOVEMENT_EPS = 0.025; // Increased from 0.015 to 0.025 for more tolerance\n  const recentShoulderN = useRef([]);\n  const chestBuf = useRef([]);\n  const shoulderBuf = useRef([]);\n  const waistBuf = useRef([]);\n  const getDistance = useCallback((a, b) => Math.hypot(a.x - b.x, a.y - b.y), []);\n  const stopCamera = () => {\n    try {\n      var _camRef$current, _camRef$current$stop;\n      (_camRef$current = camRef.current) === null || _camRef$current === void 0 ? void 0 : (_camRef$current$stop = _camRef$current.stop) === null || _camRef$current$stop === void 0 ? void 0 : _camRef$current$stop.call(_camRef$current);\n      const v = videoRef.current;\n      (v === null || v === void 0 ? void 0 : v.srcObject) && v.srcObject.getTracks().forEach(t => t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  };\n  const startCamera = async pose => {\n    const v = videoRef.current;\n    const camera = new Camera(v, {\n      onFrame: async () => {\n        await pose.send({\n          image: v\n        });\n      },\n      width: 1280,\n      height: 720\n    });\n    camRef.current = camera;\n    camera.start();\n  };\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    try {\n      const pose = new Pose({\n        locateFile: file => `/mediapipe/pose/${file.replace(\"simd_\", \"\")}`\n      });\n      poseRef.current = pose;\n      pose.setOptions({\n        modelComplexity: 0,\n        smoothLandmarks: true,\n        enableSegmentation: false,\n        minDetectionConfidence: 0.6,\n        minTrackingConfidence: 0.6\n      });\n      pose.onResults(res => {\n        var _Lsh$z, _Rsh$z;\n        if (locked) return;\n        const W = res.image.width,\n          H = res.image.height;\n        if (canvas.width !== W) canvas.width = W;\n        if (canvas.height !== H) canvas.height = H;\n        ctx.save();\n        ctx.clearRect(0, 0, W, H);\n        ctx.drawImage(res.image, 0, 0, W, H);\n\n        // Guide box\n        const gx = W * GUIDE_MARGIN,\n          gy = H * GUIDE_MARGIN;\n        const gW = W * (1 - GUIDE_MARGIN * 2),\n          gH = H * (1 - GUIDE_MARGIN * 2);\n        const gradient = ctx.createLinearGradient(gx, gy, gx + gW, gy + gH);\n        gradient.addColorStop(0, \"rgba(59,130,246,0.8)\");\n        gradient.addColorStop(0.5, \"rgba(16,185,129,0.8)\");\n        gradient.addColorStop(1, \"rgba(139,92,246,0.8)\");\n        ctx.strokeStyle = gradient;\n        ctx.lineWidth = 4;\n        ctx.strokeRect(gx, gy, gW, gH);\n\n        // Calibration bar\n        if (phase === \"calibrate\") {\n          const barH = 20,\n            barY = H * 0.12;\n          const barGradient = ctx.createLinearGradient((W - barPx) / 2, barY, (W - barPx) / 2 + barPx, barY);\n          barGradient.addColorStop(0, \"rgba(59,130,246,0.9)\");\n          barGradient.addColorStop(1, \"rgba(16,185,129,0.9)\");\n          ctx.fillStyle = barGradient;\n          ctx.fillRect((W - barPx) / 2, barY, barPx, barH);\n          ctx.strokeStyle = \"rgba(255,255,255,0.9)\";\n          ctx.lineWidth = 2;\n          ctx.strokeRect((W - barPx) / 2, barY, barPx, barH);\n          ctx.font = \"16px system-ui, -apple-system, sans-serif\";\n          ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n          ctx.strokeStyle = \"rgba(0,0,0,0.5)\";\n          ctx.lineWidth = 3;\n          const text = \"Match this bar to A4 width (21 cm) at chest depth\";\n          const textX = Math.max(20, (W - ctx.measureText(text).width) / 2);\n          ctx.strokeText(text, textX, barY - 15);\n          ctx.fillText(text, textX, barY - 15);\n        }\n        const lm = res.poseLandmarks;\n        if (!lm) {\n          setStatus(\"Detecting bodyâ€¦\");\n          ctx.restore();\n          return;\n        }\n        drawBBox(ctx, lm, W, H);\n        UPPER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#3B82F6\", 4, W, H));\n        LOWER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#F59E0B\", 4, W, H));\n        const vis = i => {\n          var _lm$i$visibility, _lm$i;\n          return ((_lm$i$visibility = (_lm$i = lm[i]) === null || _lm$i === void 0 ? void 0 : _lm$i.visibility) !== null && _lm$i$visibility !== void 0 ? _lm$i$visibility : 0) > 0.45;\n        };\n        const shouldersOK = vis(11) && vis(12);\n        const hipsOK = vis(23) || vis(24);\n        if (!(shouldersOK && hipsOK)) {\n          setStatus(\"Show shoulders & upper torso.\");\n          ctx.restore();\n          return;\n        }\n        const Lsh = lm[11],\n          Rsh = lm[12];\n        const Lhip = lm[23],\n          Rhip = lm[24];\n        const hip = vis(23) ? Lhip : Rhip;\n\n        // Key points\n        const shMid = {\n          x: (Lsh.x + Rsh.x) / 2,\n          y: (Lsh.y + Rsh.y) / 2\n        };\n        [{\n          point: Lsh,\n          color: \"#3B82F6\"\n        }, {\n          point: Rsh,\n          color: \"#3B82F6\"\n        }, {\n          point: shMid,\n          color: \"#10B981\"\n        }, {\n          point: hip,\n          color: \"#F59E0B\"\n        }].forEach(({\n          point,\n          color\n        }) => {\n          if (!point) return;\n          ctx.shadowColor = color;\n          ctx.shadowBlur = 15;\n          ctx.fillStyle = color;\n          ctx.beginPath();\n          ctx.arc(point.x * W, point.y * H, 8, 0, Math.PI * 2);\n          ctx.fill();\n          ctx.shadowBlur = 0;\n          ctx.fillStyle = \"white\";\n          ctx.beginPath();\n          ctx.arc(point.x * W, point.y * H, 4, 0, Math.PI * 2);\n          ctx.fill();\n        });\n\n        // Must be inside guide\n        const inside = [Lsh, Rsh, hip].every(p => p.x * W >= gx && p.x * W <= gx + gW && p.y * H >= gy && p.y * H <= gy + gH);\n        if (!inside) {\n          setStatus(\"Step back/center inside the frame.\");\n          ctx.restore();\n          return;\n        }\n        if (phase === \"calibrate\") {\n          setStatus(\"Adjust bar â†’ Set calibration.\");\n          ctx.restore();\n          return;\n        }\n        if (!cmPerPx) {\n          setStatus(\"Click Set calibration first.\");\n          ctx.restore();\n          return;\n        }\n\n        // Normalized stability\n        const shoulderWidthN = getDistance(Lsh, Rsh);\n        const torsoHeightN = getDistance(shMid, hip);\n        if (torsoHeightN <= 0) {\n          setStatus(\"Hold stillâ€¦\");\n          ctx.restore();\n          return;\n        }\n        const bufN = recentShoulderN.current;\n        bufN.push(shoulderWidthN);\n        if (bufN.length > STABILITY_FRAMES) bufN.shift();\n        const avg = bufN.reduce((a, b) => a + b, 0) / bufN.length;\n        const maxDev = Math.max(...bufN.map(v => Math.abs(v - avg)));\n\n        // ----- measurements in cm -----\n        // Yaw-correct shoulder width using z\n        const dx = (Lsh.x - Rsh.x) * W;\n        const dz = (((_Lsh$z = Lsh.z) !== null && _Lsh$z !== void 0 ? _Lsh$z : 0) - ((_Rsh$z = Rsh.z) !== null && _Rsh$z !== void 0 ? _Rsh$z : 0)) * W; // BlazePose z is roughly normalized to image width\n        const shoulderPxTrue = Math.hypot(dx, dz);\n        const shoulderCm = shoulderPxTrue * cmPerPx;\n\n        // Provisional chest from shoulder * K, with small build-based tweak later\n        let chestCmInstant = shoulderCm * CHEST_BASE_K;\n        let upperWaistCmInstant = null;\n        if (vis(23) && vis(24)) {\n          const hipFlatCm = Math.abs((Lhip.x - Rhip.x) * W) * cmPerPx;\n          upperWaistCmInstant = hipFlatCm * UPPER_WAIST_FACTOR;\n        }\n\n        // median smoothing\n        const pushMed = (ref, val, n = 15) => {\n          if (val == null) return null;\n          ref.current.push(val);\n          if (ref.current.length > n) ref.current.shift();\n          const s = [...ref.current].sort((a, b) => a - b);\n          const m = Math.floor(s.length / 2);\n          return s.length % 2 ? s[m] : (s[m - 1] + s[m]) / 2;\n        };\n        const chestMed = pushMed(chestBuf, chestCmInstant);\n        const shoulderMed = pushMed(shoulderBuf, shoulderCm);\n        const waistMed = pushMed(waistBuf, upperWaistCmInstant);\n\n        // stability: normalized shoulders + cm spread\n        const spread = chestBuf.current.length >= 6 ? Math.max(...chestBuf.current) - Math.min(...chestBuf.current) : 999; // Reduced from 8 to 6\n        const stable = bufN.length >= STABILITY_FRAMES && maxDev < MOVEMENT_EPS && spread < 3.0; // Increased from 1.8 to 3.0 for more tolerance\n\n        // LIVE DEBUG OVERLAY (after values exist)\n        try {\n          ctx.font = \"16px system-ui, -apple-system, sans-serif\";\n          ctx.fillStyle = \"white\";\n          ctx.fillText(`shoulder ~ ${shoulderCm.toFixed(1)} cm`, 20, 30);\n          ctx.fillText(`chest ~ ${(chestCmInstant || 0).toFixed(1)} cm`, 20, 52);\n          if (upperWaistCmInstant) ctx.fillText(`waist ~ ${upperWaistCmInstant.toFixed(1)} cm`, 20, 74);\n          ctx.fillText(`frames: ${bufN.length}/${STABILITY_FRAMES}`, 20, 96);\n          ctx.fillText(`deviation: ${maxDev.toFixed(3)}/${MOVEMENT_EPS}`, 20, 118);\n          if (spread !== 999) ctx.fillText(`spread: ${spread.toFixed(1)} cm`, 20, 140);\n          ctx.fillText(`cm/px ~ ${(cmPerPx !== null && cmPerPx !== void 0 ? cmPerPx : 0).toFixed(3)}`, 20, 162);\n        } catch {}\n        if (stable && chestMed && shoulderMed) {\n          // Basic yaw gate (user should face camera) - made more lenient\n          const yawDeg = Math.abs(Math.atan2(dz, dx) * 180 / Math.PI);\n          if (yawDeg > 30) {\n            setStatus(\"Turn to face the camera (â‰¤30Â°)\");\n            ctx.restore();\n            return;\n          } // Increased from 20Â° to 30Â°\n\n          // Validate that measurements are realistic using constants\n          const realisticChest = chestMed >= MIN_CHEST_CM && chestMed <= MAX_CHEST_CM;\n          const realisticShoulder = shoulderMed >= MIN_SHOULDER_CM && shoulderMed <= MAX_SHOULDER_CM;\n          if (!realisticChest || !realisticShoulder) {\n            const issue = !realisticChest ? \"chest\" : \"shoulder\";\n            const value = !realisticChest ? chestMed : shoulderMed;\n            const expected = !realisticChest ? `${MIN_CHEST_CM}-${MAX_CHEST_CM}` : `${MIN_SHOULDER_CM}-${MAX_SHOULDER_CM}`;\n            setStatus(`âš ï¸ ${issue} measurement (${value.toFixed(1)}cm) outside realistic range (${expected}cm). Recalibrate!`);\n            ctx.restore();\n            return; // Don't lock with wrong measurements\n          }\n\n          // Simple chest adjustment (kept small, Â±5%)\n          const wcr = waistMed && chestMed ? waistMed / chestMed : 0.85;\n          const adjK = Math.max(0.95, Math.min(1.05, 1 + 0.10 * (wcr - 0.85)));\n          const chestFinal = chestMed * adjK;\n          const out = {\n            chestCm: Number(chestFinal.toFixed(1)),\n            shoulderCm: Number(shoulderMed.toFixed(1)),\n            upperWaistCm: waistMed ? Number(waistMed.toFixed(1)) : undefined,\n            quality: {\n              frames: chestBuf.current.length,\n              spreadCm: Number((spread === 999 ? 0 : spread).toFixed(2))\n            }\n          };\n          setMeas(out);\n          setLocked(true);\n          setPhase(\"locked\");\n          setStatus(\"Locked âœ”ï¸\");\n          stopCamera();\n        } else {\n          setStatus(\"Hold stillâ€¦\");\n        }\n        ctx.restore();\n      });\n      startCamera(pose);\n      return () => {\n        stopCamera();\n      };\n    } catch (error) {\n      console.error(\"âŒ MediaPipe initialization failed:\", error);\n      setStatus(`MediaPipe Error: ${error.message}. Please refresh the page.`);\n      setPhase(\"error\");\n    }\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n  const setCalibration = () => {\n    if (barPx < 120) return; // slider min guard\n\n    // Calculate calibration factor\n    const next = A4_WIDTH_CM / barPx;\n\n    // Validate calibration factor is reasonable\n    if (next < 0.01 || next > 0.5) {\n      alert(\"âš ï¸ Calibration factor seems wrong. Please ensure you're holding the A4 sheet at chest level and the bar width matches exactly.\");\n      return;\n    }\n    setCmPerPx(next);\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n\n    // reset buffers\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n    console.log(`âœ… Calibration set: ${next.toFixed(4)} cm/pixel`);\n  };\n  const retake = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1â€“2 seconds.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n  const recalibrate = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  // UI helpers\n  const getStatusIcon = () => {\n    if (phase === \"locked\") return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"text-emerald-500 text-xl\",\n      children: \"\\u2705\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 36\n    }, this);\n    if (phase === \"measure\") return /*#__PURE__*/_jsxDEV(Activity, {\n      className: \"w-5 h-5 text-blue-500 animate-pulse\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 37\n    }, this);\n    return /*#__PURE__*/_jsxDEV(Target, {\n      className: \"w-5 h-5 text-amber-500\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 12\n    }, this);\n  };\n  const getPhaseColor = () => {\n    if (phase === \"locked\") return \"from-emerald-500 to-green-500\";\n    if (phase === \"measure\") return \"from-blue-500 to-cyan-500\";\n    return \"from-amber-500 to-orange-500\";\n  };\n  return /*#__PURE__*/_jsxDEV(MediaPipeErrorBoundary, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 relative overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-10 left-10 w-72 h-72 bg-blue-500/10 rounded-full blur-3xl animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-10 right-10 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse delay-1000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-2000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative z-10 flex flex-col items-center min-h-screen\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full max-w-7xl flex items-center justify-between px-6 py-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-12 h-12 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg\",\n              children: /*#__PURE__*/_jsxDEV(Sparkles, {\n                className: \"w-7 h-7 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-2xl font-bold text-white\",\n                children: \"AI Fashion Fit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-blue-200\",\n                children: \"Body Measurement System\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `bg-gradient-to-r ${getPhaseColor()} rounded-full px-6 py-3 shadow-lg backdrop-blur-sm border border-white/10`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-3 text-white\",\n                children: [getStatusIcon(), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-sm\",\n                  children: status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full max-w-6xl px-6 flex-1 flex items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative w-full bg-black/20 backdrop-blur-lg rounded-3xl overflow-hidden shadow-2xl border border-white/10\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative aspect-video\",\n              children: [/*#__PURE__*/_jsxDEV(\"video\", {\n                ref: videoRef,\n                className: \"absolute inset-0 w-full h-full object-contain bg-black rounded-3xl\",\n                autoPlay: true,\n                muted: true,\n                playsInline: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n                ref: canvasRef,\n                className: \"absolute inset-0 w-full h-full object-contain pointer-events-none\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 17\n              }, this), phase === \"calibrate\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute bottom-6 left-1/2 transform -translate-x-1/2\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-white/95 backdrop-blur-md rounded-2xl px-6 py-4 shadow-2xl border border-white/20\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(Target, {\n                        className: \"w-5 h-5 text-amber-600\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 487,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-sm font-medium text-gray-700\",\n                        children: \"A4 width calibration\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 488,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 486,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"range\",\n                      min: 120,\n                      max: 900,\n                      value: barPx,\n                      onChange: e => setBarPx(Number(e.target.value)),\n                      className: \"w-64 accent-blue-500\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 490,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: setCalibration,\n                      className: \"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white px-6 py-2 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-white text-lg\",\n                        children: \"\\u2705\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 502,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"Set Calibration\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 503,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 498,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 485,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full max-w-4xl px-6 py-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center text-white\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center space-x-2 mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(CameraIcon, {\n                  className: \"w-5 h-5 text-blue-300\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-semibold\",\n                  children: \"Instructions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-white/80 space-y-2\",\n                children: [phase === \"calibrate\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\uD83D\\uDCC4 Hold an A4 sheet at chest level and adjust the bar to match its width for accurate calibration.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 46\n                }, this), phase === \"measure\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\uD83E\\uDDCD Face the camera (\\u226420\\xB0), arms slightly away. Hold still for 1\\u20132 seconds.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 44\n                }, this), phase === \"locked\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u2705 Measurements captured successfully! You can retake or save.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 43\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 11\n        }, this), phase === \"locked\" && meas && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full max-w-4xl px-6 py-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/95 backdrop-blur-md rounded-2xl p-6 border border-gray-200 shadow-xl\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center text-gray-800\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-bold mb-4\",\n                children: \"\\uD83D\\uDCCA Measurement Results\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-blue-50 rounded-xl p-4 border border-blue-200\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-2xl font-bold text-blue-600\",\n                    children: ((_meas$chestCm = meas.chestCm) === null || _meas$chestCm === void 0 ? void 0 : _meas$chestCm.toFixed(1)) || \"N/A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 539,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm text-blue-500\",\n                    children: \"Chest (cm)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 540,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 538,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-emerald-50 rounded-xl p-4 border border-emerald-200\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-2xl font-bold text-emerald-600\",\n                    children: ((_meas$shoulderCm = meas.shoulderCm) === null || _meas$shoulderCm === void 0 ? void 0 : _meas$shoulderCm.toFixed(1)) || \"N/A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 543,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm text-emerald-500\",\n                    children: \"Shoulder (cm)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 544,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 542,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-purple-50 rounded-xl p-4 border border-purple-200\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-2xl font-bold text-purple-600\",\n                    children: ((_meas$upperWaistCm = meas.upperWaistCm) === null || _meas$upperWaistCm === void 0 ? void 0 : _meas$upperWaistCm.toFixed(1)) || \"N/A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 547,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm text-purple-500\",\n                    children: \"Waist (cm)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 548,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 546,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gradient-to-r from-blue-50 to-emerald-50 rounded-xl p-4 mb-6 border border-blue-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-lg font-semibold text-gray-700 mb-2\",\n                  children: \"Recommended Size\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 553,\n                  columnNumber: 22\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-3xl font-bold bg-gradient-to-r from-blue-600 to-emerald-600 bg-clip-text text-transparent\",\n                  children: recommendTopSize(meas.chestCm, meas.upperWaistCm, meas.shoulderCm)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 554,\n                  columnNumber: 22\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-3 p-3 bg-gray-50 rounded-lg border border-gray-200\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm text-gray-700\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-medium mb-2\",\n                      children: \"\\uD83D\\uDD0D Size Calculation Breakdown:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 561,\n                      columnNumber: 26\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"grid grid-cols-2 gap-2 text-xs\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"font-medium\",\n                          children: \"Chest:\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 564,\n                          columnNumber: 30\n                        }, this), \" \", (_meas$chestCm2 = meas.chestCm) === null || _meas$chestCm2 === void 0 ? void 0 : _meas$chestCm2.toFixed(1), \" cm\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 565,\n                          columnNumber: 30\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-blue-600\",\n                          children: meas.chestCm < 80 ? 'â†’ XXS' : meas.chestCm < 85 ? 'â†’ XS' : meas.chestCm < 90 ? 'â†’ S' : meas.chestCm < 95 ? 'â†’ M' : meas.chestCm < 100 ? 'â†’ L' : meas.chestCm < 105 ? 'â†’ XL' : meas.chestCm < 110 ? 'â†’ XXL' : 'â†’ XXL'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 566,\n                          columnNumber: 30\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 563,\n                        columnNumber: 28\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"font-medium\",\n                          children: \"Base Size:\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 577,\n                          columnNumber: 30\n                        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 578,\n                          columnNumber: 30\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-green-600 font-medium\",\n                          children: meas.chestCm < 80 ? 'XXS' : meas.chestCm < 85 ? 'XS' : meas.chestCm < 90 ? 'S' : meas.chestCm < 95 ? 'M' : meas.chestCm < 100 ? 'L' : meas.chestCm < 105 ? 'XL' : meas.chestCm < 110 ? 'XXL' : 'XXL'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 579,\n                          columnNumber: 30\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 576,\n                        columnNumber: 28\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 562,\n                      columnNumber: 26\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mt-2 text-xs text-gray-600\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium\",\n                        children: \"Size Ranges:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 591,\n                        columnNumber: 28\n                      }, this), \" <80=XXS, 80-85=XS, 85-90=S, 90-95=M, 95-100=L, 100-105=XL, 105-110=XXL, >110=XXL\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 590,\n                      columnNumber: 26\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mt-3 p-2 bg-red-50 rounded border border-red-200\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-red-700\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"font-medium mb-1\",\n                          children: \"\\u26A0\\uFE0F CALIBRATION ISSUE DETECTED:\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 597,\n                          columnNumber: 30\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: [\"\\u2022 Your chest: \", (_meas$chestCm3 = meas.chestCm) === null || _meas$chestCm3 === void 0 ? void 0 : _meas$chestCm3.toFixed(1), \" cm\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 598,\n                          columnNumber: 30\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: \"\\u2022 Expected real-world: ~80-120 cm\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 599,\n                          columnNumber: 30\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: [\"\\u2022 Current scale factor: ~\", ((meas.chestCm || 1) / 100).toFixed(2), \"x\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 600,\n                          columnNumber: 30\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-red-600 font-medium\",\n                          children: \"\\uD83D\\uDEA8 Measurements are too small - recalibrate with A4 sheet!\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 601,\n                          columnNumber: 30\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-xs mt-1\",\n                          children: \"\\uD83D\\uDCA1 Tip: Hold A4 paper at chest level, match bar width exactly\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 602,\n                          columnNumber: 30\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 596,\n                        columnNumber: 28\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 595,\n                      columnNumber: 26\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 560,\n                    columnNumber: 24\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 559,\n                  columnNumber: 22\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 38\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col sm:flex-row gap-3 justify-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: retake,\n                  className: \"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-gray-300\",\n                  children: \"\\uD83D\\uDD04 Retake\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 610,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: recalibrate,\n                  className: \"bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-blue-300\",\n                  children: \"\\uD83C\\uDFAF Recalibrate\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 611,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    const size = recommendTopSize(meas.chestCm, meas.upperWaistCm, meas.shoulderCm);\n                    if (size) {\n                      const measurementData = encodeURIComponent(JSON.stringify({\n                        size,\n                        gender: \"Men\",\n                        measurements: {\n                          chestCm: meas.chestCm,\n                          shoulderCm: meas.shoulderCm,\n                          upperWaistCm: meas.upperWaistCm\n                        }\n                      }));\n                      window.location.href = `/recommendations?data=${measurementData}`;\n                    }\n                  },\n                  className: \"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-300 shadow-lg\",\n                  children: \"\\u2728 Get Recommendations\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 612,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 609,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 443,\n    columnNumber: 5\n  }, this);\n}\n_s2(Measure, \"yhHL4ee3dYo+l2GCdGjeQTkw/U4=\");\n_c2 = Measure;\nvar _c, _c2;\n$RefreshReg$(_c, \"MediaPipeErrorBoundary\");\n$RefreshReg$(_c2, \"Measure\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","Pose","Camera","CameraIcon","Sparkles","Activity","Target","jsxDEV","_jsxDEV","A4_WIDTH_CM","UPPER_WAIST_FACTOR","CHEST_BASE_K","MIN_CHEST_CM","MAX_CHEST_CM","MIN_SHOULDER_CM","MAX_SHOULDER_CM","UPPER","LOWER","drawSeg","ctx","lm","a","b","color","width","W","H","_A$visibility","_B$visibility","A","B","visibility","strokeStyle","lineWidth","beginPath","moveTo","x","y","lineTo","stroke","drawBBox","pts","filter","p","_p$visibility","length","xs","map","ys","minX","Math","max","min","maxX","minY","maxY","pad","strokeRect","recommendTopSize","chestCm","waistCm","shoulderCm","Number","isFinite","primarySize","waistChestRatio","sizeAdjustment","shoulderChestRatio","sizeOrder","currentIndex","indexOf","adjustedIndex","finalSize","console","log","measurements","ratios","toFixed","adjustments","join","styleHint","ratio","MediaPipeErrorBoundary","children","_s","hasError","setHasError","errorMessage","setErrorMessage","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","ErrorBoundary","onError","error","message","_c","Component","constructor","props","state","getDerivedStateFromError","componentDidCatch","info","render","Measure","_s2","_meas$chestCm","_meas$shoulderCm","_meas$upperWaistCm","_meas$chestCm2","_meas$chestCm3","videoRef","canvasRef","poseRef","camRef","phase","setPhase","status","setStatus","barPx","setBarPx","cmPerPx","setCmPerPx","locked","setLocked","meas","setMeas","GUIDE_MARGIN","STABILITY_FRAMES","MOVEMENT_EPS","recentShoulderN","chestBuf","shoulderBuf","waistBuf","getDistance","hypot","stopCamera","_camRef$current","_camRef$current$stop","current","stop","call","v","srcObject","getTracks","forEach","t","startCamera","pose","camera","onFrame","send","image","height","start","canvas","getContext","locateFile","file","replace","setOptions","modelComplexity","smoothLandmarks","enableSegmentation","minDetectionConfidence","minTrackingConfidence","onResults","res","_Lsh$z","_Rsh$z","save","clearRect","drawImage","gx","gy","gW","gH","gradient","createLinearGradient","addColorStop","barH","barY","barGradient","fillStyle","fillRect","font","text","textX","measureText","strokeText","fillText","poseLandmarks","restore","vis","i","_lm$i$visibility","_lm$i","shouldersOK","hipsOK","Lsh","Rsh","Lhip","Rhip","hip","shMid","point","shadowColor","shadowBlur","arc","PI","fill","inside","every","shoulderWidthN","torsoHeightN","bufN","push","shift","avg","reduce","maxDev","abs","dx","dz","z","shoulderPxTrue","chestCmInstant","upperWaistCmInstant","hipFlatCm","pushMed","ref","val","n","s","sort","m","floor","chestMed","shoulderMed","waistMed","spread","stable","yawDeg","atan2","realisticChest","realisticShoulder","issue","value","expected","wcr","adjK","chestFinal","out","upperWaistCm","undefined","quality","frames","spreadCm","setCalibration","next","alert","retake","recalibrate","getStatusIcon","getPhaseColor","autoPlay","muted","playsInline","type","onChange","e","target","size","measurementData","encodeURIComponent","JSON","stringify","gender","href","_c2","$RefreshReg$"],"sources":["/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx"],"sourcesContent":["// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { Camera as CameraIcon, Sparkles, Activity, Target } from \"lucide-react\";\n\n/* ---------- Calibration & Measurement Constants ---------- */\nconst A4_WIDTH_CM = 21.0;          // A4 paper width in cm\nconst UPPER_WAIST_FACTOR = 0.90;   // hip width â‰ˆ a bit wider than upper waist\n\n/* Chest estimation factor - adjusted for better accuracy */\nconst CHEST_BASE_K = 2.2;          // Increased from 1.78 for more realistic chest measurements\n\n/* Realistic measurement ranges for validation */\nconst MIN_CHEST_CM = 60;           // Minimum realistic chest measurement\nconst MAX_CHEST_CM = 150;          // Maximum realistic chest measurement\nconst MIN_SHOULDER_CM = 30;        // Minimum realistic shoulder measurement\nconst MAX_SHOULDER_CM = 80;        // Maximum realistic shoulder measurement\n\n/* ---------- Overlay helpers ---------- */\nconst UPPER = [\n  [0,1],[1,2],[2,3],[3,7],\n  [0,11],[0,12],\n  [11,13],[13,15],\n  [12,14],[14,16],\n  [11,12],\n  [11,23],[12,24],\n];\nconst LOWER = [\n  [23,25],[25,27],[27,31],\n  [24,26],[26,28],[28,32],\n  [23,24],\n];\nconst drawSeg = (ctx, lm, a, b, color, width, W, H) => {\n  const A = lm[a], B = lm[b];\n  if (!A || !B) return;\n  if ((A.visibility ?? 0) < 0.4 || (B.visibility ?? 0) < 0.4) return;\n  ctx.strokeStyle = color; ctx.lineWidth = width;\n  ctx.beginPath(); ctx.moveTo(A.x*W, A.y*H); ctx.lineTo(B.x*W, B.y*H); ctx.stroke();\n};\nconst drawBBox = (ctx, lm, W, H, color=\"rgba(16,185,129,0.9)\") => {\n  const pts = lm.filter(p => (p?.visibility ?? 0) > 0.4);\n  if (!pts.length) return;\n  const xs = pts.map(p=>p.x*W), ys = pts.map(p=>p.y*H);\n  const minX = Math.max(0, Math.min(...xs)), maxX = Math.min(W, Math.max(...xs));\n  const minY = Math.max(0, Math.min(...ys)), maxY = Math.min(H, Math.max(...ys));\n  const pad = 8; ctx.strokeStyle = color; ctx.lineWidth = 3;\n  ctx.strokeRect(minX-pad, minY-pad, (maxX-minX)+pad*2, (maxY-minY)+pad*2);\n};\n\n/* ---------- Size recommendation (custom ranges as requested) ---------- */\nconst recommendTopSize = (chestCm, waistCm, shoulderCm) => {\n  if (!Number.isFinite(chestCm) || !Number.isFinite(waistCm) || !Number.isFinite(shoulderCm)) return null;\n  if (chestCm <= 0 || waistCm <= 0 || shoulderCm <= 0) return null;\n\n  // REALISTIC size ranges for actual human measurements\n  // Based on standard clothing sizes and your dataset availability\n  let primarySize = 'M';\n  if (chestCm < 80) primarySize = 'XXS';      // Very small frame (children/teens)\n  else if (chestCm < 85) primarySize = 'XS';   // Small frame\n  else if (chestCm < 90) primarySize = 'S';    // Small-medium frame\n  else if (chestCm < 95) primarySize = 'M';    // Medium frame (most common)\n  else if (chestCm < 100) primarySize = 'L';   // Large frame\n  else if (chestCm < 105) primarySize = 'XL';  // Extra large frame\n  else if (chestCm < 110) primarySize = 'XXL'; // 2X large frame\n  else primarySize = 'XXL';                    // Maximum size available in dataset\n\n  // Secondary adjustment based on waist-to-chest ratio\n  const waistChestRatio = waistCm / chestCm;\n  let sizeAdjustment = 0;\n  if (waistChestRatio < 0.80) sizeAdjustment = -1; // slim build\n  else if (waistChestRatio > 0.90) sizeAdjustment = 1; // fuller build\n\n  // Tertiary adjustment based on shoulder-to-chest ratio\n  const shoulderChestRatio = shoulderCm / chestCm;\n  if (shoulderChestRatio > 0.60) sizeAdjustment += 1; // very broad shoulders\n  else if (shoulderChestRatio < 0.50) sizeAdjustment -= 1; // narrow shoulders\n\n  // Prevent stacked adjustments from jumping too far\n  sizeAdjustment = Math.max(-1, Math.min(1, sizeAdjustment));\n\n  // Only sizes available in dataset (XXS, XS, S, M, L, XL, XXL)\n  const sizeOrder = ['XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL'];\n  const currentIndex = Math.max(0, sizeOrder.indexOf(primarySize));\n  const adjustedIndex = Math.max(0, Math.min(sizeOrder.length - 1, currentIndex + sizeAdjustment));\n\n  const finalSize = sizeOrder[adjustedIndex];\n\n  // Debug logging to help troubleshoot size recommendations\n  console.log(`ðŸ” Size Calculation Debug:`, {\n    measurements: { chestCm, waistCm, shoulderCm },\n    primarySize,\n    ratios: {\n      waistChestRatio: waistChestRatio.toFixed(3),\n      shoulderChestRatio: shoulderChestRatio.toFixed(3)\n    },\n    adjustments: { sizeAdjustment },\n    finalSize,\n    sizeOrder: sizeOrder.join(' â†’ ')\n  });\n\n  return finalSize;\n};\n\n/* ---------- Optional style hint ---------- */\nconst styleHint = (chestCm, shoulderCm) => {\n  if (!chestCm || !shoulderCm) return \"\";\n  const ratio = chestCm / (shoulderCm || 1); // ~3â€“5 normal\n  if (ratio < 3.6) return \"Try regular/relaxed fits.\";\n  if (ratio > 4.6) return \"Slim or tailored fits may suit better.\";\n  return \"Regular fit is likely comfortable.\";\n};\n\n/* ---------- Error boundary ---------- */\nconst MediaPipeErrorBoundary = ({ children }) => {\n  const [hasError, setHasError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  if (hasError) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 flex items-center justify-center\">\n        <div className=\"bg-white/95 backdrop-blur-md rounded-3xl p-8 max-w-lg text-center\">\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <span className=\"text-2xl\">âš ï¸</span>\n          </div>\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">MediaPipe Error</h2>\n          <p className=\"text-gray-600 mb-6\">{errorMessage}</p>\n          <div className=\"space-y-3\">\n            <button onClick={() => window.location.reload()} className=\"w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-xl font-medium\">ðŸ”„ Refresh Page</button>\n            <button onClick={() => setHasError(false)} className=\"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium\">ðŸš« Dismiss</button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  return (\n    <ErrorBoundary\n      onError={(error) => {\n        console.error(\"MediaPipe Error:\", error);\n        setErrorMessage(error.message || \"An error occurred with MediaPipe\");\n        setHasError(true);\n      }}\n    >\n      {children}\n    </ErrorBoundary>\n  );\n};\nclass ErrorBoundary extends React.Component {\n  constructor(props){ super(props); this.state = { hasError:false }; }\n  static getDerivedStateFromError(){ return { hasError:true }; }\n  componentDidCatch(error, info){ this.props.onError && this.props.onError(error, info); }\n  render(){ return this.state.hasError ? null : this.props.children; }\n}\n\n/* ---------- Page ---------- */\nexport default function Measure() {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n\n  const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [barPx, setBarPx] = useState(600);\n  const [cmPerPx, setCmPerPx] = useState(null);\n\n  const [locked, setLocked] = useState(false);\n  const [meas, setMeas] = useState(null); // { chestCm, shoulderCm, upperWaistCm, quality }\n\n  // stability settings - made more lenient for easier measurements\n  const GUIDE_MARGIN = 0.08;\n  const STABILITY_FRAMES = 8;  // Reduced from 12 to 8 for easier measurement\n  const MOVEMENT_EPS = 0.025;  // Increased from 0.015 to 0.025 for more tolerance\n  const recentShoulderN = useRef([]);\n  const chestBuf = useRef([]);\n  const shoulderBuf = useRef([]);\n  const waistBuf = useRef([]);\n\n  const getDistance = useCallback((a,b)=>Math.hypot(a.x-b.x,a.y-b.y),[]);\n\n  const stopCamera = () => {\n    try {\n      camRef.current?.stop?.();\n      const v = videoRef.current;\n      v?.srcObject && v.srcObject.getTracks().forEach(t=>t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  };\n\n  const startCamera = async (pose) => {\n    const v = videoRef.current;\n    const camera = new Camera(v, {\n      onFrame: async () => { await pose.send({ image: v }); },\n      width: 1280, height: 720,\n    });\n    camRef.current = camera;\n    camera.start();\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    try {\n      const pose = new Pose({\n        locateFile: (file) => `/mediapipe/pose/${file.replace(\"simd_\", \"\")}`,\n      });\n      poseRef.current = pose;\n\n      pose.setOptions({\n        modelComplexity: 0,\n        smoothLandmarks: true,\n        enableSegmentation: false,\n        minDetectionConfidence: 0.6,\n        minTrackingConfidence: 0.6,\n      });\n\n      pose.onResults((res) => {\n        if (locked) return;\n\n        const W = res.image.width, H = res.image.height;\n        if (canvas.width !== W) canvas.width = W;\n        if (canvas.height !== H) canvas.height = H;\n\n        ctx.save();\n        ctx.clearRect(0,0,W,H);\n        ctx.drawImage(res.image,0,0,W,H);\n\n        // Guide box\n        const gx = W*GUIDE_MARGIN, gy = H*GUIDE_MARGIN;\n        const gW = W*(1-GUIDE_MARGIN*2), gH = H*(1-GUIDE_MARGIN*2);\n        const gradient = ctx.createLinearGradient(gx, gy, gx + gW, gy + gH);\n        gradient.addColorStop(0, \"rgba(59,130,246,0.8)\");\n        gradient.addColorStop(0.5, \"rgba(16,185,129,0.8)\");\n        gradient.addColorStop(1, \"rgba(139,92,246,0.8)\");\n        ctx.strokeStyle = gradient; ctx.lineWidth = 4; ctx.strokeRect(gx, gy, gW, gH);\n\n        // Calibration bar\n        if (phase === \"calibrate\") {\n          const barH = 20, barY = H*0.12;\n          const barGradient = ctx.createLinearGradient((W-barPx)/2, barY, (W-barPx)/2 + barPx, barY);\n          barGradient.addColorStop(0, \"rgba(59,130,246,0.9)\");\n          barGradient.addColorStop(1, \"rgba(16,185,129,0.9)\");\n          ctx.fillStyle = barGradient; ctx.fillRect((W-barPx)/2, barY, barPx, barH);\n          ctx.strokeStyle = \"rgba(255,255,255,0.9)\"; ctx.lineWidth = 2;\n          ctx.strokeRect((W-barPx)/2, barY, barPx, barH);\n          ctx.font = \"16px system-ui, -apple-system, sans-serif\";\n          ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n          ctx.strokeStyle = \"rgba(0,0,0,0.5)\"; ctx.lineWidth = 3;\n          const text = \"Match this bar to A4 width (21 cm) at chest depth\";\n          const textX = Math.max(20, (W - ctx.measureText(text).width) / 2);\n          ctx.strokeText(text, textX, barY - 15); ctx.fillText(text, textX, barY - 15);\n        }\n\n        const lm = res.poseLandmarks;\n        if (!lm) { setStatus(\"Detecting bodyâ€¦\"); ctx.restore(); return; }\n\n        drawBBox(ctx, lm, W, H);\n        UPPER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#3B82F6\",4,W,H));\n        LOWER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#F59E0B\",4,W,H));\n\n        const vis = (i) => (lm[i]?.visibility ?? 0) > 0.45;\n        const shouldersOK = vis(11) && vis(12);\n        const hipsOK = vis(23) || vis(24);\n        if (!(shouldersOK && hipsOK)) { setStatus(\"Show shoulders & upper torso.\"); ctx.restore(); return; }\n\n        const Lsh = lm[11], Rsh = lm[12];\n        const Lhip = lm[23], Rhip = lm[24];\n        const hip = vis(23) ? Lhip : Rhip;\n\n        // Key points\n        const shMid = { x:(Lsh.x+Rsh.x)/2, y:(Lsh.y+Rsh.y)/2 };\n        [{point:Lsh,color:\"#3B82F6\"},{point:Rsh,color:\"#3B82F6\"},{point:shMid,color:\"#10B981\"},{point:hip,color:\"#F59E0B\"}]\n          .forEach(({point,color})=>{\n            if (!point) return;\n            ctx.shadowColor = color; ctx.shadowBlur = 15;\n            ctx.fillStyle = color; ctx.beginPath();\n            ctx.arc(point.x*W, point.y*H, 8, 0, Math.PI*2); ctx.fill();\n            ctx.shadowBlur = 0; ctx.fillStyle = \"white\"; ctx.beginPath();\n            ctx.arc(point.x*W, point.y*H, 4, 0, Math.PI*2); ctx.fill();\n          });\n\n        // Must be inside guide\n        const inside = [Lsh,Rsh,hip].every(p => p.x*W>=gx && p.x*W<=gx+gW && p.y*H>=gy && p.y*H<=gy+gH);\n        if (!inside) { setStatus(\"Step back/center inside the frame.\"); ctx.restore(); return; }\n\n        if (phase === \"calibrate\") { setStatus(\"Adjust bar â†’ Set calibration.\"); ctx.restore(); return; }\n        if (!cmPerPx) { setStatus(\"Click Set calibration first.\"); ctx.restore(); return; }\n\n        // Normalized stability\n        const shoulderWidthN = getDistance(Lsh,Rsh);\n        const torsoHeightN = getDistance(shMid, hip);\n        if (torsoHeightN <= 0) { setStatus(\"Hold stillâ€¦\"); ctx.restore(); return; }\n        const bufN = recentShoulderN.current;\n        bufN.push(shoulderWidthN); if (bufN.length > STABILITY_FRAMES) bufN.shift();\n        const avg = bufN.reduce((a,b)=>a+b,0)/bufN.length;\n        const maxDev = Math.max(...bufN.map(v=>Math.abs(v-avg)));\n\n        // ----- measurements in cm -----\n        // Yaw-correct shoulder width using z\n        const dx = (Lsh.x - Rsh.x) * W;\n        const dz = ((Lsh.z ?? 0) - (Rsh.z ?? 0)) * W; // BlazePose z is roughly normalized to image width\n        const shoulderPxTrue = Math.hypot(dx, dz);\n        const shoulderCm = shoulderPxTrue * cmPerPx;\n\n        // Provisional chest from shoulder * K, with small build-based tweak later\n        let chestCmInstant = shoulderCm * CHEST_BASE_K;\n\n        let upperWaistCmInstant = null;\n        if (vis(23) && vis(24)) {\n          const hipFlatCm = Math.abs((Lhip.x - Rhip.x) * W) * cmPerPx;\n          upperWaistCmInstant = hipFlatCm * UPPER_WAIST_FACTOR;\n        }\n\n        // median smoothing\n        const pushMed = (ref, val, n=15) => {\n          if (val==null) return null;\n          ref.current.push(val);\n          if (ref.current.length>n) ref.current.shift();\n          const s=[...ref.current].sort((a,b)=>a-b);\n          const m=Math.floor(s.length/2);\n          return s.length%2 ? s[m] : (s[m-1]+s[m])/2;\n        };\n        const chestMed = pushMed(chestBuf, chestCmInstant);\n        const shoulderMed = pushMed(shoulderBuf, shoulderCm);\n        const waistMed = pushMed(waistBuf, upperWaistCmInstant);\n\n        // stability: normalized shoulders + cm spread\n        const spread = chestBuf.current.length>=6 ? Math.max(...chestBuf.current)-Math.min(...chestBuf.current) : 999; // Reduced from 8 to 6\n        const stable = bufN.length>=STABILITY_FRAMES && maxDev < MOVEMENT_EPS && spread < 3.0; // Increased from 1.8 to 3.0 for more tolerance\n\n        // LIVE DEBUG OVERLAY (after values exist)\n        try {\n          ctx.font = \"16px system-ui, -apple-system, sans-serif\";\n          ctx.fillStyle = \"white\";\n          ctx.fillText(`shoulder ~ ${shoulderCm.toFixed(1)} cm`, 20, 30);\n          ctx.fillText(`chest ~ ${(chestCmInstant || 0).toFixed(1)} cm`, 20, 52);\n          if (upperWaistCmInstant) ctx.fillText(`waist ~ ${upperWaistCmInstant.toFixed(1)} cm`, 20, 74);\n          ctx.fillText(`frames: ${bufN.length}/${STABILITY_FRAMES}`, 20, 96);\n          ctx.fillText(`deviation: ${maxDev.toFixed(3)}/${MOVEMENT_EPS}`, 20, 118);\n          if (spread !== 999) ctx.fillText(`spread: ${spread.toFixed(1)} cm`, 20, 140);\n          ctx.fillText(`cm/px ~ ${(cmPerPx ?? 0).toFixed(3)}`, 20, 162);\n        } catch {}\n\n        if (stable && chestMed && shoulderMed) {\n          // Basic yaw gate (user should face camera) - made more lenient\n          const yawDeg = Math.abs(Math.atan2(dz, dx) * 180/Math.PI);\n          if (yawDeg > 30) { setStatus(\"Turn to face the camera (â‰¤30Â°)\"); ctx.restore(); return; } // Increased from 20Â° to 30Â°\n\n          // Validate that measurements are realistic using constants\n          const realisticChest = chestMed >= MIN_CHEST_CM && chestMed <= MAX_CHEST_CM;\n          const realisticShoulder = shoulderMed >= MIN_SHOULDER_CM && shoulderMed <= MAX_SHOULDER_CM;\n          \n          if (!realisticChest || !realisticShoulder) {\n            const issue = !realisticChest ? \"chest\" : \"shoulder\";\n            const value = !realisticChest ? chestMed : shoulderMed;\n            const expected = !realisticChest ? `${MIN_CHEST_CM}-${MAX_CHEST_CM}` : `${MIN_SHOULDER_CM}-${MAX_SHOULDER_CM}`;\n            \n            setStatus(`âš ï¸ ${issue} measurement (${value.toFixed(1)}cm) outside realistic range (${expected}cm). Recalibrate!`);\n            ctx.restore(); return; // Don't lock with wrong measurements\n          }\n          \n          // Simple chest adjustment (kept small, Â±5%)\n          const wcr = waistMed && chestMed ? waistMed/chestMed : 0.85;\n          const adjK = Math.max(0.95, Math.min(1.05, 1 + 0.10*(wcr - 0.85)));\n          const chestFinal = chestMed * adjK;\n\n          const out = {\n            chestCm: Number(chestFinal.toFixed(1)),\n            shoulderCm: Number(shoulderMed.toFixed(1)),\n            upperWaistCm: waistMed ? Number(waistMed.toFixed(1)) : undefined,\n            quality: { frames: chestBuf.current.length, spreadCm: Number((spread===999?0:spread).toFixed(2)) }\n          };\n          setMeas(out);\n          setLocked(true);\n          setPhase(\"locked\");\n          setStatus(\"Locked âœ”ï¸\");\n          stopCamera();\n        } else {\n          setStatus(\"Hold stillâ€¦\");\n        }\n\n        ctx.restore();\n      });\n\n      startCamera(pose);\n      return () => { stopCamera(); };\n    } catch (error) {\n      console.error(\"âŒ MediaPipe initialization failed:\", error);\n      setStatus(`MediaPipe Error: ${error.message}. Please refresh the page.`);\n      setPhase(\"error\");\n    }\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n\n  const setCalibration = () => {\n    if (barPx < 120) return; // slider min guard\n    \n    // Calculate calibration factor\n    const next = A4_WIDTH_CM / barPx;\n    \n    // Validate calibration factor is reasonable\n    if (next < 0.01 || next > 0.5) {\n      alert(\"âš ï¸ Calibration factor seems wrong. Please ensure you're holding the A4 sheet at chest level and the bar width matches exactly.\");\n      return;\n    }\n    \n    setCmPerPx(next);\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n    \n    // reset buffers\n    chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n    \n    console.log(`âœ… Calibration set: ${next.toFixed(4)} cm/pixel`);\n  };\n\n  const retake = () => {\n    setLocked(false); setMeas(null); setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1â€“2 seconds.\");\n    chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  const recalibrate = () => {\n    setLocked(false); setMeas(null); setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  // UI helpers\n  const getStatusIcon = () => {\n    if (phase === \"locked\") return <span className=\"text-emerald-500 text-xl\">âœ…</span>;\n    if (phase === \"measure\") return <Activity className=\"w-5 h-5 text-blue-500 animate-pulse\" />;\n    return <Target className=\"w-5 h-5 text-amber-500\" />;\n  };\n  const getPhaseColor = () => {\n    if (phase === \"locked\") return \"from-emerald-500 to-green-500\";\n    if (phase === \"measure\") return \"from-blue-500 to-cyan-500\";\n    return \"from-amber-500 to-orange-500\";\n  };\n\n  return (\n    <MediaPipeErrorBoundary>\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 relative overflow-hidden\">\n        {/* Animated Background */}\n        <div className=\"absolute inset-0\">\n          <div className=\"absolute top-10 left-10 w-72 h-72 bg-blue-500/10 rounded-full blur-3xl animate-pulse\"></div>\n          <div className=\"absolute bottom-10 right-10 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-2000\"></div>\n        </div>\n\n        <div className=\"relative z-10 flex flex-col items-center min-h-screen\">\n          {/* Header */}\n          <div className=\"w-full max-w-7xl flex items-center justify-between px-6 py-6\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg\">\n                <Sparkles className=\"w-7 h-7 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-bold text-white\">AI Fashion Fit</h1>\n                <p className=\"text-sm text-blue-200\">Body Measurement System</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-3\">\n              <div className={`bg-gradient-to-r ${getPhaseColor()} rounded-full px-6 py-3 shadow-lg backdrop-blur-sm border border-white/10`}>\n                <div className=\"flex items-center space-x-3 text-white\">\n                  {getStatusIcon()}\n                  <span className=\"font-medium text-sm\">{status}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Camera Section */}\n          <div className=\"w-full max-w-6xl px-6 flex-1 flex items-center\">\n            <div className=\"relative w-full bg-black/20 backdrop-blur-lg rounded-3xl overflow-hidden shadow-2xl border border-white/10\">\n              <div className=\"relative aspect-video\">\n                <video ref={videoRef} className=\"absolute inset-0 w-full h-full object-contain bg-black rounded-3xl\" autoPlay muted playsInline />\n                <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full object-contain pointer-events-none\" />\n\n                {/* Calibration UI */}\n                {phase === \"calibrate\" && (\n                  <div className=\"absolute bottom-6 left-1/2 transform -translate-x-1/2\">\n                    <div className=\"bg-white/95 backdrop-blur-md rounded-2xl px-6 py-4 shadow-2xl border border-white/20\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"flex items-center space-x-2\">\n                          <Target className=\"w-5 h-5 text-amber-600\" />\n                          <span className=\"text-sm font-medium text-gray-700\">A4 width calibration</span>\n                        </div>\n                        <input\n                          type=\"range\"\n                          min={120}\n                          max={900}\n                          value={barPx}\n                          onChange={(e)=>setBarPx(Number(e.target.value))}\n                          className=\"w-64 accent-blue-500\"\n                        />\n                        <button\n                          onClick={setCalibration}\n                          className=\"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white px-6 py-2 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center space-x-2\"\n                        >\n                          <span className=\"text-white text-lg\">âœ…</span>\n                          <span>Set Calibration</span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Instructions */}\n          <div className=\"w-full max-w-4xl px-6 py-4\">\n            <div className=\"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20\">\n              <div className=\"text-center text-white\">\n                <div className=\"flex items-center justify-center space-x-2 mb-3\">\n                  <CameraIcon className=\"w-5 h-5 text-blue-300\" />\n                  <h3 className=\"font-semibold\">Instructions</h3>\n                </div>\n                <div className=\"text-sm text-white/80 space-y-2\">\n                  {phase === \"calibrate\" && (<p>ðŸ“„ Hold an A4 sheet at chest level and adjust the bar to match its width for accurate calibration.</p>)}\n                  {phase === \"measure\" && (<p>ðŸ§ Face the camera (â‰¤20Â°), arms slightly away. Hold still for 1â€“2 seconds.</p>)}\n                  {phase === \"locked\" && (<p>âœ… Measurements captured successfully! You can retake or save.</p>)}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Results */}\n          {phase === \"locked\" && meas && (\n            <div className=\"w-full max-w-4xl px-6 py-6\">\n              <div className=\"bg-white/95 backdrop-blur-md rounded-2xl p-6 border border-gray-200 shadow-xl\">\n                <div className=\"text-center text-gray-800\">\n                  <h3 className=\"text-xl font-bold mb-4\">ðŸ“Š Measurement Results</h3>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n                    <div className=\"bg-blue-50 rounded-xl p-4 border border-blue-200\">\n                      <div className=\"text-2xl font-bold text-blue-600\">{meas.chestCm?.toFixed(1) || \"N/A\"}</div>\n                      <div className=\"text-sm text-blue-500\">Chest (cm)</div>\n                    </div>\n                    <div className=\"bg-emerald-50 rounded-xl p-4 border border-emerald-200\">\n                      <div className=\"text-2xl font-bold text-emerald-600\">{meas.shoulderCm?.toFixed(1) || \"N/A\"}</div>\n                      <div className=\"text-sm text-emerald-500\">Shoulder (cm)</div>\n                    </div>\n                    <div className=\"bg-purple-50 rounded-xl p-4 border border-purple-200\">\n                      <div className=\"text-2xl font-bold text-purple-600\">{meas.upperWaistCm?.toFixed(1) || \"N/A\"}</div>\n                      <div className=\"text-sm text-purple-500\">Waist (cm)</div>\n                    </div>\n                  </div>\n\n                                     <div className=\"bg-gradient-to-r from-blue-50 to-emerald-50 rounded-xl p-4 mb-6 border border-blue-200\">\n                     <div className=\"text-lg font-semibold text-gray-700 mb-2\">Recommended Size</div>\n                     <div className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-emerald-600 bg-clip-text text-transparent\">\n                       {recommendTopSize(meas.chestCm, meas.upperWaistCm, meas.shoulderCm)}\n                     </div>\n                     \n                     {/* Size Calculation Debug Info */}\n                     <div className=\"mt-3 p-3 bg-gray-50 rounded-lg border border-gray-200\">\n                       <div className=\"text-sm text-gray-700\">\n                         <div className=\"font-medium mb-2\">ðŸ” Size Calculation Breakdown:</div>\n                         <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                           <div>\n                             <span className=\"font-medium\">Chest:</span> {meas.chestCm?.toFixed(1)} cm\n                             <br />\n                             <span className=\"text-blue-600\">\n                               {meas.chestCm < 80 ? 'â†’ XXS' : \n                                meas.chestCm < 85 ? 'â†’ XS' : \n                                meas.chestCm < 90 ? 'â†’ S' : \n                                meas.chestCm < 95 ? 'â†’ M' : \n                                meas.chestCm < 100 ? 'â†’ L' : \n                                meas.chestCm < 105 ? 'â†’ XL' : \n                                meas.chestCm < 110 ? 'â†’ XXL' : 'â†’ XXL'}\n                             </span>\n                           </div>\n                           <div>\n                             <span className=\"font-medium\">Base Size:</span> \n                             <br />\n                             <span className=\"text-green-600 font-medium\">\n                               {meas.chestCm < 80 ? 'XXS' : \n                                meas.chestCm < 85 ? 'XS' : \n                                meas.chestCm < 90 ? 'S' : \n                                meas.chestCm < 95 ? 'M' : \n                                meas.chestCm < 100 ? 'L' : \n                                meas.chestCm < 105 ? 'XL' : \n                                meas.chestCm < 110 ? 'XXL' : 'XXL'}\n                             </span>\n                           </div>\n                         </div>\n                         <div className=\"mt-2 text-xs text-gray-600\">\n                           <span className=\"font-medium\">Size Ranges:</span> &lt;80=XXS, 80-85=XS, 85-90=S, 90-95=M, 95-100=L, 100-105=XL, 105-110=XXL, &gt;110=XXL\n                         </div>\n                         \n                         {/* Measurement Scale Explanation */}\n                         <div className=\"mt-3 p-2 bg-red-50 rounded border border-red-200\">\n                           <div className=\"text-xs text-red-700\">\n                             <div className=\"font-medium mb-1\">âš ï¸ CALIBRATION ISSUE DETECTED:</div>\n                             <div>â€¢ Your chest: {meas.chestCm?.toFixed(1)} cm</div>\n                             <div>â€¢ Expected real-world: ~80-120 cm</div>\n                             <div>â€¢ Current scale factor: ~{((meas.chestCm || 1) / 100).toFixed(2)}x</div>\n                             <div className=\"text-red-600 font-medium\">ðŸš¨ Measurements are too small - recalibrate with A4 sheet!</div>\n                             <div className=\"text-xs mt-1\">ðŸ’¡ Tip: Hold A4 paper at chest level, match bar width exactly</div>\n                           </div>\n                         </div>\n                       </div>\n                     </div>\n                   </div>\n\n                  <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n                    <button onClick={retake} className=\"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-gray-300\">ðŸ”„ Retake</button>\n                    <button onClick={recalibrate} className=\"bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-blue-300\">ðŸŽ¯ Recalibrate</button>\n                    <button\n                      onClick={() => {\n                        const size = recommendTopSize(meas.chestCm, meas.upperWaistCm, meas.shoulderCm);\n                        if (size) {\n                          const measurementData = encodeURIComponent(JSON.stringify({\n                            size,\n                            gender: \"Men\",\n                            measurements: {\n                              chestCm: meas.chestCm,\n                              shoulderCm: meas.shoulderCm,\n                              upperWaistCm: meas.upperWaistCm\n                            }\n                          }));\n                          window.location.href = `/recommendations?data=${measurementData}`;\n                        }\n                      }}\n                      className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-300 shadow-lg\"\n                    >\n                      âœ¨ Get Recommendations\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </MediaPipeErrorBoundary>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}