{"ast":null,"code":"var _jsxFileName = \"/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx\",\n  _s = $RefreshSig$();\n// // src/pages/Measure.jsx\n// import React, { useRef, useEffect, useState, useCallback } from \"react\";\n// import { Pose } from \"@mediapipe/pose\";\n// import { Camera } from \"@mediapipe/camera_utils\";\n\n// /* ---------- Calibration ---------- */\n// const A4_WIDTH_CM = 21.0; // reference width\n// const CHEST_MULTIPLIER = 1.75; // shoulder flat → chest circumference (tune 1.70–1.85)\n// const UPPER_WAIST_FACTOR = 0.90; // hip width ≈ a bit wider than upper waist\n\n// /* ---------- Overlay helpers ---------- */\n// const UPPER = [\n//   [0,1],[1,2],[2,3],[3,7],\n//   [0,11],[0,12],\n//   [11,13],[13,15],\n//   [12,14],[14,16],\n//   [11,12],\n//   [11,23],[12,24],\n// ];\n// const LOWER = [\n//   [23,25],[25,27],[27,31],\n//   [24,26],[26,28],[28,32],\n//   [23,24],\n// ];\n// const drawSeg = (ctx, lm, a, b, color, width, W, H) => {\n//   const A = lm[a], B = lm[b];\n//   if (!A || !B) return;\n//   if ((A.visibility ?? 0) < 0.4 || (B.visibility ?? 0) < 0.4) return;\n//   ctx.strokeStyle = color; ctx.lineWidth = width;\n//   ctx.beginPath(); ctx.moveTo(A.x*W, A.y*H); ctx.lineTo(B.x*W, B.y*H); ctx.stroke();\n// };\n// const drawBBox = (ctx, lm, W, H, color=\"rgba(0,255,0,0.9)\") => {\n//   const pts = lm.filter(p => (p?.visibility ?? 0) > 0.4);\n//   if (!pts.length) return;\n//   const xs = pts.map(p=>p.x*W), ys = pts.map(p=>p.y*H);\n//   const minX = Math.max(0, Math.min(...xs)), maxX = Math.min(W, Math.max(...xs));\n//   const minY = Math.max(0, Math.min(...ys)), maxY = Math.min(H, Math.max(...ys));\n//   const pad = 8; ctx.strokeStyle = color; ctx.lineWidth = 3;\n//   ctx.strokeRect(minX-pad, minY-pad, (maxX-minX)+pad*2, (maxY-minY)+pad*2);\n// };\n\n// /* ---------- Size recommendation (simple baseline) ---------- */\n// const recommendTopSize = (chestCm) => {\n//   if (!chestCm) return null;\n//   // Unisex/men baseline. You can swap to brand tables later.\n//   const table = [\n//     { size: \"XS\", min: 78, max: 86 },\n//     { size: \"S\",  min: 86, max: 94 },\n//     { size: \"M\",  min: 94, max: 102 },\n//     { size: \"L\",  min: 102, max: 110 },\n//     { size: \"XL\", min: 110, max: 118 },\n//     { size: \"XXL\",min: 118, max: 126 },\n//   ];\n//   const hit = table.find(r => chestCm >= r.min && chestCm < r.max);\n//   return hit?.size ?? (chestCm < table[0].min ? \"XS\" : \"XXL+\");\n// };\n\n// // Optional style hint based on proportions (very light heuristic)\n// const styleHint = (chestCm, shoulderCm) => {\n//   if (!chestCm || !shoulderCm) return \"\";\n//   const ratio = chestCm / (shoulderCm || 1); // ~3–5 normal range\n//   if (ratio < 3.6) return \"Try regular/relaxed fits.\";\n//   if (ratio > 4.6) return \"Slim or tailored fits may suit better.\";\n//   return \"Regular fit is likely comfortable.\";\n// };\n\n// export default function Measure() {\n//   const videoRef = useRef(null);\n//   const canvasRef = useRef(null);\n//   const poseRef = useRef(null);\n//   const camRef = useRef(null);\n\n//   const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n//   const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n//   const [barPx, setBarPx] = useState(300);\n//   const [cmPerPx, setCmPerPx] = useState(null);\n\n//   const [locked, setLocked] = useState(false);\n//   const [meas, setMeas] = useState(null); // { chestCm, shoulderCm, upperWaistCm, quality }\n\n//   // stability settings\n//   const GUIDE_MARGIN = 0.08;\n//   const STABILITY_FRAMES = 12;\n//   const MOVEMENT_EPS = 0.015;\n//   const recentShoulderN = useRef([]);\n//   const chestBuf = useRef([]);\n//   const shoulderBuf = useRef([]);\n//   const waistBuf = useRef([]);\n\n//   const getDistance = useCallback((a,b)=>Math.hypot(a.x-b.x,a.y-b.y),[]);\n\n//   const stopCamera = () => {\n//     try {\n//       camRef.current?.stop?.();\n//       const v = videoRef.current;\n//       v?.srcObject && v.srcObject.getTracks().forEach(t=>t.stop());\n//       if (v) v.srcObject = null;\n//     } catch {}\n//   };\n\n//   const startCamera = async (pose) => {\n//     const v = videoRef.current;\n//     const camera = new Camera(v, {\n//       onFrame: async () => { await pose.send({ image: v }); },\n//       width: 1280, height: 720,\n//     });\n//     camRef.current = camera;\n//     camera.start();\n//   };\n\n//   useEffect(() => {\n//     const canvas = canvasRef.current;\n//     const ctx = canvas.getContext(\"2d\");\n\n//     const pose = new Pose({\n//       // Load from local public assets & force non‑SIMD to avoid WASM crash\n//       locateFile: (file) => `/mediapipe/pose/${file.replace('simd_', '')}`,\n//     });\n//     poseRef.current = pose;\n\n//     pose.setOptions({\n//       modelComplexity: /Mobi|Android/i.test(navigator.userAgent) ? 0 : 1, // smoother on phones\n//       smoothLandmarks: true,\n//       enableSegmentation: false,\n//       minDetectionConfidence: 0.5,\n//       minTrackingConfidence: 0.5,\n//     });\n\n//     pose.onResults((res) => {\n//       if (locked) return;\n\n//       const W = res.image.width, H = res.image.height;\n//       if (canvas.width !== W) canvas.width = W;\n//       if (canvas.height !== H) canvas.height = H;\n\n//       ctx.save();\n//       ctx.clearRect(0,0,W,H);\n//       ctx.drawImage(res.image,0,0,W,H);\n\n//       // guide box\n//       const gx = W*GUIDE_MARGIN, gy = H*GUIDE_MARGIN;\n//       const gW = W*(1-GUIDE_MARGIN*2), gH = H*(1-GUIDE_MARGIN*2);\n//       ctx.strokeStyle = \"rgba(125,255,160,0.85)\";\n//       ctx.lineWidth = 3; ctx.strokeRect(gx, gy, gW, gH);\n\n//       // calibration bar\n//       if (phase === \"calibrate\") {\n//         const barH = 14;\n//         ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n//         ctx.fillRect((W-barPx)/2, H*0.1, barPx, barH);\n//         ctx.font = \"14px system-ui, sans-serif\";\n//         ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n//         ctx.fillText(\n//           \"Match this bar to A4 width (21 cm) at chest depth.\",\n//           Math.max(12,(W-360)/2), H*0.1-8\n//         );\n//       }\n\n//       const lm = res.poseLandmarks;\n//       if (!lm) { setStatus(\"Detecting body…\"); ctx.restore(); return; }\n\n//       // overlay (screenshot style)\n//       drawBBox(ctx, lm, W, H);\n//       UPPER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#2aa4ff\",3,W,H));\n//       LOWER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#ff9933\",3,W,H));\n\n//       const vis = (i) => (lm[i]?.visibility ?? 0) > 0.45;\n//       const shouldersOK = vis(11) && vis(12);\n//       const hipsOK = vis(23) || vis(24);\n//       if (!(shouldersOK && hipsOK)) { setStatus(\"Show shoulders & upper torso.\"); ctx.restore(); return; }\n\n//       const Lsh = lm[11], Rsh = lm[12];\n//       const Lhip = lm[23], Rhip = lm[24];\n//       const hip = vis(23) ? Lhip : Rhip;\n\n//       // key dots\n//       const shMid = { x:(Lsh.x+Rsh.x)/2, y:(Lsh.y+Rsh.y)/2 };\n//       ctx.fillStyle = \"rgba(0,200,255,1)\";\n//       [Lsh, Rsh, shMid, hip].forEach(p => { ctx.beginPath(); ctx.arc(p.x*W, p.y*H, 6, 0, Math.PI*2); ctx.fill(); });\n\n//       // must be inside guide\n//       const inside = [Lsh,Rsh,hip].every(p => p.x*W>=gx && p.x*W<=gx+gW && p.y*H>=gy && p.y*H<=gy+gH);\n//       if (!inside) { setStatus(\"Step back/center inside the frame.\"); ctx.restore(); return; }\n\n//       if (phase === \"calibrate\") { setStatus(\"Adjust bar → Set calibration.\"); ctx.restore(); return; }\n//       if (!cmPerPx) { setStatus(\"Click Set calibration first.\"); ctx.restore(); return; }\n\n//       // normalized stability\n//       const shoulderWidthN = getDistance(Lsh,Rsh);\n//       const torsoHeightN = getDistance(shMid, hip);\n//       if (torsoHeightN <= 0) { setStatus(\"Hold still…\"); ctx.restore(); return; }\n\n//       const bufN = recentShoulderN.current;\n//       bufN.push(shoulderWidthN); if (bufN.length > STABILITY_FRAMES) bufN.shift();\n//       const avg = bufN.reduce((a,b)=>a+b,0)/bufN.length;\n//       const maxDev = Math.max(...bufN.map(v=>Math.abs(v-avg)));\n\n//       // ----- measurements in cm -----\n//       const shoulderPx = Math.abs((Lsh.x - Rsh.x) * W);\n//       const shoulderCm = shoulderPx * cmPerPx;\n\n//       const chestCmInstant = shoulderCm * CHEST_MULTIPLIER;\n\n//       let upperWaistCmInstant = null;\n//       if (vis(23) && vis(24)) {\n//         const hipFlatCm = Math.abs((Lhip.x - Rhip.x) * W) * cmPerPx;\n//         upperWaistCmInstant = hipFlatCm * UPPER_WAIST_FACTOR;\n//       }\n\n//       // median smoothing\n//       const pushMed = (ref, val, n=15) => {\n//         if (val==null) return null;\n//         ref.current.push(val);\n//         if (ref.current.length>n) ref.current.shift();\n//         const s=[...ref.current].sort((a,b)=>a-b);\n//         const m=Math.floor(s.length/2);\n//         return s.length%2 ? s[m] : (s[m-1]+s[m])/2;\n//       };\n//       const chestMed = pushMed(chestBuf, chestCmInstant);\n//       const shoulderMed = pushMed(shoulderBuf, shoulderCm);\n//       const waistMed = pushMed(waistBuf, upperWaistCmInstant);\n\n//       // stability: normalized shoulders + cm spread\n//       const spread = chestBuf.current.length>=8 ? Math.max(...chestBuf.current)-Math.min(...chestBuf.current) : 999;\n//       const stable = bufN.length>=STABILITY_FRAMES && maxDev < MOVEMENT_EPS && spread < 1.8; // slightly relaxed\n\n//       if (stable && chestMed && shoulderMed) {\n//         const out = {\n//           chestCm: Number(chestMed.toFixed(1)),\n//           shoulderCm: Number(shoulderMed.toFixed(1)),\n//           upperWaistCm: waistMed ? Number(waistMed.toFixed(1)) : undefined,\n//           quality: { frames: chestBuf.current.length, spreadCm: Number(spread.toFixed(2)) }\n//         };\n//         setMeas(out);\n//         setLocked(true);\n//         setPhase(\"locked\");\n//         setStatus(\"Locked ✔️\");\n//         stopCamera();\n//       } else {\n//         setStatus(\"Hold still…\");\n//       }\n\n//       ctx.restore();\n//     });\n\n//     startCamera(pose);\n//     return () => { stopCamera(); };\n//   }, [phase, cmPerPx, getDistance, locked, barPx]);\n\n//   const setCalibration = () => {\n//     if (barPx < 40) return;\n//     setCmPerPx(A4_WIDTH_CM / barPx);\n//     setPhase(\"measure\");\n//     setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n//     // reset buffers\n//     chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n//   };\n\n//   const retake = () => {\n//     setLocked(false); setMeas(null); setPhase(\"measure\");\n//     setStatus(\"Stand centered; hold still 1–2 seconds.\");\n//     chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n//     if (poseRef.current) startCamera(poseRef.current);\n//   };\n\n//   const recalibrate = () => {\n//     setLocked(false); setMeas(null); setPhase(\"calibrate\");\n//     setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n//     chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n//     if (poseRef.current) startCamera(poseRef.current);\n//   };\n\n//   return (\n//     <div className=\"relative w-full min-h-screen bg-gradient-to-b from-[#0b0f14] to-[#111827] flex flex-col items-center\">\n//       {/* Header */}\n//       <div className=\"w-full max-w-6xl flex items-center justify-between px-4 pt-4\">\n//         <div className=\"text-white font-semibold text-lg\">AI Fashion Fit — Upper Body (Measurements)</div>\n//         <div className=\"bg-white/90 rounded-full px-3 py-1 text-sm shadow\">{status}</div>\n//       </div>\n\n//       {/* Camera */}\n//       <div className=\"relative w-full max-w-6xl aspect-video mt-4 rounded-2xl overflow-hidden shadow-2xl ring-1 ring-white/10\">\n//         <video ref={videoRef} className=\"absolute inset-0 w-full h-full object-contain bg-black\" autoPlay muted playsInline />\n//         <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full object-contain pointer-events-none\" />\n\n//         {/* Calibration UI */}\n//         {phase === \"calibrate\" && (\n//           <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 bg-white/95 backdrop-blur rounded-2xl px-4 py-3 flex items-center gap-4 shadow-lg\">\n//             <div className=\"text-sm font-medium\">A4 width match</div>\n//             <input type=\"range\" min={120} max={900} value={barPx} onChange={(e)=>setBarPx(Number(e.target.value))} className=\"w-72 accent-purple-600\" />\n//             <button onClick={setCalibration} className=\"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700 text-sm shadow\">\n//               Set calibration\n//             </button>\n//           </div>\n//         )}\n\n//         {/* Results */}\n//         {phase === \"locked\" && meas && (\n//           <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center p-4\">\n//             <div className=\"bg-white max-w-md w-full rounded-2xl p-6 shadow-2xl\">\n//               <div className=\"text-xl font-bold mb-3\">Upper‑Body Measurements</div>\n//               <div className=\"grid grid-cols-2 gap-y-1 text-[15px]\">\n//                 <div>Chest (circ.)</div><div className=\"font-semibold\">{meas.chestCm} cm</div>\n//                 <div>Shoulder width</div><div className=\"font-semibold\">{meas.shoulderCm} cm</div>\n//                 {meas.upperWaistCm !== undefined && (\n//                   <>\n//                     <div>Upper‑waist (flat)</div><div className=\"font-semibold\">{meas.upperWaistCm} cm</div>\n//                   </>\n//                 )}\n//               </div>\n\n//               {/* Suggested size + style */}\n//               <div className=\"mt-4 p-3 rounded-xl bg-purple-50 border border-purple-200\">\n//                 <div className=\"text-sm text-purple-900\">Suggested top size</div>\n//                 <div className=\"text-lg font-semibold text-purple-900\">\n//                   {recommendTopSize(meas.chestCm)}\n//                 </div>\n//                 <div className=\"text-xs text-purple-700 mt-1\">\n//                   {styleHint(meas.chestCm, meas.shoulderCm)} Based on chest circumference; refine per brand later.\n//                 </div>\n//               </div>\n\n//               <div className=\"mt-3 text-xs text-gray-600\">\n//                 Quality — frames: {meas.quality.frames}, spread: {meas.quality.spreadCm} cm\n//               </div>\n//               <div className=\"mt-5 flex gap-2\">\n//                 <button onClick={retake} className=\"px-4 py-2 rounded-xl bg-black text-white hover:opacity-90\">Retake</button>\n//                 <button onClick={recalibrate} className=\"px-4 py-2 rounded-xl bg-gray-200 hover:bg-gray-300\">Re‑calibrate</button>\n//                 <button onClick={()=>window.print()} className=\"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700\">Save / Print</button>\n//               </div>\n//             </div>\n//           </div>\n//         )}\n//       </div>\n\n//       <p className=\"mt-3 text-white/60 text-sm text-center px-4\">\n//         Tip: keep the A4 sheet flat at chest depth during calibration. Stand square to the camera. Hold still for 1–2 seconds.\n//       </p>\n//     </div>\n//   );\n// }\n\n// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { Camera as CameraIcon, Sparkles, Activity, Target, CheckCircle, RotateCcw, Download, Zap, AlertCircle } from 'lucide-react';\n\n/* ---------- Calibration ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst A4_WIDTH_CM = 21.0; // reference width\nconst CHEST_MULTIPLIER = 1.75; // shoulder flat → chest circumference (tune 1.70–1.85)\nconst UPPER_WAIST_FACTOR = 0.90; // hip width ≈ a bit wider than upper waist\n\n/* ---------- Overlay helpers ---------- */\nconst UPPER = [[0, 1], [1, 2], [2, 3], [3, 7], [0, 11], [0, 12], [11, 13], [13, 15], [12, 14], [14, 16], [11, 12], [11, 23], [12, 24]];\nconst LOWER = [[23, 25], [25, 27], [27, 31], [24, 26], [26, 28], [28, 32], [23, 24]];\nconst drawSeg = (ctx, lm, a, b, color, width, W, H) => {\n  var _A$visibility, _B$visibility;\n  const A = lm[a],\n    B = lm[b];\n  if (!A || !B) return;\n  if (((_A$visibility = A.visibility) !== null && _A$visibility !== void 0 ? _A$visibility : 0) < 0.4 || ((_B$visibility = B.visibility) !== null && _B$visibility !== void 0 ? _B$visibility : 0) < 0.4) return;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = width;\n  ctx.beginPath();\n  ctx.moveTo(A.x * W, A.y * H);\n  ctx.lineTo(B.x * W, B.y * H);\n  ctx.stroke();\n};\nconst drawBBox = (ctx, lm, W, H, color = \"rgba(0,255,0,0.9)\") => {\n  const pts = lm.filter(p => {\n    var _p$visibility;\n    return ((_p$visibility = p === null || p === void 0 ? void 0 : p.visibility) !== null && _p$visibility !== void 0 ? _p$visibility : 0) > 0.4;\n  });\n  if (!pts.length) return;\n  const xs = pts.map(p => p.x * W),\n    ys = pts.map(p => p.y * H);\n  const minX = Math.max(0, Math.min(...xs)),\n    maxX = Math.min(W, Math.max(...xs));\n  const minY = Math.max(0, Math.min(...ys)),\n    maxY = Math.min(H, Math.max(...ys));\n  const pad = 8;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = 3;\n  ctx.strokeRect(minX - pad, minY - pad, maxX - minX + pad * 2, maxY - minY + pad * 2);\n};\n\n/* ---------- Size recommendation (simple baseline) ---------- */\nconst recommendTopSize = chestCm => {\n  var _hit$size;\n  if (!chestCm) return null;\n  // Unisex/men baseline. You can swap to brand tables later.\n  const table = [{\n    size: \"XS\",\n    min: 78,\n    max: 86\n  }, {\n    size: \"S\",\n    min: 86,\n    max: 94\n  }, {\n    size: \"M\",\n    min: 94,\n    max: 102\n  }, {\n    size: \"L\",\n    min: 102,\n    max: 110\n  }, {\n    size: \"XL\",\n    min: 110,\n    max: 118\n  }, {\n    size: \"XXL\",\n    min: 118,\n    max: 126\n  }];\n  const hit = table.find(r => chestCm >= r.min && chestCm < r.max);\n  return (_hit$size = hit === null || hit === void 0 ? void 0 : hit.size) !== null && _hit$size !== void 0 ? _hit$size : chestCm < table[0].min ? \"XS\" : \"XXL+\";\n};\n\n// Optional style hint based on proportions (very light heuristic)\nconst styleHint = (chestCm, shoulderCm) => {\n  if (!chestCm || !shoulderCm) return \"\";\n  const ratio = chestCm / (shoulderCm || 1); // ~3–5 normal range\n  if (ratio < 3.6) return \"Try regular/relaxed fits.\";\n  if (ratio > 4.6) return \"Slim or tailored fits may suit better.\";\n  return \"Regular fit is likely comfortable.\";\n};\nexport default function Measure() {\n  _s();\n  var _meas$chestCm, _meas$shoulderCm, _meas$upperWaistCm;\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n  const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [barPx, setBarPx] = useState(300);\n  const [cmPerPx, setCmPerPx] = useState(null);\n  const [locked, setLocked] = useState(false);\n  const [meas, setMeas] = useState(null); // { chestCm, shoulderCm, upperWaistCm, quality }\n\n  // stability settings\n  const GUIDE_MARGIN = 0.08;\n  const STABILITY_FRAMES = 12;\n  const MOVEMENT_EPS = 0.015;\n  const recentShoulderN = useRef([]);\n  const chestBuf = useRef([]);\n  const shoulderBuf = useRef([]);\n  const waistBuf = useRef([]);\n  const getDistance = useCallback((a, b) => Math.hypot(a.x - b.x, a.y - b.y), []);\n  const stopCamera = () => {\n    try {\n      var _camRef$current, _camRef$current$stop;\n      (_camRef$current = camRef.current) === null || _camRef$current === void 0 ? void 0 : (_camRef$current$stop = _camRef$current.stop) === null || _camRef$current$stop === void 0 ? void 0 : _camRef$current$stop.call(_camRef$current);\n      const v = videoRef.current;\n      (v === null || v === void 0 ? void 0 : v.srcObject) && v.srcObject.getTracks().forEach(t => t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  };\n  const startCamera = async pose => {\n    const v = videoRef.current;\n    const camera = new Camera(v, {\n      onFrame: async () => {\n        await pose.send({\n          image: v\n        });\n      },\n      width: 1280,\n      height: 720\n    });\n    camRef.current = camera;\n    camera.start();\n  };\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const pose = new Pose({\n      // Load from local public assets & force non‑SIMD to avoid WASM crash\n      locateFile: file => `/mediapipe/pose/${file.replace('simd_', '')}`\n    });\n    poseRef.current = pose;\n    pose.setOptions({\n      modelComplexity: /Mobi|Android/i.test(navigator.userAgent) ? 0 : 1,\n      // smoother on phones\n      smoothLandmarks: true,\n      enableSegmentation: false,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5\n    });\n    pose.onResults(res => {\n      if (locked) return;\n      const W = res.image.width,\n        H = res.image.height;\n      if (canvas.width !== W) canvas.width = W;\n      if (canvas.height !== H) canvas.height = H;\n      ctx.save();\n      ctx.clearRect(0, 0, W, H);\n      ctx.drawImage(res.image, 0, 0, W, H);\n\n      // Enhanced guide box with gradient\n      const gx = W * GUIDE_MARGIN,\n        gy = H * GUIDE_MARGIN;\n      const gW = W * (1 - GUIDE_MARGIN * 2),\n        gH = H * (1 - GUIDE_MARGIN * 2);\n      const gradient = ctx.createLinearGradient(gx, gy, gx + gW, gy + gH);\n      gradient.addColorStop(0, \"rgba(59, 130, 246, 0.8)\"); // Blue\n      gradient.addColorStop(0.5, \"rgba(16, 185, 129, 0.8)\"); // Emerald\n      gradient.addColorStop(1, \"rgba(139, 92, 246, 0.8)\"); // Purple\n      ctx.strokeStyle = gradient;\n      ctx.lineWidth = 4;\n      ctx.strokeRect(gx, gy, gW, gH);\n\n      // calibration bar with better styling\n      if (phase === \"calibrate\") {\n        const barH = 20;\n        const barY = H * 0.12;\n\n        // Bar background with gradient\n        const barGradient = ctx.createLinearGradient((W - barPx) / 2, barY, (W - barPx) / 2 + barPx, barY);\n        barGradient.addColorStop(0, \"rgba(59, 130, 246, 0.9)\");\n        barGradient.addColorStop(1, \"rgba(16, 185, 129, 0.9)\");\n        ctx.fillStyle = barGradient;\n        ctx.fillRect((W - barPx) / 2, barY, barPx, barH);\n\n        // Bar border\n        ctx.strokeStyle = \"rgba(255, 255, 255, 0.9)\";\n        ctx.lineWidth = 2;\n        ctx.strokeRect((W - barPx) / 2, barY, barPx, barH);\n\n        // Instruction text with better styling\n        ctx.font = \"16px system-ui, -apple-system, sans-serif\";\n        ctx.fillStyle = \"rgba(255, 255, 255, 0.95)\";\n        ctx.strokeStyle = \"rgba(0, 0, 0, 0.5)\";\n        ctx.lineWidth = 3;\n        const text = \"Match this bar to A4 width (21 cm) at chest depth\";\n        const textX = Math.max(20, (W - ctx.measureText(text).width) / 2);\n        ctx.strokeText(text, textX, barY - 15);\n        ctx.fillText(text, textX, barY - 15);\n      }\n      const lm = res.poseLandmarks;\n      if (!lm) {\n        setStatus(\"Detecting body…\");\n        ctx.restore();\n        return;\n      }\n\n      // Enhanced overlay with better colors\n      drawBBox(ctx, lm, W, H, \"rgba(16, 185, 129, 0.9)\");\n      UPPER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#3B82F6\", 4, W, H)); // Blue\n      LOWER.forEach(([a, b]) => drawSeg(ctx, lm, a, b, \"#F59E0B\", 4, W, H)); // Amber\n\n      const vis = i => {\n        var _lm$i$visibility, _lm$i;\n        return ((_lm$i$visibility = (_lm$i = lm[i]) === null || _lm$i === void 0 ? void 0 : _lm$i.visibility) !== null && _lm$i$visibility !== void 0 ? _lm$i$visibility : 0) > 0.45;\n      };\n      const shouldersOK = vis(11) && vis(12);\n      const hipsOK = vis(23) || vis(24);\n      if (!(shouldersOK && hipsOK)) {\n        setStatus(\"Show shoulders & upper torso.\");\n        ctx.restore();\n        return;\n      }\n      const Lsh = lm[11],\n        Rsh = lm[12];\n      const Lhip = lm[23],\n        Rhip = lm[24];\n      const hip = vis(23) ? Lhip : Rhip;\n\n      // Enhanced key dots with glow effect\n      const shMid = {\n        x: (Lsh.x + Rsh.x) / 2,\n        y: (Lsh.y + Rsh.y) / 2\n      };\n      const keyPoints = [{\n        point: Lsh,\n        color: \"#3B82F6\"\n      }, {\n        point: Rsh,\n        color: \"#3B82F6\"\n      }, {\n        point: shMid,\n        color: \"#10B981\"\n      }, {\n        point: hip,\n        color: \"#F59E0B\"\n      }];\n      keyPoints.forEach(({\n        point,\n        color\n      }) => {\n        if (point) {\n          // Glow effect\n          ctx.shadowColor = color;\n          ctx.shadowBlur = 15;\n          ctx.fillStyle = color;\n          ctx.beginPath();\n          ctx.arc(point.x * W, point.y * H, 8, 0, Math.PI * 2);\n          ctx.fill();\n\n          // Inner bright dot\n          ctx.shadowBlur = 0;\n          ctx.fillStyle = \"white\";\n          ctx.beginPath();\n          ctx.arc(point.x * W, point.y * H, 4, 0, Math.PI * 2);\n          ctx.fill();\n        }\n      });\n      ctx.shadowBlur = 0;\n\n      // must be inside guide\n      const inside = [Lsh, Rsh, hip].every(p => p.x * W >= gx && p.x * W <= gx + gW && p.y * H >= gy && p.y * H <= gy + gH);\n      if (!inside) {\n        setStatus(\"Step back/center inside the frame.\");\n        ctx.restore();\n        return;\n      }\n      if (phase === \"calibrate\") {\n        setStatus(\"Adjust bar → Set calibration.\");\n        ctx.restore();\n        return;\n      }\n      if (!cmPerPx) {\n        setStatus(\"Click Set calibration first.\");\n        ctx.restore();\n        return;\n      }\n\n      // normalized stability\n      const shoulderWidthN = getDistance(Lsh, Rsh);\n      const torsoHeightN = getDistance(shMid, hip);\n      if (torsoHeightN <= 0) {\n        setStatus(\"Hold still…\");\n        ctx.restore();\n        return;\n      }\n      const bufN = recentShoulderN.current;\n      bufN.push(shoulderWidthN);\n      if (bufN.length > STABILITY_FRAMES) bufN.shift();\n      const avg = bufN.reduce((a, b) => a + b, 0) / bufN.length;\n      const maxDev = Math.max(...bufN.map(v => Math.abs(v - avg)));\n\n      // ----- measurements in cm -----\n      const shoulderPx = Math.abs((Lsh.x - Rsh.x) * W);\n      const shoulderCm = shoulderPx * cmPerPx;\n      const chestCmInstant = shoulderCm * CHEST_MULTIPLIER;\n      let upperWaistCmInstant = null;\n      if (vis(23) && vis(24)) {\n        const hipFlatCm = Math.abs((Lhip.x - Rhip.x) * W) * cmPerPx;\n        upperWaistCmInstant = hipFlatCm * UPPER_WAIST_FACTOR;\n      }\n\n      // median smoothing\n      const pushMed = (ref, val, n = 15) => {\n        if (val == null) return null;\n        ref.current.push(val);\n        if (ref.current.length > n) ref.current.shift();\n        const s = [...ref.current].sort((a, b) => a - b);\n        const m = Math.floor(s.length / 2);\n        return s.length % 2 ? s[m] : (s[m - 1] + s[m]) / 2;\n      };\n      const chestMed = pushMed(chestBuf, chestCmInstant);\n      const shoulderMed = pushMed(shoulderBuf, shoulderCm);\n      const waistMed = pushMed(waistBuf, upperWaistCmInstant);\n\n      // stability: normalized shoulders + cm spread\n      const spread = chestBuf.current.length >= 8 ? Math.max(...chestBuf.current) - Math.min(...chestBuf.current) : 999;\n      const stable = bufN.length >= STABILITY_FRAMES && maxDev < MOVEMENT_EPS && spread < 1.8; // slightly relaxed\n\n      if (stable && chestMed && shoulderMed) {\n        const out = {\n          chestCm: Number(chestMed.toFixed(1)),\n          shoulderCm: Number(shoulderMed.toFixed(1)),\n          upperWaistCm: waistMed ? Number(waistMed.toFixed(1)) : undefined,\n          quality: {\n            frames: chestBuf.current.length,\n            spreadCm: Number(spread.toFixed(2))\n          }\n        };\n        setMeas(out);\n        setLocked(true);\n        setPhase(\"locked\");\n        setStatus(\"Locked ✔️\");\n        stopCamera();\n      } else {\n        setStatus(\"Hold still…\");\n      }\n      ctx.restore();\n    });\n    startCamera(pose);\n    return () => {\n      stopCamera();\n    };\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n  const setCalibration = () => {\n    if (barPx < 40) return;\n    setCmPerPx(A4_WIDTH_CM / barPx);\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n    // reset buffers\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n  };\n  const retake = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1–2 seconds.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n  const recalibrate = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  // Helper functions for UI\n  const getStatusIcon = () => {\n    if (phase === \"locked\") return /*#__PURE__*/_jsxDEV(CheckCircle, {\n      className: \"w-5 h-5 text-emerald-500\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 36\n    }, this);\n    if (phase === \"measure\") return /*#__PURE__*/_jsxDEV(Activity, {\n      className: \"w-5 h-5 text-blue-500 animate-pulse\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 663,\n      columnNumber: 37\n    }, this);\n    return /*#__PURE__*/_jsxDEV(Target, {\n      className: \"w-5 h-5 text-amber-500\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 664,\n      columnNumber: 12\n    }, this);\n  };\n  const getPhaseColor = () => {\n    if (phase === \"locked\") return \"from-emerald-500 to-green-500\";\n    if (phase === \"measure\") return \"from-blue-500 to-cyan-500\";\n    return \"from-amber-500 to-orange-500\";\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 relative overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-10 left-10 w-72 h-72 bg-blue-500/10 rounded-full blur-3xl animate-pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-10 right-10 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse delay-1000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-2000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 679,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative z-10 flex flex-col items-center min-h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-7xl flex items-center justify-between px-6 py-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg\",\n            children: /*#__PURE__*/_jsxDEV(Sparkles, {\n              className: \"w-7 h-7 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 687,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 686,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold text-white\",\n              children: \"AI Fashion Fit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-200\",\n              children: \"Body Measurement System\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `bg-gradient-to-r ${getPhaseColor()} rounded-full px-6 py-3 shadow-lg backdrop-blur-sm border border-white/10`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3 text-white\",\n              children: [getStatusIcon(), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium text-sm\",\n                children: status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 700,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 684,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-6xl px-6 flex-1 flex items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full bg-black/20 backdrop-blur-lg rounded-3xl overflow-hidden shadow-2xl border border-white/10\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative aspect-video\",\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              className: \"absolute inset-0 w-full h-full object-contain bg-black rounded-3xl\",\n              autoPlay: true,\n              muted: true,\n              playsInline: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 710,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              className: \"absolute inset-0 w-full h-full object-contain pointer-events-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 711,\n              columnNumber: 15\n            }, this), phase === \"calibrate\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-6 left-1/2 transform -translate-x-1/2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-white/95 backdrop-blur-md rounded-2xl px-6 py-4 shadow-2xl border border-white/20\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Target, {\n                      className: \"w-5 h-5 text-amber-600\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 719,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm font-medium text-gray-700\",\n                      children: \"A4 width calibration\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 720,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 718,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"range\",\n                    min: 120,\n                    max: 900,\n                    value: barPx,\n                    onChange: e => setBarPx(Number(e.target.value)),\n                    className: \"w-64 accent-blue-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 722,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: setCalibration,\n                    className: \"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white px-6 py-2 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 734,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Set Calibration\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 735,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 730,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 717,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 716,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 715,\n              columnNumber: 17\n            }, this), phase === \"locked\" && meas && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-white rounded-3xl p-8 max-w-lg w-full shadow-2xl border border-gray-100 max-h-[90vh] overflow-y-auto\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 mb-2\",\n                  children: [\"Debug: Modal is visible, phase: \", phase, \", meas: \", JSON.stringify(meas)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 747,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-center mb-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-16 h-16 bg-gradient-to-r from-emerald-400 to-green-400 rounded-full flex items-center justify-center mx-auto mb-4\",\n                    children: /*#__PURE__*/_jsxDEV(CheckCircle, {\n                      className: \"w-8 h-8 text-white\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 753,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 752,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                    className: \"text-2xl font-bold text-gray-800\",\n                    children: \"Measurement Complete!\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 755,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-600 mt-2\",\n                    children: \"Your body measurements have been captured successfully\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 756,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 751,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl p-6 mb-6 border border-blue-100\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-2 gap-6\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-3xl font-bold text-blue-600 mb-1\",\n                        children: meas.chestCm\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 763,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500 uppercase tracking-wide\",\n                        children: \"cm\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 764,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm text-gray-600 font-medium\",\n                        children: \"Chest (circumference)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 765,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 762,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-3xl font-bold text-emerald-600 mb-1\",\n                        children: meas.shoulderCm\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 768,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500 uppercase tracking-wide\",\n                        children: \"cm\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 769,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm text-gray-600 font-medium\",\n                        children: \"Shoulder width\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 770,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 767,\n                      columnNumber: 25\n                    }, this), meas.upperWaistCm && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center col-span-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-3xl font-bold text-purple-600 mb-1\",\n                        children: meas.upperWaistCm\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 774,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500 uppercase tracking-wide\",\n                        children: \"cm\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 775,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm text-gray-600 font-medium\",\n                        children: \"Upper waist\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 776,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 773,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 761,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 760,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-gradient-to-r from-blue-50 to-emerald-50 rounded-2xl p-6 mb-6 border border-blue-100\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-3 mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Zap, {\n                      className: \"w-5 h-5 text-blue-600\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 785,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-semibold text-gray-800\",\n                      children: \"Recommended Size\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 786,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 784,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-4xl font-bold bg-gradient-to-r from-blue-600 to-emerald-600 bg-clip-text text-transparent mb-2\",\n                    children: recommendTopSize(meas.chestCm)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 788,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm text-gray-600\",\n                    children: [styleHint(meas.chestCm, meas.shoulderCm), \" Based on chest circumference.\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 791,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 783,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-gray-100 rounded-xl p-4 mb-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                        className: \"w-4 h-4 text-gray-500\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 800,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Measurement Quality\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 801,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 799,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-2 h-2 bg-emerald-400 rounded-full\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 804,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium text-emerald-600\",\n                        children: \"Excellent\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 805,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 803,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 798,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-2 text-xs text-gray-500\",\n                    children: [meas.quality.frames, \" frames analyzed \\u2022 \", meas.quality.spreadCm, \"cm measurement spread\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 808,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 797,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col space-y-3 sm:flex-row sm:space-y-0 sm:space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: retake,\n                    className: \"flex-1 flex items-center justify-center bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 border-2 border-gray-300\",\n                    children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                      className: \"w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 819,\n                      columnNumber: 25\n                    }, this), \"Retake\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 815,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: recalibrate,\n                    className: \"flex-1 flex items-center justify-center bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 border-2 border-blue-300\",\n                    children: [/*#__PURE__*/_jsxDEV(Target, {\n                      className: \"w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 826,\n                      columnNumber: 25\n                    }, this), \"Recalibrate\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 822,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => window.print(),\n                    className: \"flex-1 flex items-center justify-center bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white px-4 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg border-2 border-blue-400\",\n                    children: [/*#__PURE__*/_jsxDEV(Download, {\n                      className: \"w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 833,\n                      columnNumber: 25\n                    }, this), \"Save\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 829,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 814,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      const recommendedSize = recommendTopSize(meas.chestCm);\n                      if (recommendedSize) {\n                        window.location.href = `/recommendations?size=${recommendedSize}`;\n                      }\n                    },\n                    className: \"w-full flex items-center justify-center bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-4 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n                      className: \"w-5 h-5 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 849,\n                      columnNumber: 25\n                    }, this), \"Get AI Clothing Recommendations\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 840,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 839,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 745,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 709,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 708,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 707,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-4xl px-6 py-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center space-x-2 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(CameraIcon, {\n                className: \"w-5 h-5 text-blue-300\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 865,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold\",\n                children: \"Instructions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 866,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 864,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-white/80 space-y-2\",\n              children: [phase === \"calibrate\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\uD83D\\uDCC4 Hold an A4 sheet at chest level and adjust the bar to match its width for accurate calibration.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 870,\n                columnNumber: 19\n              }, this), phase === \"measure\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\uD83E\\uDDCD Stand straight with arms slightly away from your body. Hold still for precise measurement.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 873,\n                columnNumber: 19\n              }, this), phase === \"locked\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2705 Measurements captured successfully! You can retake if needed or save your results.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 876,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 868,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 863,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 862,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 861,\n        columnNumber: 9\n      }, this), phase === \"locked\" && meas && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-4xl px-6 py-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/95 backdrop-blur-md rounded-2xl p-6 border border-gray-200 shadow-xl\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-gray-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-bold mb-4\",\n              children: \"\\uD83D\\uDCCA Measurement Results\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 888,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-50 rounded-xl p-4 border border-blue-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-blue-600\",\n                  children: ((_meas$chestCm = meas.chestCm) === null || _meas$chestCm === void 0 ? void 0 : _meas$chestCm.toFixed(1)) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 893,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-blue-500\",\n                  children: \"Chest (cm)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 894,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 892,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-emerald-50 rounded-xl p-4 border border-emerald-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-emerald-600\",\n                  children: ((_meas$shoulderCm = meas.shoulderCm) === null || _meas$shoulderCm === void 0 ? void 0 : _meas$shoulderCm.toFixed(1)) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 897,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-emerald-500\",\n                  children: \"Shoulder (cm)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 898,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 896,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-purple-50 rounded-xl p-4 border border-purple-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-purple-600\",\n                  children: ((_meas$upperWaistCm = meas.upperWaistCm) === null || _meas$upperWaistCm === void 0 ? void 0 : _meas$upperWaistCm.toFixed(1)) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 901,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-purple-500\",\n                  children: \"Waist (cm)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 902,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 900,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 891,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-blue-50 to-emerald-50 rounded-xl p-4 mb-6 border border-blue-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-lg font-semibold text-gray-700 mb-2\",\n                children: \"Recommended Size\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 908,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-3xl font-bold bg-gradient-to-r from-blue-600 to-emerald-600 bg-clip-text text-transparent\",\n                children: recommendTopSize(meas.chestCm)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 909,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 907,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col sm:flex-row gap-3 justify-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: retake,\n                className: \"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-gray-300\",\n                children: \"\\uD83D\\uDD04 Retake\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 916,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: recalibrate,\n                className: \"bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-blue-300\",\n                children: \"\\uD83C\\uDFAF Recalibrate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 922,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  const recommendedSize = recommendTopSize(meas.chestCm);\n                  if (recommendedSize) {\n                    window.location.href = `/recommendations?size=${recommendedSize}`;\n                  }\n                },\n                className: \"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-300 shadow-lg\",\n                children: \"\\u2728 Get Recommendations\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 928,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 915,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 887,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 886,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 885,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 682,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 674,\n    columnNumber: 5\n  }, this);\n}\n_s(Measure, \"vfDiX3M2kd+Wt+O4kRhlVrYCCig=\");\n_c = Measure;\nvar _c;\n$RefreshReg$(_c, \"Measure\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","Pose","Camera","CameraIcon","Sparkles","Activity","Target","CheckCircle","RotateCcw","Download","Zap","AlertCircle","jsxDEV","_jsxDEV","A4_WIDTH_CM","CHEST_MULTIPLIER","UPPER_WAIST_FACTOR","UPPER","LOWER","drawSeg","ctx","lm","a","b","color","width","W","H","_A$visibility","_B$visibility","A","B","visibility","strokeStyle","lineWidth","beginPath","moveTo","x","y","lineTo","stroke","drawBBox","pts","filter","p","_p$visibility","length","xs","map","ys","minX","Math","max","min","maxX","minY","maxY","pad","strokeRect","recommendTopSize","chestCm","_hit$size","table","size","hit","find","r","styleHint","shoulderCm","ratio","Measure","_s","_meas$chestCm","_meas$shoulderCm","_meas$upperWaistCm","videoRef","canvasRef","poseRef","camRef","phase","setPhase","status","setStatus","barPx","setBarPx","cmPerPx","setCmPerPx","locked","setLocked","meas","setMeas","GUIDE_MARGIN","STABILITY_FRAMES","MOVEMENT_EPS","recentShoulderN","chestBuf","shoulderBuf","waistBuf","getDistance","hypot","stopCamera","_camRef$current","_camRef$current$stop","current","stop","call","v","srcObject","getTracks","forEach","t","startCamera","pose","camera","onFrame","send","image","height","start","canvas","getContext","locateFile","file","replace","setOptions","modelComplexity","test","navigator","userAgent","smoothLandmarks","enableSegmentation","minDetectionConfidence","minTrackingConfidence","onResults","res","save","clearRect","drawImage","gx","gy","gW","gH","gradient","createLinearGradient","addColorStop","barH","barY","barGradient","fillStyle","fillRect","font","text","textX","measureText","strokeText","fillText","poseLandmarks","restore","vis","i","_lm$i$visibility","_lm$i","shouldersOK","hipsOK","Lsh","Rsh","Lhip","Rhip","hip","shMid","keyPoints","point","shadowColor","shadowBlur","arc","PI","fill","inside","every","shoulderWidthN","torsoHeightN","bufN","push","shift","avg","reduce","maxDev","abs","shoulderPx","chestCmInstant","upperWaistCmInstant","hipFlatCm","pushMed","ref","val","n","s","sort","m","floor","chestMed","shoulderMed","waistMed","spread","stable","out","Number","toFixed","upperWaistCm","undefined","quality","frames","spreadCm","setCalibration","retake","recalibrate","getStatusIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","getPhaseColor","children","autoPlay","muted","playsInline","type","value","onChange","e","target","onClick","JSON","stringify","window","print","recommendedSize","location","href","_c","$RefreshReg$"],"sources":["/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx"],"sourcesContent":["// // src/pages/Measure.jsx\n// import React, { useRef, useEffect, useState, useCallback } from \"react\";\n// import { Pose } from \"@mediapipe/pose\";\n// import { Camera } from \"@mediapipe/camera_utils\";\n\n// /* ---------- Calibration ---------- */\n// const A4_WIDTH_CM = 21.0; // reference width\n// const CHEST_MULTIPLIER = 1.75; // shoulder flat → chest circumference (tune 1.70–1.85)\n// const UPPER_WAIST_FACTOR = 0.90; // hip width ≈ a bit wider than upper waist\n\n// /* ---------- Overlay helpers ---------- */\n// const UPPER = [\n//   [0,1],[1,2],[2,3],[3,7],\n//   [0,11],[0,12],\n//   [11,13],[13,15],\n//   [12,14],[14,16],\n//   [11,12],\n//   [11,23],[12,24],\n// ];\n// const LOWER = [\n//   [23,25],[25,27],[27,31],\n//   [24,26],[26,28],[28,32],\n//   [23,24],\n// ];\n// const drawSeg = (ctx, lm, a, b, color, width, W, H) => {\n//   const A = lm[a], B = lm[b];\n//   if (!A || !B) return;\n//   if ((A.visibility ?? 0) < 0.4 || (B.visibility ?? 0) < 0.4) return;\n//   ctx.strokeStyle = color; ctx.lineWidth = width;\n//   ctx.beginPath(); ctx.moveTo(A.x*W, A.y*H); ctx.lineTo(B.x*W, B.y*H); ctx.stroke();\n// };\n// const drawBBox = (ctx, lm, W, H, color=\"rgba(0,255,0,0.9)\") => {\n//   const pts = lm.filter(p => (p?.visibility ?? 0) > 0.4);\n//   if (!pts.length) return;\n//   const xs = pts.map(p=>p.x*W), ys = pts.map(p=>p.y*H);\n//   const minX = Math.max(0, Math.min(...xs)), maxX = Math.min(W, Math.max(...xs));\n//   const minY = Math.max(0, Math.min(...ys)), maxY = Math.min(H, Math.max(...ys));\n//   const pad = 8; ctx.strokeStyle = color; ctx.lineWidth = 3;\n//   ctx.strokeRect(minX-pad, minY-pad, (maxX-minX)+pad*2, (maxY-minY)+pad*2);\n// };\n\n// /* ---------- Size recommendation (simple baseline) ---------- */\n// const recommendTopSize = (chestCm) => {\n//   if (!chestCm) return null;\n//   // Unisex/men baseline. You can swap to brand tables later.\n//   const table = [\n//     { size: \"XS\", min: 78, max: 86 },\n//     { size: \"S\",  min: 86, max: 94 },\n//     { size: \"M\",  min: 94, max: 102 },\n//     { size: \"L\",  min: 102, max: 110 },\n//     { size: \"XL\", min: 110, max: 118 },\n//     { size: \"XXL\",min: 118, max: 126 },\n//   ];\n//   const hit = table.find(r => chestCm >= r.min && chestCm < r.max);\n//   return hit?.size ?? (chestCm < table[0].min ? \"XS\" : \"XXL+\");\n// };\n\n// // Optional style hint based on proportions (very light heuristic)\n// const styleHint = (chestCm, shoulderCm) => {\n//   if (!chestCm || !shoulderCm) return \"\";\n//   const ratio = chestCm / (shoulderCm || 1); // ~3–5 normal range\n//   if (ratio < 3.6) return \"Try regular/relaxed fits.\";\n//   if (ratio > 4.6) return \"Slim or tailored fits may suit better.\";\n//   return \"Regular fit is likely comfortable.\";\n// };\n\n// export default function Measure() {\n//   const videoRef = useRef(null);\n//   const canvasRef = useRef(null);\n//   const poseRef = useRef(null);\n//   const camRef = useRef(null);\n\n//   const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n//   const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n//   const [barPx, setBarPx] = useState(300);\n//   const [cmPerPx, setCmPerPx] = useState(null);\n\n//   const [locked, setLocked] = useState(false);\n//   const [meas, setMeas] = useState(null); // { chestCm, shoulderCm, upperWaistCm, quality }\n\n//   // stability settings\n//   const GUIDE_MARGIN = 0.08;\n//   const STABILITY_FRAMES = 12;\n//   const MOVEMENT_EPS = 0.015;\n//   const recentShoulderN = useRef([]);\n//   const chestBuf = useRef([]);\n//   const shoulderBuf = useRef([]);\n//   const waistBuf = useRef([]);\n\n//   const getDistance = useCallback((a,b)=>Math.hypot(a.x-b.x,a.y-b.y),[]);\n\n//   const stopCamera = () => {\n//     try {\n//       camRef.current?.stop?.();\n//       const v = videoRef.current;\n//       v?.srcObject && v.srcObject.getTracks().forEach(t=>t.stop());\n//       if (v) v.srcObject = null;\n//     } catch {}\n//   };\n\n//   const startCamera = async (pose) => {\n//     const v = videoRef.current;\n//     const camera = new Camera(v, {\n//       onFrame: async () => { await pose.send({ image: v }); },\n//       width: 1280, height: 720,\n//     });\n//     camRef.current = camera;\n//     camera.start();\n//   };\n\n//   useEffect(() => {\n//     const canvas = canvasRef.current;\n//     const ctx = canvas.getContext(\"2d\");\n\n//     const pose = new Pose({\n//       // Load from local public assets & force non‑SIMD to avoid WASM crash\n//       locateFile: (file) => `/mediapipe/pose/${file.replace('simd_', '')}`,\n//     });\n//     poseRef.current = pose;\n\n//     pose.setOptions({\n//       modelComplexity: /Mobi|Android/i.test(navigator.userAgent) ? 0 : 1, // smoother on phones\n//       smoothLandmarks: true,\n//       enableSegmentation: false,\n//       minDetectionConfidence: 0.5,\n//       minTrackingConfidence: 0.5,\n//     });\n\n//     pose.onResults((res) => {\n//       if (locked) return;\n\n//       const W = res.image.width, H = res.image.height;\n//       if (canvas.width !== W) canvas.width = W;\n//       if (canvas.height !== H) canvas.height = H;\n\n//       ctx.save();\n//       ctx.clearRect(0,0,W,H);\n//       ctx.drawImage(res.image,0,0,W,H);\n\n//       // guide box\n//       const gx = W*GUIDE_MARGIN, gy = H*GUIDE_MARGIN;\n//       const gW = W*(1-GUIDE_MARGIN*2), gH = H*(1-GUIDE_MARGIN*2);\n//       ctx.strokeStyle = \"rgba(125,255,160,0.85)\";\n//       ctx.lineWidth = 3; ctx.strokeRect(gx, gy, gW, gH);\n\n//       // calibration bar\n//       if (phase === \"calibrate\") {\n//         const barH = 14;\n//         ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n//         ctx.fillRect((W-barPx)/2, H*0.1, barPx, barH);\n//         ctx.font = \"14px system-ui, sans-serif\";\n//         ctx.fillStyle = \"rgba(255,255,255,0.95)\";\n//         ctx.fillText(\n//           \"Match this bar to A4 width (21 cm) at chest depth.\",\n//           Math.max(12,(W-360)/2), H*0.1-8\n//         );\n//       }\n\n//       const lm = res.poseLandmarks;\n//       if (!lm) { setStatus(\"Detecting body…\"); ctx.restore(); return; }\n\n//       // overlay (screenshot style)\n//       drawBBox(ctx, lm, W, H);\n//       UPPER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#2aa4ff\",3,W,H));\n//       LOWER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#ff9933\",3,W,H));\n\n//       const vis = (i) => (lm[i]?.visibility ?? 0) > 0.45;\n//       const shouldersOK = vis(11) && vis(12);\n//       const hipsOK = vis(23) || vis(24);\n//       if (!(shouldersOK && hipsOK)) { setStatus(\"Show shoulders & upper torso.\"); ctx.restore(); return; }\n\n//       const Lsh = lm[11], Rsh = lm[12];\n//       const Lhip = lm[23], Rhip = lm[24];\n//       const hip = vis(23) ? Lhip : Rhip;\n\n//       // key dots\n//       const shMid = { x:(Lsh.x+Rsh.x)/2, y:(Lsh.y+Rsh.y)/2 };\n//       ctx.fillStyle = \"rgba(0,200,255,1)\";\n//       [Lsh, Rsh, shMid, hip].forEach(p => { ctx.beginPath(); ctx.arc(p.x*W, p.y*H, 6, 0, Math.PI*2); ctx.fill(); });\n\n//       // must be inside guide\n//       const inside = [Lsh,Rsh,hip].every(p => p.x*W>=gx && p.x*W<=gx+gW && p.y*H>=gy && p.y*H<=gy+gH);\n//       if (!inside) { setStatus(\"Step back/center inside the frame.\"); ctx.restore(); return; }\n\n//       if (phase === \"calibrate\") { setStatus(\"Adjust bar → Set calibration.\"); ctx.restore(); return; }\n//       if (!cmPerPx) { setStatus(\"Click Set calibration first.\"); ctx.restore(); return; }\n\n//       // normalized stability\n//       const shoulderWidthN = getDistance(Lsh,Rsh);\n//       const torsoHeightN = getDistance(shMid, hip);\n//       if (torsoHeightN <= 0) { setStatus(\"Hold still…\"); ctx.restore(); return; }\n\n//       const bufN = recentShoulderN.current;\n//       bufN.push(shoulderWidthN); if (bufN.length > STABILITY_FRAMES) bufN.shift();\n//       const avg = bufN.reduce((a,b)=>a+b,0)/bufN.length;\n//       const maxDev = Math.max(...bufN.map(v=>Math.abs(v-avg)));\n\n//       // ----- measurements in cm -----\n//       const shoulderPx = Math.abs((Lsh.x - Rsh.x) * W);\n//       const shoulderCm = shoulderPx * cmPerPx;\n\n//       const chestCmInstant = shoulderCm * CHEST_MULTIPLIER;\n\n//       let upperWaistCmInstant = null;\n//       if (vis(23) && vis(24)) {\n//         const hipFlatCm = Math.abs((Lhip.x - Rhip.x) * W) * cmPerPx;\n//         upperWaistCmInstant = hipFlatCm * UPPER_WAIST_FACTOR;\n//       }\n\n//       // median smoothing\n//       const pushMed = (ref, val, n=15) => {\n//         if (val==null) return null;\n//         ref.current.push(val);\n//         if (ref.current.length>n) ref.current.shift();\n//         const s=[...ref.current].sort((a,b)=>a-b);\n//         const m=Math.floor(s.length/2);\n//         return s.length%2 ? s[m] : (s[m-1]+s[m])/2;\n//       };\n//       const chestMed = pushMed(chestBuf, chestCmInstant);\n//       const shoulderMed = pushMed(shoulderBuf, shoulderCm);\n//       const waistMed = pushMed(waistBuf, upperWaistCmInstant);\n\n//       // stability: normalized shoulders + cm spread\n//       const spread = chestBuf.current.length>=8 ? Math.max(...chestBuf.current)-Math.min(...chestBuf.current) : 999;\n//       const stable = bufN.length>=STABILITY_FRAMES && maxDev < MOVEMENT_EPS && spread < 1.8; // slightly relaxed\n\n//       if (stable && chestMed && shoulderMed) {\n//         const out = {\n//           chestCm: Number(chestMed.toFixed(1)),\n//           shoulderCm: Number(shoulderMed.toFixed(1)),\n//           upperWaistCm: waistMed ? Number(waistMed.toFixed(1)) : undefined,\n//           quality: { frames: chestBuf.current.length, spreadCm: Number(spread.toFixed(2)) }\n//         };\n//         setMeas(out);\n//         setLocked(true);\n//         setPhase(\"locked\");\n//         setStatus(\"Locked ✔️\");\n//         stopCamera();\n//       } else {\n//         setStatus(\"Hold still…\");\n//       }\n\n//       ctx.restore();\n//     });\n\n//     startCamera(pose);\n//     return () => { stopCamera(); };\n//   }, [phase, cmPerPx, getDistance, locked, barPx]);\n\n//   const setCalibration = () => {\n//     if (barPx < 40) return;\n//     setCmPerPx(A4_WIDTH_CM / barPx);\n//     setPhase(\"measure\");\n//     setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n//     // reset buffers\n//     chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n//   };\n\n//   const retake = () => {\n//     setLocked(false); setMeas(null); setPhase(\"measure\");\n//     setStatus(\"Stand centered; hold still 1–2 seconds.\");\n//     chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n//     if (poseRef.current) startCamera(poseRef.current);\n//   };\n\n//   const recalibrate = () => {\n//     setLocked(false); setMeas(null); setPhase(\"calibrate\");\n//     setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n//     chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n//     if (poseRef.current) startCamera(poseRef.current);\n//   };\n\n//   return (\n//     <div className=\"relative w-full min-h-screen bg-gradient-to-b from-[#0b0f14] to-[#111827] flex flex-col items-center\">\n//       {/* Header */}\n//       <div className=\"w-full max-w-6xl flex items-center justify-between px-4 pt-4\">\n//         <div className=\"text-white font-semibold text-lg\">AI Fashion Fit — Upper Body (Measurements)</div>\n//         <div className=\"bg-white/90 rounded-full px-3 py-1 text-sm shadow\">{status}</div>\n//       </div>\n\n//       {/* Camera */}\n//       <div className=\"relative w-full max-w-6xl aspect-video mt-4 rounded-2xl overflow-hidden shadow-2xl ring-1 ring-white/10\">\n//         <video ref={videoRef} className=\"absolute inset-0 w-full h-full object-contain bg-black\" autoPlay muted playsInline />\n//         <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full object-contain pointer-events-none\" />\n\n//         {/* Calibration UI */}\n//         {phase === \"calibrate\" && (\n//           <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 bg-white/95 backdrop-blur rounded-2xl px-4 py-3 flex items-center gap-4 shadow-lg\">\n//             <div className=\"text-sm font-medium\">A4 width match</div>\n//             <input type=\"range\" min={120} max={900} value={barPx} onChange={(e)=>setBarPx(Number(e.target.value))} className=\"w-72 accent-purple-600\" />\n//             <button onClick={setCalibration} className=\"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700 text-sm shadow\">\n//               Set calibration\n//             </button>\n//           </div>\n//         )}\n\n//         {/* Results */}\n//         {phase === \"locked\" && meas && (\n//           <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center p-4\">\n//             <div className=\"bg-white max-w-md w-full rounded-2xl p-6 shadow-2xl\">\n//               <div className=\"text-xl font-bold mb-3\">Upper‑Body Measurements</div>\n//               <div className=\"grid grid-cols-2 gap-y-1 text-[15px]\">\n//                 <div>Chest (circ.)</div><div className=\"font-semibold\">{meas.chestCm} cm</div>\n//                 <div>Shoulder width</div><div className=\"font-semibold\">{meas.shoulderCm} cm</div>\n//                 {meas.upperWaistCm !== undefined && (\n//                   <>\n//                     <div>Upper‑waist (flat)</div><div className=\"font-semibold\">{meas.upperWaistCm} cm</div>\n//                   </>\n//                 )}\n//               </div>\n\n//               {/* Suggested size + style */}\n//               <div className=\"mt-4 p-3 rounded-xl bg-purple-50 border border-purple-200\">\n//                 <div className=\"text-sm text-purple-900\">Suggested top size</div>\n//                 <div className=\"text-lg font-semibold text-purple-900\">\n//                   {recommendTopSize(meas.chestCm)}\n//                 </div>\n//                 <div className=\"text-xs text-purple-700 mt-1\">\n//                   {styleHint(meas.chestCm, meas.shoulderCm)} Based on chest circumference; refine per brand later.\n//                 </div>\n//               </div>\n\n//               <div className=\"mt-3 text-xs text-gray-600\">\n//                 Quality — frames: {meas.quality.frames}, spread: {meas.quality.spreadCm} cm\n//               </div>\n//               <div className=\"mt-5 flex gap-2\">\n//                 <button onClick={retake} className=\"px-4 py-2 rounded-xl bg-black text-white hover:opacity-90\">Retake</button>\n//                 <button onClick={recalibrate} className=\"px-4 py-2 rounded-xl bg-gray-200 hover:bg-gray-300\">Re‑calibrate</button>\n//                 <button onClick={()=>window.print()} className=\"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700\">Save / Print</button>\n//               </div>\n//             </div>\n//           </div>\n//         )}\n//       </div>\n\n//       <p className=\"mt-3 text-white/60 text-sm text-center px-4\">\n//         Tip: keep the A4 sheet flat at chest depth during calibration. Stand square to the camera. Hold still for 1–2 seconds.\n//       </p>\n//     </div>\n//   );\n// }\n\n// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { Camera as CameraIcon, Sparkles, Activity, Target, CheckCircle, RotateCcw, Download, Zap, AlertCircle } from 'lucide-react';\n\n/* ---------- Calibration ---------- */\nconst A4_WIDTH_CM = 21.0; // reference width\nconst CHEST_MULTIPLIER = 1.75; // shoulder flat → chest circumference (tune 1.70–1.85)\nconst UPPER_WAIST_FACTOR = 0.90; // hip width ≈ a bit wider than upper waist\n\n/* ---------- Overlay helpers ---------- */\nconst UPPER = [\n  [0,1],[1,2],[2,3],[3,7],\n  [0,11],[0,12],\n  [11,13],[13,15],\n  [12,14],[14,16],\n  [11,12],\n  [11,23],[12,24],\n];\nconst LOWER = [\n  [23,25],[25,27],[27,31],\n  [24,26],[26,28],[28,32],\n  [23,24],\n];\nconst drawSeg = (ctx, lm, a, b, color, width, W, H) => {\n  const A = lm[a], B = lm[b];\n  if (!A || !B) return;\n  if ((A.visibility ?? 0) < 0.4 || (B.visibility ?? 0) < 0.4) return;\n  ctx.strokeStyle = color; ctx.lineWidth = width;\n  ctx.beginPath(); ctx.moveTo(A.x*W, A.y*H); ctx.lineTo(B.x*W, B.y*H); ctx.stroke();\n};\nconst drawBBox = (ctx, lm, W, H, color=\"rgba(0,255,0,0.9)\") => {\n  const pts = lm.filter(p => (p?.visibility ?? 0) > 0.4);\n  if (!pts.length) return;\n  const xs = pts.map(p=>p.x*W), ys = pts.map(p=>p.y*H);\n  const minX = Math.max(0, Math.min(...xs)), maxX = Math.min(W, Math.max(...xs));\n  const minY = Math.max(0, Math.min(...ys)), maxY = Math.min(H, Math.max(...ys));\n  const pad = 8; ctx.strokeStyle = color; ctx.lineWidth = 3;\n  ctx.strokeRect(minX-pad, minY-pad, (maxX-minX)+pad*2, (maxY-minY)+pad*2);\n};\n\n/* ---------- Size recommendation (simple baseline) ---------- */\nconst recommendTopSize = (chestCm) => {\n  if (!chestCm) return null;\n  // Unisex/men baseline. You can swap to brand tables later.\n  const table = [\n    { size: \"XS\", min: 78, max: 86 },\n    { size: \"S\",  min: 86, max: 94 },\n    { size: \"M\",  min: 94, max: 102 },\n    { size: \"L\",  min: 102, max: 110 },\n    { size: \"XL\", min: 110, max: 118 },\n    { size: \"XXL\",min: 118, max: 126 },\n  ];\n  const hit = table.find(r => chestCm >= r.min && chestCm < r.max);\n  return hit?.size ?? (chestCm < table[0].min ? \"XS\" : \"XXL+\");\n};\n\n// Optional style hint based on proportions (very light heuristic)\nconst styleHint = (chestCm, shoulderCm) => {\n  if (!chestCm || !shoulderCm) return \"\";\n  const ratio = chestCm / (shoulderCm || 1); // ~3–5 normal range\n  if (ratio < 3.6) return \"Try regular/relaxed fits.\";\n  if (ratio > 4.6) return \"Slim or tailored fits may suit better.\";\n  return \"Regular fit is likely comfortable.\";\n};\n\nexport default function Measure() {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n\n  const [phase, setPhase] = useState(\"calibrate\"); // 'calibrate' | 'measure' | 'locked'\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [barPx, setBarPx] = useState(300);\n  const [cmPerPx, setCmPerPx] = useState(null);\n\n  const [locked, setLocked] = useState(false);\n  const [meas, setMeas] = useState(null); // { chestCm, shoulderCm, upperWaistCm, quality }\n\n  // stability settings\n  const GUIDE_MARGIN = 0.08;\n  const STABILITY_FRAMES = 12;\n  const MOVEMENT_EPS = 0.015;\n  const recentShoulderN = useRef([]);\n  const chestBuf = useRef([]);\n  const shoulderBuf = useRef([]);\n  const waistBuf = useRef([]);\n\n  const getDistance = useCallback((a,b)=>Math.hypot(a.x-b.x,a.y-b.y),[]);\n\n  const stopCamera = () => {\n    try {\n      camRef.current?.stop?.();\n      const v = videoRef.current;\n      v?.srcObject && v.srcObject.getTracks().forEach(t=>t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  };\n\n  const startCamera = async (pose) => {\n    const v = videoRef.current;\n    const camera = new Camera(v, {\n      onFrame: async () => { await pose.send({ image: v }); },\n      width: 1280, height: 720,\n    });\n    camRef.current = camera;\n    camera.start();\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    const pose = new Pose({\n      // Load from local public assets & force non‑SIMD to avoid WASM crash\n      locateFile: (file) => `/mediapipe/pose/${file.replace('simd_', '')}`,\n    });\n    poseRef.current = pose;\n\n    pose.setOptions({\n      modelComplexity: /Mobi|Android/i.test(navigator.userAgent) ? 0 : 1, // smoother on phones\n      smoothLandmarks: true,\n      enableSegmentation: false,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5,\n    });\n\n    pose.onResults((res) => {\n      if (locked) return;\n\n      const W = res.image.width, H = res.image.height;\n      if (canvas.width !== W) canvas.width = W;\n      if (canvas.height !== H) canvas.height = H;\n\n      ctx.save();\n      ctx.clearRect(0,0,W,H);\n      ctx.drawImage(res.image,0,0,W,H);\n\n      // Enhanced guide box with gradient\n      const gx = W*GUIDE_MARGIN, gy = H*GUIDE_MARGIN;\n      const gW = W*(1-GUIDE_MARGIN*2), gH = H*(1-GUIDE_MARGIN*2);\n      const gradient = ctx.createLinearGradient(gx, gy, gx + gW, gy + gH);\n      gradient.addColorStop(0, \"rgba(59, 130, 246, 0.8)\"); // Blue\n      gradient.addColorStop(0.5, \"rgba(16, 185, 129, 0.8)\"); // Emerald\n      gradient.addColorStop(1, \"rgba(139, 92, 246, 0.8)\"); // Purple\n      ctx.strokeStyle = gradient;\n      ctx.lineWidth = 4; \n      ctx.strokeRect(gx, gy, gW, gH);\n\n      // calibration bar with better styling\n      if (phase === \"calibrate\") {\n        const barH = 20;\n        const barY = H * 0.12;\n        \n        // Bar background with gradient\n        const barGradient = ctx.createLinearGradient((W-barPx)/2, barY, (W-barPx)/2 + barPx, barY);\n        barGradient.addColorStop(0, \"rgba(59, 130, 246, 0.9)\");\n        barGradient.addColorStop(1, \"rgba(16, 185, 129, 0.9)\");\n        ctx.fillStyle = barGradient;\n        ctx.fillRect((W-barPx)/2, barY, barPx, barH);\n        \n        // Bar border\n        ctx.strokeStyle = \"rgba(255, 255, 255, 0.9)\";\n        ctx.lineWidth = 2;\n        ctx.strokeRect((W-barPx)/2, barY, barPx, barH);\n        \n        // Instruction text with better styling\n        ctx.font = \"16px system-ui, -apple-system, sans-serif\";\n        ctx.fillStyle = \"rgba(255, 255, 255, 0.95)\";\n        ctx.strokeStyle = \"rgba(0, 0, 0, 0.5)\";\n        ctx.lineWidth = 3;\n        const text = \"Match this bar to A4 width (21 cm) at chest depth\";\n        const textX = Math.max(20, (W - ctx.measureText(text).width) / 2);\n        ctx.strokeText(text, textX, barY - 15);\n        ctx.fillText(text, textX, barY - 15);\n      }\n\n      const lm = res.poseLandmarks;\n      if (!lm) { setStatus(\"Detecting body…\"); ctx.restore(); return; }\n\n      // Enhanced overlay with better colors\n      drawBBox(ctx, lm, W, H, \"rgba(16, 185, 129, 0.9)\");\n      UPPER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#3B82F6\",4,W,H)); // Blue\n      LOWER.forEach(([a,b])=>drawSeg(ctx,lm,a,b,\"#F59E0B\",4,W,H)); // Amber\n\n      const vis = (i) => (lm[i]?.visibility ?? 0) > 0.45;\n      const shouldersOK = vis(11) && vis(12);\n      const hipsOK = vis(23) || vis(24);\n      if (!(shouldersOK && hipsOK)) { setStatus(\"Show shoulders & upper torso.\"); ctx.restore(); return; }\n\n      const Lsh = lm[11], Rsh = lm[12];\n      const Lhip = lm[23], Rhip = lm[24];\n      const hip = vis(23) ? Lhip : Rhip;\n\n      // Enhanced key dots with glow effect\n      const shMid = { x:(Lsh.x+Rsh.x)/2, y:(Lsh.y+Rsh.y)/2 };\n      const keyPoints = [\n        { point: Lsh, color: \"#3B82F6\" },\n        { point: Rsh, color: \"#3B82F6\" },\n        { point: shMid, color: \"#10B981\" },\n        { point: hip, color: \"#F59E0B\" }\n      ];\n      \n      keyPoints.forEach(({point, color}) => {\n        if (point) {\n          // Glow effect\n          ctx.shadowColor = color;\n          ctx.shadowBlur = 15;\n          ctx.fillStyle = color;\n          ctx.beginPath(); \n          ctx.arc(point.x*W, point.y*H, 8, 0, Math.PI*2); \n          ctx.fill();\n          \n          // Inner bright dot\n          ctx.shadowBlur = 0;\n          ctx.fillStyle = \"white\";\n          ctx.beginPath(); \n          ctx.arc(point.x*W, point.y*H, 4, 0, Math.PI*2); \n          ctx.fill();\n        }\n      });\n      ctx.shadowBlur = 0;\n\n      // must be inside guide\n      const inside = [Lsh,Rsh,hip].every(p => p.x*W>=gx && p.x*W<=gx+gW && p.y*H>=gy && p.y*H<=gy+gH);\n      if (!inside) { setStatus(\"Step back/center inside the frame.\"); ctx.restore(); return; }\n\n      if (phase === \"calibrate\") { setStatus(\"Adjust bar → Set calibration.\"); ctx.restore(); return; }\n      if (!cmPerPx) { setStatus(\"Click Set calibration first.\"); ctx.restore(); return; }\n\n      // normalized stability\n      const shoulderWidthN = getDistance(Lsh,Rsh);\n      const torsoHeightN = getDistance(shMid, hip);\n      if (torsoHeightN <= 0) { setStatus(\"Hold still…\"); ctx.restore(); return; }\n\n      const bufN = recentShoulderN.current;\n      bufN.push(shoulderWidthN); if (bufN.length > STABILITY_FRAMES) bufN.shift();\n      const avg = bufN.reduce((a,b)=>a+b,0)/bufN.length;\n      const maxDev = Math.max(...bufN.map(v=>Math.abs(v-avg)));\n\n      // ----- measurements in cm -----\n      const shoulderPx = Math.abs((Lsh.x - Rsh.x) * W);\n      const shoulderCm = shoulderPx * cmPerPx;\n\n      const chestCmInstant = shoulderCm * CHEST_MULTIPLIER;\n\n      let upperWaistCmInstant = null;\n      if (vis(23) && vis(24)) {\n        const hipFlatCm = Math.abs((Lhip.x - Rhip.x) * W) * cmPerPx;\n        upperWaistCmInstant = hipFlatCm * UPPER_WAIST_FACTOR;\n      }\n\n      // median smoothing\n      const pushMed = (ref, val, n=15) => {\n        if (val==null) return null;\n        ref.current.push(val);\n        if (ref.current.length>n) ref.current.shift();\n        const s=[...ref.current].sort((a,b)=>a-b);\n        const m=Math.floor(s.length/2);\n        return s.length%2 ? s[m] : (s[m-1]+s[m])/2;\n      };\n      const chestMed = pushMed(chestBuf, chestCmInstant);\n      const shoulderMed = pushMed(shoulderBuf, shoulderCm);\n      const waistMed = pushMed(waistBuf, upperWaistCmInstant);\n\n      // stability: normalized shoulders + cm spread\n      const spread = chestBuf.current.length>=8 ? Math.max(...chestBuf.current)-Math.min(...chestBuf.current) : 999;\n      const stable = bufN.length>=STABILITY_FRAMES && maxDev < MOVEMENT_EPS && spread < 1.8; // slightly relaxed\n\n      if (stable && chestMed && shoulderMed) {\n        const out = {\n          chestCm: Number(chestMed.toFixed(1)),\n          shoulderCm: Number(shoulderMed.toFixed(1)),\n          upperWaistCm: waistMed ? Number(waistMed.toFixed(1)) : undefined,\n          quality: { frames: chestBuf.current.length, spreadCm: Number(spread.toFixed(2)) }\n        };\n        setMeas(out);\n        setLocked(true);\n        setPhase(\"locked\");\n        setStatus(\"Locked ✔️\");\n        stopCamera();\n      } else {\n        setStatus(\"Hold still…\");\n      }\n\n      ctx.restore();\n    });\n\n    startCamera(pose);\n    return () => { stopCamera(); };\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n\n  const setCalibration = () => {\n    if (barPx < 40) return;\n    setCmPerPx(A4_WIDTH_CM / barPx);\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n    // reset buffers\n    chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n  };\n\n  const retake = () => {\n    setLocked(false); setMeas(null); setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1–2 seconds.\");\n    chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  const recalibrate = () => {\n    setLocked(false); setMeas(null); setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBuf.current = []; shoulderBuf.current = []; waistBuf.current = []; recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  // Helper functions for UI\n  const getStatusIcon = () => {\n    if (phase === \"locked\") return <CheckCircle className=\"w-5 h-5 text-emerald-500\" />;\n    if (phase === \"measure\") return <Activity className=\"w-5 h-5 text-blue-500 animate-pulse\" />;\n    return <Target className=\"w-5 h-5 text-amber-500\" />;\n  };\n\n  const getPhaseColor = () => {\n    if (phase === \"locked\") return \"from-emerald-500 to-green-500\";\n    if (phase === \"measure\") return \"from-blue-500 to-cyan-500\";\n    return \"from-amber-500 to-orange-500\";\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 relative overflow-hidden\">\n      {/* Animated Background */}\n      <div className=\"absolute inset-0\">\n        <div className=\"absolute top-10 left-10 w-72 h-72 bg-blue-500/10 rounded-full blur-3xl animate-pulse\"></div>\n        <div className=\"absolute bottom-10 right-10 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-2000\"></div>\n      </div>\n\n      <div className=\"relative z-10 flex flex-col items-center min-h-screen\">\n        {/* Enhanced Header */}\n        <div className=\"w-full max-w-7xl flex items-center justify-between px-6 py-6\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg\">\n              <Sparkles className=\"w-7 h-7 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-bold text-white\">AI Fashion Fit</h1>\n              <p className=\"text-sm text-blue-200\">Body Measurement System</p>\n            </div>\n          </div>\n          \n          {/* Enhanced Status Badge */}\n          <div className=\"flex items-center space-x-3\">\n            <div className={`bg-gradient-to-r ${getPhaseColor()} rounded-full px-6 py-3 shadow-lg backdrop-blur-sm border border-white/10`}>\n              <div className=\"flex items-center space-x-3 text-white\">\n                {getStatusIcon()}\n                <span className=\"font-medium text-sm\">{status}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Enhanced Camera Section */}\n        <div className=\"w-full max-w-6xl px-6 flex-1 flex items-center\">\n          <div className=\"relative w-full bg-black/20 backdrop-blur-lg rounded-3xl overflow-hidden shadow-2xl border border-white/10\">\n            <div className=\"relative aspect-video\">\n              <video ref={videoRef} className=\"absolute inset-0 w-full h-full object-contain bg-black rounded-3xl\" autoPlay muted playsInline />\n              <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full object-contain pointer-events-none\" />\n\n              {/* Enhanced Calibration UI */}\n              {phase === \"calibrate\" && (\n                <div className=\"absolute bottom-6 left-1/2 transform -translate-x-1/2\">\n                  <div className=\"bg-white/95 backdrop-blur-md rounded-2xl px-6 py-4 shadow-2xl border border-white/20\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Target className=\"w-5 h-5 text-amber-600\" />\n                        <span className=\"text-sm font-medium text-gray-700\">A4 width calibration</span>\n                      </div>\n                      <input \n                        type=\"range\" \n                        min={120} \n                        max={900} \n                        value={barPx} \n                        onChange={(e)=>setBarPx(Number(e.target.value))} \n                        className=\"w-64 accent-blue-500\"\n                      />\n                      <button \n                        onClick={setCalibration} \n                        className=\"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white px-6 py-2 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center space-x-2\"\n                      >\n                        <CheckCircle className=\"w-4 h-4\" />\n                        <span>Set Calibration</span>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Enhanced Results Modal */}\n              {phase === \"locked\" && meas && (\n                <div className=\"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-6\">\n                  <div className=\"bg-white rounded-3xl p-8 max-w-lg w-full shadow-2xl border border-gray-100 max-h-[90vh] overflow-y-auto\">\n                    {/* Debug Info */}\n                    <div className=\"text-xs text-gray-500 mb-2\">\n                      Debug: Modal is visible, phase: {phase}, meas: {JSON.stringify(meas)}\n                    </div>\n                    {/* Success Header */}\n                    <div className=\"text-center mb-6\">\n                      <div className=\"w-16 h-16 bg-gradient-to-r from-emerald-400 to-green-400 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <CheckCircle className=\"w-8 h-8 text-white\" />\n                      </div>\n                      <h2 className=\"text-2xl font-bold text-gray-800\">Measurement Complete!</h2>\n                      <p className=\"text-gray-600 mt-2\">Your body measurements have been captured successfully</p>\n                    </div>\n\n                    {/* Enhanced Measurements Grid */}\n                    <div className=\"bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl p-6 mb-6 border border-blue-100\">\n                      <div className=\"grid grid-cols-2 gap-6\">\n                        <div className=\"text-center\">\n                          <div className=\"text-3xl font-bold text-blue-600 mb-1\">{meas.chestCm}</div>\n                          <div className=\"text-xs text-gray-500 uppercase tracking-wide\">cm</div>\n                          <div className=\"text-sm text-gray-600 font-medium\">Chest (circumference)</div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"text-3xl font-bold text-emerald-600 mb-1\">{meas.shoulderCm}</div>\n                          <div className=\"text-xs text-gray-500 uppercase tracking-wide\">cm</div>\n                          <div className=\"text-sm text-gray-600 font-medium\">Shoulder width</div>\n                        </div>\n                        {meas.upperWaistCm && (\n                          <div className=\"text-center col-span-2\">\n                            <div className=\"text-3xl font-bold text-purple-600 mb-1\">{meas.upperWaistCm}</div>\n                            <div className=\"text-xs text-gray-500 uppercase tracking-wide\">cm</div>\n                            <div className=\"text-sm text-gray-600 font-medium\">Upper waist</div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Enhanced Size Recommendation */}\n                    <div className=\"bg-gradient-to-r from-blue-50 to-emerald-50 rounded-2xl p-6 mb-6 border border-blue-100\">\n                      <div className=\"flex items-center space-x-3 mb-3\">\n                        <Zap className=\"w-5 h-5 text-blue-600\" />\n                        <span className=\"font-semibold text-gray-800\">Recommended Size</span>\n                      </div>\n                      <div className=\"text-4xl font-bold bg-gradient-to-r from-blue-600 to-emerald-600 bg-clip-text text-transparent mb-2\">\n                        {recommendTopSize(meas.chestCm)}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">\n                        {styleHint(meas.chestCm, meas.shoulderCm)} Based on chest circumference.\n                      </div>\n                    </div>\n\n                    {/* Enhanced Quality Info */}\n                    <div className=\"bg-gray-100 rounded-xl p-4 mb-6\">\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <div className=\"flex items-center space-x-2\">\n                          <AlertCircle className=\"w-4 h-4 text-gray-500\" />\n                          <span className=\"text-gray-600\">Measurement Quality</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"w-2 h-2 bg-emerald-400 rounded-full\"></div>\n                          <span className=\"font-medium text-emerald-600\">Excellent</span>\n                        </div>\n                      </div>\n                      <div className=\"mt-2 text-xs text-gray-500\">\n                        {meas.quality.frames} frames analyzed • {meas.quality.spreadCm}cm measurement spread\n                      </div>\n                    </div>\n\n                    {/* Enhanced Action Buttons */}\n                    <div className=\"flex flex-col space-y-3 sm:flex-row sm:space-y-0 sm:space-x-3\">\n                      <button \n                        onClick={retake}\n                        className=\"flex-1 flex items-center justify-center bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 border-2 border-gray-300\"\n                      >\n                        <RotateCcw className=\"w-4 h-4 mr-2\" />\n                        Retake\n                      </button>\n                      <button \n                        onClick={recalibrate}\n                        className=\"flex-1 flex items-center justify-center bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 border-2 border-blue-300\"\n                      >\n                        <Target className=\"w-4 h-4 mr-2\" />\n                        Recalibrate\n                      </button>\n                      <button \n                        onClick={()=>window.print()}\n                        className=\"flex-1 flex items-center justify-center bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white px-4 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg border-2 border-blue-400\"\n                      >\n                        <Download className=\"w-4 h-4 mr-2\" />\n                        Save\n                      </button>\n                    </div>\n\n                    {/* Get Recommendations Button */}\n                    <div className=\"mt-4\">\n                      <button \n                        onClick={() => {\n                          const recommendedSize = recommendTopSize(meas.chestCm);\n                          if (recommendedSize) {\n                            window.location.href = `/recommendations?size=${recommendedSize}`;\n                          }\n                        }}\n                        className=\"w-full flex items-center justify-center bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-4 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg\"\n                      >\n                        <Sparkles className=\"w-5 h-5 mr-2\" />\n                        Get AI Clothing Recommendations\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Enhanced Instructions */}\n        <div className=\"w-full max-w-4xl px-6 py-6\">\n          <div className=\"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20\">\n            <div className=\"text-center text-white\">\n              <div className=\"flex items-center justify-center space-x-2 mb-3\">\n                <CameraIcon className=\"w-5 h-5 text-blue-300\" />\n                <h3 className=\"font-semibold\">Instructions</h3>\n              </div>\n              <div className=\"text-sm text-white/80 space-y-2\">\n                {phase === \"calibrate\" && (\n                  <p>📄 Hold an A4 sheet at chest level and adjust the bar to match its width for accurate calibration.</p>\n                )}\n                {phase === \"measure\" && (\n                  <p>🧍 Stand straight with arms slightly away from your body. Hold still for precise measurement.</p>\n                )}\n                {phase === \"locked\" && (\n                  <p>✅ Measurements captured successfully! You can retake if needed or save your results.</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Fallback Results Display - Always visible when measurements exist */}\n        {phase === \"locked\" && meas && (\n          <div className=\"w-full max-w-4xl px-6 py-6\">\n            <div className=\"bg-white/95 backdrop-blur-md rounded-2xl p-6 border border-gray-200 shadow-xl\">\n              <div className=\"text-center text-gray-800\">\n                <h3 className=\"text-xl font-bold mb-4\">📊 Measurement Results</h3>\n                \n                {/* Measurements Grid */}\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n                  <div className=\"bg-blue-50 rounded-xl p-4 border border-blue-200\">\n                    <div className=\"text-2xl font-bold text-blue-600\">{meas.chestCm?.toFixed(1) || 'N/A'}</div>\n                    <div className=\"text-sm text-blue-500\">Chest (cm)</div>\n                  </div>\n                  <div className=\"bg-emerald-50 rounded-xl p-4 border border-emerald-200\">\n                    <div className=\"text-2xl font-bold text-emerald-600\">{meas.shoulderCm?.toFixed(1) || 'N/A'}</div>\n                    <div className=\"text-sm text-emerald-500\">Shoulder (cm)</div>\n                  </div>\n                  <div className=\"bg-purple-50 rounded-xl p-4 border border-purple-200\">\n                    <div className=\"text-2xl font-bold text-purple-600\">{meas.upperWaistCm?.toFixed(1) || 'N/A'}</div>\n                    <div className=\"text-sm text-purple-500\">Waist (cm)</div>\n                  </div>\n                </div>\n\n                {/* Size Recommendation */}\n                <div className=\"bg-gradient-to-r from-blue-50 to-emerald-50 rounded-xl p-4 mb-6 border border-blue-200\">\n                  <div className=\"text-lg font-semibold text-gray-700 mb-2\">Recommended Size</div>\n                  <div className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-emerald-600 bg-clip-text text-transparent\">\n                    {recommendTopSize(meas.chestCm)}\n                  </div>\n                </div>\n\n                {/* Action Buttons */}\n                <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n                  <button \n                    onClick={retake}\n                    className=\"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-gray-300\"\n                  >\n                    🔄 Retake\n                  </button>\n                  <button \n                    onClick={recalibrate}\n                    className=\"bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-blue-300\"\n                  >\n                    🎯 Recalibrate\n                  </button>\n                  <button \n                    onClick={() => {\n                      const recommendedSize = recommendTopSize(meas.chestCm);\n                      if (recommendedSize) {\n                        window.location.href = `/recommendations?size=${recommendedSize}`;\n                      }\n                    }}\n                    className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-300 shadow-lg\"\n                  >\n                    ✨ Get Recommendations\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"mappings":";;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AACvE,SAASC,IAAI,QAAQ,iBAAiB;AACtC,SAASC,MAAM,QAAQ,yBAAyB;AAChD,SAASA,MAAM,IAAIC,UAAU,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,GAAG,EAAEC,WAAW,QAAQ,cAAc;;AAEnI;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,WAAW,GAAG,IAAI,CAAC,CAAC;AAC1B,MAAMC,gBAAgB,GAAG,IAAI,CAAC,CAAC;AAC/B,MAAMC,kBAAkB,GAAG,IAAI,CAAC,CAAC;;AAEjC;AACA,MAAMC,KAAK,GAAG,CACZ,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EACvB,CAAC,CAAC,EAAC,EAAE,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC,EACb,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EACf,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EACf,CAAC,EAAE,EAAC,EAAE,CAAC,EACP,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,CAChB;AACD,MAAMC,KAAK,GAAG,CACZ,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EACvB,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EAAC,CAAC,EAAE,EAAC,EAAE,CAAC,EACvB,CAAC,EAAE,EAAC,EAAE,CAAC,CACR;AACD,MAAMC,OAAO,GAAGA,CAACC,GAAG,EAAEC,EAAE,EAAEC,CAAC,EAAEC,CAAC,EAAEC,KAAK,EAAEC,KAAK,EAAEC,CAAC,EAAEC,CAAC,KAAK;EAAA,IAAAC,aAAA,EAAAC,aAAA;EACrD,MAAMC,CAAC,GAAGT,EAAE,CAACC,CAAC,CAAC;IAAES,CAAC,GAAGV,EAAE,CAACE,CAAC,CAAC;EAC1B,IAAI,CAACO,CAAC,IAAI,CAACC,CAAC,EAAE;EACd,IAAI,EAAAH,aAAA,GAACE,CAAC,CAACE,UAAU,cAAAJ,aAAA,cAAAA,aAAA,GAAI,CAAC,IAAI,GAAG,IAAI,EAAAC,aAAA,GAACE,CAAC,CAACC,UAAU,cAAAH,aAAA,cAAAA,aAAA,GAAI,CAAC,IAAI,GAAG,EAAE;EAC5DT,GAAG,CAACa,WAAW,GAAGT,KAAK;EAAEJ,GAAG,CAACc,SAAS,GAAGT,KAAK;EAC9CL,GAAG,CAACe,SAAS,CAAC,CAAC;EAAEf,GAAG,CAACgB,MAAM,CAACN,CAAC,CAACO,CAAC,GAACX,CAAC,EAAEI,CAAC,CAACQ,CAAC,GAACX,CAAC,CAAC;EAAEP,GAAG,CAACmB,MAAM,CAACR,CAAC,CAACM,CAAC,GAACX,CAAC,EAAEK,CAAC,CAACO,CAAC,GAACX,CAAC,CAAC;EAAEP,GAAG,CAACoB,MAAM,CAAC,CAAC;AACnF,CAAC;AACD,MAAMC,QAAQ,GAAGA,CAACrB,GAAG,EAAEC,EAAE,EAAEK,CAAC,EAAEC,CAAC,EAAEH,KAAK,GAAC,mBAAmB,KAAK;EAC7D,MAAMkB,GAAG,GAAGrB,EAAE,CAACsB,MAAM,CAACC,CAAC;IAAA,IAAAC,aAAA;IAAA,OAAI,EAAAA,aAAA,GAACD,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEZ,UAAU,cAAAa,aAAA,cAAAA,aAAA,GAAI,CAAC,IAAI,GAAG;EAAA,EAAC;EACtD,IAAI,CAACH,GAAG,CAACI,MAAM,EAAE;EACjB,MAAMC,EAAE,GAAGL,GAAG,CAACM,GAAG,CAACJ,CAAC,IAAEA,CAAC,CAACP,CAAC,GAACX,CAAC,CAAC;IAAEuB,EAAE,GAAGP,GAAG,CAACM,GAAG,CAACJ,CAAC,IAAEA,CAAC,CAACN,CAAC,GAACX,CAAC,CAAC;EACpD,MAAMuB,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,GAAGN,EAAE,CAAC,CAAC;IAAEO,IAAI,GAAGH,IAAI,CAACE,GAAG,CAAC3B,CAAC,EAAEyB,IAAI,CAACC,GAAG,CAAC,GAAGL,EAAE,CAAC,CAAC;EAC9E,MAAMQ,IAAI,GAAGJ,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,GAAGJ,EAAE,CAAC,CAAC;IAAEO,IAAI,GAAGL,IAAI,CAACE,GAAG,CAAC1B,CAAC,EAAEwB,IAAI,CAACC,GAAG,CAAC,GAAGH,EAAE,CAAC,CAAC;EAC9E,MAAMQ,GAAG,GAAG,CAAC;EAAErC,GAAG,CAACa,WAAW,GAAGT,KAAK;EAAEJ,GAAG,CAACc,SAAS,GAAG,CAAC;EACzDd,GAAG,CAACsC,UAAU,CAACR,IAAI,GAACO,GAAG,EAAEF,IAAI,GAACE,GAAG,EAAGH,IAAI,GAACJ,IAAI,GAAEO,GAAG,GAAC,CAAC,EAAGD,IAAI,GAACD,IAAI,GAAEE,GAAG,GAAC,CAAC,CAAC;AAC1E,CAAC;;AAED;AACA,MAAME,gBAAgB,GAAIC,OAAO,IAAK;EAAA,IAAAC,SAAA;EACpC,IAAI,CAACD,OAAO,EAAE,OAAO,IAAI;EACzB;EACA,MAAME,KAAK,GAAG,CACZ;IAAEC,IAAI,EAAE,IAAI;IAAEV,GAAG,EAAE,EAAE;IAAED,GAAG,EAAE;EAAG,CAAC,EAChC;IAAEW,IAAI,EAAE,GAAG;IAAGV,GAAG,EAAE,EAAE;IAAED,GAAG,EAAE;EAAG,CAAC,EAChC;IAAEW,IAAI,EAAE,GAAG;IAAGV,GAAG,EAAE,EAAE;IAAED,GAAG,EAAE;EAAI,CAAC,EACjC;IAAEW,IAAI,EAAE,GAAG;IAAGV,GAAG,EAAE,GAAG;IAAED,GAAG,EAAE;EAAI,CAAC,EAClC;IAAEW,IAAI,EAAE,IAAI;IAAEV,GAAG,EAAE,GAAG;IAAED,GAAG,EAAE;EAAI,CAAC,EAClC;IAAEW,IAAI,EAAE,KAAK;IAACV,GAAG,EAAE,GAAG;IAAED,GAAG,EAAE;EAAI,CAAC,CACnC;EACD,MAAMY,GAAG,GAAGF,KAAK,CAACG,IAAI,CAACC,CAAC,IAAIN,OAAO,IAAIM,CAAC,CAACb,GAAG,IAAIO,OAAO,GAAGM,CAAC,CAACd,GAAG,CAAC;EAChE,QAAAS,SAAA,GAAOG,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAED,IAAI,cAAAF,SAAA,cAAAA,SAAA,GAAKD,OAAO,GAAGE,KAAK,CAAC,CAAC,CAAC,CAACT,GAAG,GAAG,IAAI,GAAG,MAAM;AAC7D,CAAC;;AAED;AACA,MAAMc,SAAS,GAAGA,CAACP,OAAO,EAAEQ,UAAU,KAAK;EACzC,IAAI,CAACR,OAAO,IAAI,CAACQ,UAAU,EAAE,OAAO,EAAE;EACtC,MAAMC,KAAK,GAAGT,OAAO,IAAIQ,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC;EAC3C,IAAIC,KAAK,GAAG,GAAG,EAAE,OAAO,2BAA2B;EACnD,IAAIA,KAAK,GAAG,GAAG,EAAE,OAAO,wCAAwC;EAChE,OAAO,oCAAoC;AAC7C,CAAC;AAED,eAAe,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,aAAA,EAAAC,gBAAA,EAAAC,kBAAA;EAChC,MAAMC,QAAQ,GAAG9E,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAM+E,SAAS,GAAG/E,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAMgF,OAAO,GAAGhF,MAAM,CAAC,IAAI,CAAC;EAC5B,MAAMiF,MAAM,GAAGjF,MAAM,CAAC,IAAI,CAAC;EAE3B,MAAM,CAACkF,KAAK,EAAEC,QAAQ,CAAC,GAAGjF,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;EACjD,MAAM,CAACkF,MAAM,EAAEC,SAAS,CAAC,GAAGnF,QAAQ,CAAC,0DAA0D,CAAC;EAChG,MAAM,CAACoF,KAAK,EAAEC,QAAQ,CAAC,GAAGrF,QAAQ,CAAC,GAAG,CAAC;EACvC,MAAM,CAACsF,OAAO,EAAEC,UAAU,CAAC,GAAGvF,QAAQ,CAAC,IAAI,CAAC;EAE5C,MAAM,CAACwF,MAAM,EAAEC,SAAS,CAAC,GAAGzF,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAAC0F,IAAI,EAAEC,OAAO,CAAC,GAAG3F,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;EAExC;EACA,MAAM4F,YAAY,GAAG,IAAI;EACzB,MAAMC,gBAAgB,GAAG,EAAE;EAC3B,MAAMC,YAAY,GAAG,KAAK;EAC1B,MAAMC,eAAe,GAAGjG,MAAM,CAAC,EAAE,CAAC;EAClC,MAAMkG,QAAQ,GAAGlG,MAAM,CAAC,EAAE,CAAC;EAC3B,MAAMmG,WAAW,GAAGnG,MAAM,CAAC,EAAE,CAAC;EAC9B,MAAMoG,QAAQ,GAAGpG,MAAM,CAAC,EAAE,CAAC;EAE3B,MAAMqG,WAAW,GAAGlG,WAAW,CAAC,CAACsB,CAAC,EAACC,CAAC,KAAG4B,IAAI,CAACgD,KAAK,CAAC7E,CAAC,CAACe,CAAC,GAACd,CAAC,CAACc,CAAC,EAACf,CAAC,CAACgB,CAAC,GAACf,CAAC,CAACe,CAAC,CAAC,EAAC,EAAE,CAAC;EAEtE,MAAM8D,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAI;MAAA,IAAAC,eAAA,EAAAC,oBAAA;MACF,CAAAD,eAAA,GAAAvB,MAAM,CAACyB,OAAO,cAAAF,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBG,IAAI,cAAAF,oBAAA,uBAApBA,oBAAA,CAAAG,IAAA,CAAAJ,eAAuB,CAAC;MACxB,MAAMK,CAAC,GAAG/B,QAAQ,CAAC4B,OAAO;MAC1B,CAAAG,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEC,SAAS,KAAID,CAAC,CAACC,SAAS,CAACC,SAAS,CAAC,CAAC,CAACC,OAAO,CAACC,CAAC,IAAEA,CAAC,CAACN,IAAI,CAAC,CAAC,CAAC;MAC5D,IAAIE,CAAC,EAAEA,CAAC,CAACC,SAAS,GAAG,IAAI;IAC3B,CAAC,CAAC,MAAM,CAAC;EACX,CAAC;EAED,MAAMI,WAAW,GAAG,MAAOC,IAAI,IAAK;IAClC,MAAMN,CAAC,GAAG/B,QAAQ,CAAC4B,OAAO;IAC1B,MAAMU,MAAM,GAAG,IAAI/G,MAAM,CAACwG,CAAC,EAAE;MAC3BQ,OAAO,EAAE,MAAAA,CAAA,KAAY;QAAE,MAAMF,IAAI,CAACG,IAAI,CAAC;UAAEC,KAAK,EAAEV;QAAE,CAAC,CAAC;MAAE,CAAC;MACvDjF,KAAK,EAAE,IAAI;MAAE4F,MAAM,EAAE;IACvB,CAAC,CAAC;IACFvC,MAAM,CAACyB,OAAO,GAAGU,MAAM;IACvBA,MAAM,CAACK,KAAK,CAAC,CAAC;EAChB,CAAC;EAEDxH,SAAS,CAAC,MAAM;IACd,MAAMyH,MAAM,GAAG3C,SAAS,CAAC2B,OAAO;IAChC,MAAMnF,GAAG,GAAGmG,MAAM,CAACC,UAAU,CAAC,IAAI,CAAC;IAEnC,MAAMR,IAAI,GAAG,IAAI/G,IAAI,CAAC;MACpB;MACAwH,UAAU,EAAGC,IAAI,IAAK,mBAAmBA,IAAI,CAACC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;IACpE,CAAC,CAAC;IACF9C,OAAO,CAAC0B,OAAO,GAAGS,IAAI;IAEtBA,IAAI,CAACY,UAAU,CAAC;MACdC,eAAe,EAAE,eAAe,CAACC,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC;MAAE;MACpEC,eAAe,EAAE,IAAI;MACrBC,kBAAkB,EAAE,KAAK;MACzBC,sBAAsB,EAAE,GAAG;MAC3BC,qBAAqB,EAAE;IACzB,CAAC,CAAC;IAEFpB,IAAI,CAACqB,SAAS,CAAEC,GAAG,IAAK;MACtB,IAAI/C,MAAM,EAAE;MAEZ,MAAM7D,CAAC,GAAG4G,GAAG,CAAClB,KAAK,CAAC3F,KAAK;QAAEE,CAAC,GAAG2G,GAAG,CAAClB,KAAK,CAACC,MAAM;MAC/C,IAAIE,MAAM,CAAC9F,KAAK,KAAKC,CAAC,EAAE6F,MAAM,CAAC9F,KAAK,GAAGC,CAAC;MACxC,IAAI6F,MAAM,CAACF,MAAM,KAAK1F,CAAC,EAAE4F,MAAM,CAACF,MAAM,GAAG1F,CAAC;MAE1CP,GAAG,CAACmH,IAAI,CAAC,CAAC;MACVnH,GAAG,CAACoH,SAAS,CAAC,CAAC,EAAC,CAAC,EAAC9G,CAAC,EAACC,CAAC,CAAC;MACtBP,GAAG,CAACqH,SAAS,CAACH,GAAG,CAAClB,KAAK,EAAC,CAAC,EAAC,CAAC,EAAC1F,CAAC,EAACC,CAAC,CAAC;;MAEhC;MACA,MAAM+G,EAAE,GAAGhH,CAAC,GAACiE,YAAY;QAAEgD,EAAE,GAAGhH,CAAC,GAACgE,YAAY;MAC9C,MAAMiD,EAAE,GAAGlH,CAAC,IAAE,CAAC,GAACiE,YAAY,GAAC,CAAC,CAAC;QAAEkD,EAAE,GAAGlH,CAAC,IAAE,CAAC,GAACgE,YAAY,GAAC,CAAC,CAAC;MAC1D,MAAMmD,QAAQ,GAAG1H,GAAG,CAAC2H,oBAAoB,CAACL,EAAE,EAAEC,EAAE,EAAED,EAAE,GAAGE,EAAE,EAAED,EAAE,GAAGE,EAAE,CAAC;MACnEC,QAAQ,CAACE,YAAY,CAAC,CAAC,EAAE,yBAAyB,CAAC,CAAC,CAAC;MACrDF,QAAQ,CAACE,YAAY,CAAC,GAAG,EAAE,yBAAyB,CAAC,CAAC,CAAC;MACvDF,QAAQ,CAACE,YAAY,CAAC,CAAC,EAAE,yBAAyB,CAAC,CAAC,CAAC;MACrD5H,GAAG,CAACa,WAAW,GAAG6G,QAAQ;MAC1B1H,GAAG,CAACc,SAAS,GAAG,CAAC;MACjBd,GAAG,CAACsC,UAAU,CAACgF,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,CAAC;;MAE9B;MACA,IAAI9D,KAAK,KAAK,WAAW,EAAE;QACzB,MAAMkE,IAAI,GAAG,EAAE;QACf,MAAMC,IAAI,GAAGvH,CAAC,GAAG,IAAI;;QAErB;QACA,MAAMwH,WAAW,GAAG/H,GAAG,CAAC2H,oBAAoB,CAAC,CAACrH,CAAC,GAACyD,KAAK,IAAE,CAAC,EAAE+D,IAAI,EAAE,CAACxH,CAAC,GAACyD,KAAK,IAAE,CAAC,GAAGA,KAAK,EAAE+D,IAAI,CAAC;QAC1FC,WAAW,CAACH,YAAY,CAAC,CAAC,EAAE,yBAAyB,CAAC;QACtDG,WAAW,CAACH,YAAY,CAAC,CAAC,EAAE,yBAAyB,CAAC;QACtD5H,GAAG,CAACgI,SAAS,GAAGD,WAAW;QAC3B/H,GAAG,CAACiI,QAAQ,CAAC,CAAC3H,CAAC,GAACyD,KAAK,IAAE,CAAC,EAAE+D,IAAI,EAAE/D,KAAK,EAAE8D,IAAI,CAAC;;QAE5C;QACA7H,GAAG,CAACa,WAAW,GAAG,0BAA0B;QAC5Cb,GAAG,CAACc,SAAS,GAAG,CAAC;QACjBd,GAAG,CAACsC,UAAU,CAAC,CAAChC,CAAC,GAACyD,KAAK,IAAE,CAAC,EAAE+D,IAAI,EAAE/D,KAAK,EAAE8D,IAAI,CAAC;;QAE9C;QACA7H,GAAG,CAACkI,IAAI,GAAG,2CAA2C;QACtDlI,GAAG,CAACgI,SAAS,GAAG,2BAA2B;QAC3ChI,GAAG,CAACa,WAAW,GAAG,oBAAoB;QACtCb,GAAG,CAACc,SAAS,GAAG,CAAC;QACjB,MAAMqH,IAAI,GAAG,mDAAmD;QAChE,MAAMC,KAAK,GAAGrG,IAAI,CAACC,GAAG,CAAC,EAAE,EAAE,CAAC1B,CAAC,GAAGN,GAAG,CAACqI,WAAW,CAACF,IAAI,CAAC,CAAC9H,KAAK,IAAI,CAAC,CAAC;QACjEL,GAAG,CAACsI,UAAU,CAACH,IAAI,EAAEC,KAAK,EAAEN,IAAI,GAAG,EAAE,CAAC;QACtC9H,GAAG,CAACuI,QAAQ,CAACJ,IAAI,EAAEC,KAAK,EAAEN,IAAI,GAAG,EAAE,CAAC;MACtC;MAEA,MAAM7H,EAAE,GAAGiH,GAAG,CAACsB,aAAa;MAC5B,IAAI,CAACvI,EAAE,EAAE;QAAE6D,SAAS,CAAC,iBAAiB,CAAC;QAAE9D,GAAG,CAACyI,OAAO,CAAC,CAAC;QAAE;MAAQ;;MAEhE;MACApH,QAAQ,CAACrB,GAAG,EAAEC,EAAE,EAAEK,CAAC,EAAEC,CAAC,EAAE,yBAAyB,CAAC;MAClDV,KAAK,CAAC4F,OAAO,CAAC,CAAC,CAACvF,CAAC,EAACC,CAAC,CAAC,KAAGJ,OAAO,CAACC,GAAG,EAACC,EAAE,EAACC,CAAC,EAACC,CAAC,EAAC,SAAS,EAAC,CAAC,EAACG,CAAC,EAACC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC7DT,KAAK,CAAC2F,OAAO,CAAC,CAAC,CAACvF,CAAC,EAACC,CAAC,CAAC,KAAGJ,OAAO,CAACC,GAAG,EAACC,EAAE,EAACC,CAAC,EAACC,CAAC,EAAC,SAAS,EAAC,CAAC,EAACG,CAAC,EAACC,CAAC,CAAC,CAAC,CAAC,CAAC;;MAE7D,MAAMmI,GAAG,GAAIC,CAAC;QAAA,IAAAC,gBAAA,EAAAC,KAAA;QAAA,OAAK,EAAAD,gBAAA,IAAAC,KAAA,GAAC5I,EAAE,CAAC0I,CAAC,CAAC,cAAAE,KAAA,uBAALA,KAAA,CAAOjI,UAAU,cAAAgI,gBAAA,cAAAA,gBAAA,GAAI,CAAC,IAAI,IAAI;MAAA;MAClD,MAAME,WAAW,GAAGJ,GAAG,CAAC,EAAE,CAAC,IAAIA,GAAG,CAAC,EAAE,CAAC;MACtC,MAAMK,MAAM,GAAGL,GAAG,CAAC,EAAE,CAAC,IAAIA,GAAG,CAAC,EAAE,CAAC;MACjC,IAAI,EAAEI,WAAW,IAAIC,MAAM,CAAC,EAAE;QAAEjF,SAAS,CAAC,+BAA+B,CAAC;QAAE9D,GAAG,CAACyI,OAAO,CAAC,CAAC;QAAE;MAAQ;MAEnG,MAAMO,GAAG,GAAG/I,EAAE,CAAC,EAAE,CAAC;QAAEgJ,GAAG,GAAGhJ,EAAE,CAAC,EAAE,CAAC;MAChC,MAAMiJ,IAAI,GAAGjJ,EAAE,CAAC,EAAE,CAAC;QAAEkJ,IAAI,GAAGlJ,EAAE,CAAC,EAAE,CAAC;MAClC,MAAMmJ,GAAG,GAAGV,GAAG,CAAC,EAAE,CAAC,GAAGQ,IAAI,GAAGC,IAAI;;MAEjC;MACA,MAAME,KAAK,GAAG;QAAEpI,CAAC,EAAC,CAAC+H,GAAG,CAAC/H,CAAC,GAACgI,GAAG,CAAChI,CAAC,IAAE,CAAC;QAAEC,CAAC,EAAC,CAAC8H,GAAG,CAAC9H,CAAC,GAAC+H,GAAG,CAAC/H,CAAC,IAAE;MAAE,CAAC;MACtD,MAAMoI,SAAS,GAAG,CAChB;QAAEC,KAAK,EAAEP,GAAG;QAAE5I,KAAK,EAAE;MAAU,CAAC,EAChC;QAAEmJ,KAAK,EAAEN,GAAG;QAAE7I,KAAK,EAAE;MAAU,CAAC,EAChC;QAAEmJ,KAAK,EAAEF,KAAK;QAAEjJ,KAAK,EAAE;MAAU,CAAC,EAClC;QAAEmJ,KAAK,EAAEH,GAAG;QAAEhJ,KAAK,EAAE;MAAU,CAAC,CACjC;MAEDkJ,SAAS,CAAC7D,OAAO,CAAC,CAAC;QAAC8D,KAAK;QAAEnJ;MAAK,CAAC,KAAK;QACpC,IAAImJ,KAAK,EAAE;UACT;UACAvJ,GAAG,CAACwJ,WAAW,GAAGpJ,KAAK;UACvBJ,GAAG,CAACyJ,UAAU,GAAG,EAAE;UACnBzJ,GAAG,CAACgI,SAAS,GAAG5H,KAAK;UACrBJ,GAAG,CAACe,SAAS,CAAC,CAAC;UACff,GAAG,CAAC0J,GAAG,CAACH,KAAK,CAACtI,CAAC,GAACX,CAAC,EAAEiJ,KAAK,CAACrI,CAAC,GAACX,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEwB,IAAI,CAAC4H,EAAE,GAAC,CAAC,CAAC;UAC9C3J,GAAG,CAAC4J,IAAI,CAAC,CAAC;;UAEV;UACA5J,GAAG,CAACyJ,UAAU,GAAG,CAAC;UAClBzJ,GAAG,CAACgI,SAAS,GAAG,OAAO;UACvBhI,GAAG,CAACe,SAAS,CAAC,CAAC;UACff,GAAG,CAAC0J,GAAG,CAACH,KAAK,CAACtI,CAAC,GAACX,CAAC,EAAEiJ,KAAK,CAACrI,CAAC,GAACX,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEwB,IAAI,CAAC4H,EAAE,GAAC,CAAC,CAAC;UAC9C3J,GAAG,CAAC4J,IAAI,CAAC,CAAC;QACZ;MACF,CAAC,CAAC;MACF5J,GAAG,CAACyJ,UAAU,GAAG,CAAC;;MAElB;MACA,MAAMI,MAAM,GAAG,CAACb,GAAG,EAACC,GAAG,EAACG,GAAG,CAAC,CAACU,KAAK,CAACtI,CAAC,IAAIA,CAAC,CAACP,CAAC,GAACX,CAAC,IAAEgH,EAAE,IAAI9F,CAAC,CAACP,CAAC,GAACX,CAAC,IAAEgH,EAAE,GAACE,EAAE,IAAIhG,CAAC,CAACN,CAAC,GAACX,CAAC,IAAEgH,EAAE,IAAI/F,CAAC,CAACN,CAAC,GAACX,CAAC,IAAEgH,EAAE,GAACE,EAAE,CAAC;MAC/F,IAAI,CAACoC,MAAM,EAAE;QAAE/F,SAAS,CAAC,oCAAoC,CAAC;QAAE9D,GAAG,CAACyI,OAAO,CAAC,CAAC;QAAE;MAAQ;MAEvF,IAAI9E,KAAK,KAAK,WAAW,EAAE;QAAEG,SAAS,CAAC,+BAA+B,CAAC;QAAE9D,GAAG,CAACyI,OAAO,CAAC,CAAC;QAAE;MAAQ;MAChG,IAAI,CAACxE,OAAO,EAAE;QAAEH,SAAS,CAAC,8BAA8B,CAAC;QAAE9D,GAAG,CAACyI,OAAO,CAAC,CAAC;QAAE;MAAQ;;MAElF;MACA,MAAMsB,cAAc,GAAGjF,WAAW,CAACkE,GAAG,EAACC,GAAG,CAAC;MAC3C,MAAMe,YAAY,GAAGlF,WAAW,CAACuE,KAAK,EAAED,GAAG,CAAC;MAC5C,IAAIY,YAAY,IAAI,CAAC,EAAE;QAAElG,SAAS,CAAC,aAAa,CAAC;QAAE9D,GAAG,CAACyI,OAAO,CAAC,CAAC;QAAE;MAAQ;MAE1E,MAAMwB,IAAI,GAAGvF,eAAe,CAACS,OAAO;MACpC8E,IAAI,CAACC,IAAI,CAACH,cAAc,CAAC;MAAE,IAAIE,IAAI,CAACvI,MAAM,GAAG8C,gBAAgB,EAAEyF,IAAI,CAACE,KAAK,CAAC,CAAC;MAC3E,MAAMC,GAAG,GAAGH,IAAI,CAACI,MAAM,CAAC,CAACnK,CAAC,EAACC,CAAC,KAAGD,CAAC,GAACC,CAAC,EAAC,CAAC,CAAC,GAAC8J,IAAI,CAACvI,MAAM;MACjD,MAAM4I,MAAM,GAAGvI,IAAI,CAACC,GAAG,CAAC,GAAGiI,IAAI,CAACrI,GAAG,CAAC0D,CAAC,IAAEvD,IAAI,CAACwI,GAAG,CAACjF,CAAC,GAAC8E,GAAG,CAAC,CAAC,CAAC;;MAExD;MACA,MAAMI,UAAU,GAAGzI,IAAI,CAACwI,GAAG,CAAC,CAACvB,GAAG,CAAC/H,CAAC,GAAGgI,GAAG,CAAChI,CAAC,IAAIX,CAAC,CAAC;MAChD,MAAM0C,UAAU,GAAGwH,UAAU,GAAGvG,OAAO;MAEvC,MAAMwG,cAAc,GAAGzH,UAAU,GAAGrD,gBAAgB;MAEpD,IAAI+K,mBAAmB,GAAG,IAAI;MAC9B,IAAIhC,GAAG,CAAC,EAAE,CAAC,IAAIA,GAAG,CAAC,EAAE,CAAC,EAAE;QACtB,MAAMiC,SAAS,GAAG5I,IAAI,CAACwI,GAAG,CAAC,CAACrB,IAAI,CAACjI,CAAC,GAAGkI,IAAI,CAAClI,CAAC,IAAIX,CAAC,CAAC,GAAG2D,OAAO;QAC3DyG,mBAAmB,GAAGC,SAAS,GAAG/K,kBAAkB;MACtD;;MAEA;MACA,MAAMgL,OAAO,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,CAAC,GAAC,EAAE,KAAK;QAClC,IAAID,GAAG,IAAE,IAAI,EAAE,OAAO,IAAI;QAC1BD,GAAG,CAAC1F,OAAO,CAAC+E,IAAI,CAACY,GAAG,CAAC;QACrB,IAAID,GAAG,CAAC1F,OAAO,CAACzD,MAAM,GAACqJ,CAAC,EAAEF,GAAG,CAAC1F,OAAO,CAACgF,KAAK,CAAC,CAAC;QAC7C,MAAMa,CAAC,GAAC,CAAC,GAAGH,GAAG,CAAC1F,OAAO,CAAC,CAAC8F,IAAI,CAAC,CAAC/K,CAAC,EAACC,CAAC,KAAGD,CAAC,GAACC,CAAC,CAAC;QACzC,MAAM+K,CAAC,GAACnJ,IAAI,CAACoJ,KAAK,CAACH,CAAC,CAACtJ,MAAM,GAAC,CAAC,CAAC;QAC9B,OAAOsJ,CAAC,CAACtJ,MAAM,GAAC,CAAC,GAAGsJ,CAAC,CAACE,CAAC,CAAC,GAAG,CAACF,CAAC,CAACE,CAAC,GAAC,CAAC,CAAC,GAACF,CAAC,CAACE,CAAC,CAAC,IAAE,CAAC;MAC5C,CAAC;MACD,MAAME,QAAQ,GAAGR,OAAO,CAACjG,QAAQ,EAAE8F,cAAc,CAAC;MAClD,MAAMY,WAAW,GAAGT,OAAO,CAAChG,WAAW,EAAE5B,UAAU,CAAC;MACpD,MAAMsI,QAAQ,GAAGV,OAAO,CAAC/F,QAAQ,EAAE6F,mBAAmB,CAAC;;MAEvD;MACA,MAAMa,MAAM,GAAG5G,QAAQ,CAACQ,OAAO,CAACzD,MAAM,IAAE,CAAC,GAAGK,IAAI,CAACC,GAAG,CAAC,GAAG2C,QAAQ,CAACQ,OAAO,CAAC,GAACpD,IAAI,CAACE,GAAG,CAAC,GAAG0C,QAAQ,CAACQ,OAAO,CAAC,GAAG,GAAG;MAC7G,MAAMqG,MAAM,GAAGvB,IAAI,CAACvI,MAAM,IAAE8C,gBAAgB,IAAI8F,MAAM,GAAG7F,YAAY,IAAI8G,MAAM,GAAG,GAAG,CAAC,CAAC;;MAEvF,IAAIC,MAAM,IAAIJ,QAAQ,IAAIC,WAAW,EAAE;QACrC,MAAMI,GAAG,GAAG;UACVjJ,OAAO,EAAEkJ,MAAM,CAACN,QAAQ,CAACO,OAAO,CAAC,CAAC,CAAC,CAAC;UACpC3I,UAAU,EAAE0I,MAAM,CAACL,WAAW,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC;UAC1CC,YAAY,EAAEN,QAAQ,GAAGI,MAAM,CAACJ,QAAQ,CAACK,OAAO,CAAC,CAAC,CAAC,CAAC,GAAGE,SAAS;UAChEC,OAAO,EAAE;YAAEC,MAAM,EAAEpH,QAAQ,CAACQ,OAAO,CAACzD,MAAM;YAAEsK,QAAQ,EAAEN,MAAM,CAACH,MAAM,CAACI,OAAO,CAAC,CAAC,CAAC;UAAE;QAClF,CAAC;QACDrH,OAAO,CAACmH,GAAG,CAAC;QACZrH,SAAS,CAAC,IAAI,CAAC;QACfR,QAAQ,CAAC,QAAQ,CAAC;QAClBE,SAAS,CAAC,WAAW,CAAC;QACtBkB,UAAU,CAAC,CAAC;MACd,CAAC,MAAM;QACLlB,SAAS,CAAC,aAAa,CAAC;MAC1B;MAEA9D,GAAG,CAACyI,OAAO,CAAC,CAAC;IACf,CAAC,CAAC;IAEF9C,WAAW,CAACC,IAAI,CAAC;IACjB,OAAO,MAAM;MAAEZ,UAAU,CAAC,CAAC;IAAE,CAAC;EAChC,CAAC,EAAE,CAACrB,KAAK,EAAEM,OAAO,EAAEa,WAAW,EAAEX,MAAM,EAAEJ,KAAK,CAAC,CAAC;EAEhD,MAAMkI,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAIlI,KAAK,GAAG,EAAE,EAAE;IAChBG,UAAU,CAACxE,WAAW,GAAGqE,KAAK,CAAC;IAC/BH,QAAQ,CAAC,SAAS,CAAC;IACnBE,SAAS,CAAC,mEAAmE,CAAC;IAC9E;IACAa,QAAQ,CAACQ,OAAO,GAAG,EAAE;IAAEP,WAAW,CAACO,OAAO,GAAG,EAAE;IAAEN,QAAQ,CAACM,OAAO,GAAG,EAAE;IAAET,eAAe,CAACS,OAAO,GAAG,EAAE;EACtG,CAAC;EAED,MAAM+G,MAAM,GAAGA,CAAA,KAAM;IACnB9H,SAAS,CAAC,KAAK,CAAC;IAAEE,OAAO,CAAC,IAAI,CAAC;IAAEV,QAAQ,CAAC,SAAS,CAAC;IACpDE,SAAS,CAAC,yCAAyC,CAAC;IACpDa,QAAQ,CAACQ,OAAO,GAAG,EAAE;IAAEP,WAAW,CAACO,OAAO,GAAG,EAAE;IAAEN,QAAQ,CAACM,OAAO,GAAG,EAAE;IAAET,eAAe,CAACS,OAAO,GAAG,EAAE;IACpG,IAAI1B,OAAO,CAAC0B,OAAO,EAAEQ,WAAW,CAAClC,OAAO,CAAC0B,OAAO,CAAC;EACnD,CAAC;EAED,MAAMgH,WAAW,GAAGA,CAAA,KAAM;IACxB/H,SAAS,CAAC,KAAK,CAAC;IAAEE,OAAO,CAAC,IAAI,CAAC;IAAEV,QAAQ,CAAC,WAAW,CAAC;IACtDE,SAAS,CAAC,0DAA0D,CAAC;IACrEa,QAAQ,CAACQ,OAAO,GAAG,EAAE;IAAEP,WAAW,CAACO,OAAO,GAAG,EAAE;IAAEN,QAAQ,CAACM,OAAO,GAAG,EAAE;IAAET,eAAe,CAACS,OAAO,GAAG,EAAE;IACpG,IAAI1B,OAAO,CAAC0B,OAAO,EAAEQ,WAAW,CAAClC,OAAO,CAAC0B,OAAO,CAAC;EACnD,CAAC;;EAED;EACA,MAAMiH,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAIzI,KAAK,KAAK,QAAQ,EAAE,oBAAOlE,OAAA,CAACN,WAAW;MAACkN,SAAS,EAAC;IAA0B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;IACnF,IAAI9I,KAAK,KAAK,SAAS,EAAE,oBAAOlE,OAAA,CAACR,QAAQ;MAACoN,SAAS,EAAC;IAAqC;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;IAC5F,oBAAOhN,OAAA,CAACP,MAAM;MAACmN,SAAS,EAAC;IAAwB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACtD,CAAC;EAED,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI/I,KAAK,KAAK,QAAQ,EAAE,OAAO,+BAA+B;IAC9D,IAAIA,KAAK,KAAK,SAAS,EAAE,OAAO,2BAA2B;IAC3D,OAAO,8BAA8B;EACvC,CAAC;EAED,oBACElE,OAAA;IAAK4M,SAAS,EAAC,kGAAkG;IAAAM,QAAA,gBAE/GlN,OAAA;MAAK4M,SAAS,EAAC,kBAAkB;MAAAM,QAAA,gBAC/BlN,OAAA;QAAK4M,SAAS,EAAC;MAAsF;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAC5GhN,OAAA;QAAK4M,SAAS,EAAC;MAAwG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAC9HhN,OAAA;QAAK4M,SAAS,EAAC;MAAgJ;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnK,CAAC,eAENhN,OAAA;MAAK4M,SAAS,EAAC,uDAAuD;MAAAM,QAAA,gBAEpElN,OAAA;QAAK4M,SAAS,EAAC,8DAA8D;QAAAM,QAAA,gBAC3ElN,OAAA;UAAK4M,SAAS,EAAC,6BAA6B;UAAAM,QAAA,gBAC1ClN,OAAA;YAAK4M,SAAS,EAAC,gHAAgH;YAAAM,QAAA,eAC7HlN,OAAA,CAACT,QAAQ;cAACqN,SAAS,EAAC;YAAoB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxC,CAAC,eACNhN,OAAA;YAAAkN,QAAA,gBACElN,OAAA;cAAI4M,SAAS,EAAC,+BAA+B;cAAAM,QAAA,EAAC;YAAc;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACjEhN,OAAA;cAAG4M,SAAS,EAAC,uBAAuB;cAAAM,QAAA,EAAC;YAAuB;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7D,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAGNhN,OAAA;UAAK4M,SAAS,EAAC,6BAA6B;UAAAM,QAAA,eAC1ClN,OAAA;YAAK4M,SAAS,EAAE,oBAAoBK,aAAa,CAAC,CAAC,2EAA4E;YAAAC,QAAA,eAC7HlN,OAAA;cAAK4M,SAAS,EAAC,wCAAwC;cAAAM,QAAA,GACpDP,aAAa,CAAC,CAAC,eAChB3M,OAAA;gBAAM4M,SAAS,EAAC,qBAAqB;gBAAAM,QAAA,EAAE9I;cAAM;gBAAAyI,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClD;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNhN,OAAA;QAAK4M,SAAS,EAAC,gDAAgD;QAAAM,QAAA,eAC7DlN,OAAA;UAAK4M,SAAS,EAAC,4GAA4G;UAAAM,QAAA,eACzHlN,OAAA;YAAK4M,SAAS,EAAC,uBAAuB;YAAAM,QAAA,gBACpClN,OAAA;cAAOoL,GAAG,EAAEtH,QAAS;cAAC8I,SAAS,EAAC,oEAAoE;cAACO,QAAQ;cAACC,KAAK;cAACC,WAAW;YAAA;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAClIhN,OAAA;cAAQoL,GAAG,EAAErH,SAAU;cAAC6I,SAAS,EAAC;YAAmE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,EAGvG9I,KAAK,KAAK,WAAW,iBACpBlE,OAAA;cAAK4M,SAAS,EAAC,uDAAuD;cAAAM,QAAA,eACpElN,OAAA;gBAAK4M,SAAS,EAAC,sFAAsF;gBAAAM,QAAA,eACnGlN,OAAA;kBAAK4M,SAAS,EAAC,6BAA6B;kBAAAM,QAAA,gBAC1ClN,OAAA;oBAAK4M,SAAS,EAAC,6BAA6B;oBAAAM,QAAA,gBAC1ClN,OAAA,CAACP,MAAM;sBAACmN,SAAS,EAAC;oBAAwB;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eAC7ChN,OAAA;sBAAM4M,SAAS,EAAC,mCAAmC;sBAAAM,QAAA,EAAC;oBAAoB;sBAAAL,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC5E,CAAC,eACNhN,OAAA;oBACEsN,IAAI,EAAC,OAAO;oBACZ9K,GAAG,EAAE,GAAI;oBACTD,GAAG,EAAE,GAAI;oBACTgL,KAAK,EAAEjJ,KAAM;oBACbkJ,QAAQ,EAAGC,CAAC,IAAGlJ,QAAQ,CAAC0H,MAAM,CAACwB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAAE;oBAChDX,SAAS,EAAC;kBAAsB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACjC,CAAC,eACFhN,OAAA;oBACE2N,OAAO,EAAEnB,cAAe;oBACxBI,SAAS,EAAC,gOAAgO;oBAAAM,QAAA,gBAE1OlN,OAAA,CAACN,WAAW;sBAACkN,SAAS,EAAC;oBAAS;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eACnChN,OAAA;sBAAAkN,QAAA,EAAM;oBAAe;sBAAAL,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACtB,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CACN,EAGA9I,KAAK,KAAK,QAAQ,IAAIU,IAAI,iBACzB5E,OAAA;cAAK4M,SAAS,EAAC,sFAAsF;cAAAM,QAAA,eACnGlN,OAAA;gBAAK4M,SAAS,EAAC,yGAAyG;gBAAAM,QAAA,gBAEtHlN,OAAA;kBAAK4M,SAAS,EAAC,4BAA4B;kBAAAM,QAAA,GAAC,kCACV,EAAChJ,KAAK,EAAC,UAAQ,EAAC0J,IAAI,CAACC,SAAS,CAACjJ,IAAI,CAAC;gBAAA;kBAAAiI,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACjE,CAAC,eAENhN,OAAA;kBAAK4M,SAAS,EAAC,kBAAkB;kBAAAM,QAAA,gBAC/BlN,OAAA;oBAAK4M,SAAS,EAAC,qHAAqH;oBAAAM,QAAA,eAClIlN,OAAA,CAACN,WAAW;sBAACkN,SAAS,EAAC;oBAAoB;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC3C,CAAC,eACNhN,OAAA;oBAAI4M,SAAS,EAAC,kCAAkC;oBAAAM,QAAA,EAAC;kBAAqB;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eAC3EhN,OAAA;oBAAG4M,SAAS,EAAC,oBAAoB;oBAAAM,QAAA,EAAC;kBAAsD;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACzF,CAAC,eAGNhN,OAAA;kBAAK4M,SAAS,EAAC,uFAAuF;kBAAAM,QAAA,eACpGlN,OAAA;oBAAK4M,SAAS,EAAC,wBAAwB;oBAAAM,QAAA,gBACrClN,OAAA;sBAAK4M,SAAS,EAAC,aAAa;sBAAAM,QAAA,gBAC1BlN,OAAA;wBAAK4M,SAAS,EAAC,uCAAuC;wBAAAM,QAAA,EAAEtI,IAAI,CAAC7B;sBAAO;wBAAA8J,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC,eAC3EhN,OAAA;wBAAK4M,SAAS,EAAC,+CAA+C;wBAAAM,QAAA,EAAC;sBAAE;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAK,CAAC,eACvEhN,OAAA;wBAAK4M,SAAS,EAAC,mCAAmC;wBAAAM,QAAA,EAAC;sBAAqB;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAK,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAC3E,CAAC,eACNhN,OAAA;sBAAK4M,SAAS,EAAC,aAAa;sBAAAM,QAAA,gBAC1BlN,OAAA;wBAAK4M,SAAS,EAAC,0CAA0C;wBAAAM,QAAA,EAAEtI,IAAI,CAACrB;sBAAU;wBAAAsJ,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC,eACjFhN,OAAA;wBAAK4M,SAAS,EAAC,+CAA+C;wBAAAM,QAAA,EAAC;sBAAE;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAK,CAAC,eACvEhN,OAAA;wBAAK4M,SAAS,EAAC,mCAAmC;wBAAAM,QAAA,EAAC;sBAAc;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAK,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACpE,CAAC,EACLpI,IAAI,CAACuH,YAAY,iBAChBnM,OAAA;sBAAK4M,SAAS,EAAC,wBAAwB;sBAAAM,QAAA,gBACrClN,OAAA;wBAAK4M,SAAS,EAAC,yCAAyC;wBAAAM,QAAA,EAAEtI,IAAI,CAACuH;sBAAY;wBAAAU,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC,eAClFhN,OAAA;wBAAK4M,SAAS,EAAC,+CAA+C;wBAAAM,QAAA,EAAC;sBAAE;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAK,CAAC,eACvEhN,OAAA;wBAAK4M,SAAS,EAAC,mCAAmC;wBAAAM,QAAA,EAAC;sBAAW;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAK,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACjE,CACN;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eAGNhN,OAAA;kBAAK4M,SAAS,EAAC,yFAAyF;kBAAAM,QAAA,gBACtGlN,OAAA;oBAAK4M,SAAS,EAAC,kCAAkC;oBAAAM,QAAA,gBAC/ClN,OAAA,CAACH,GAAG;sBAAC+M,SAAS,EAAC;oBAAuB;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eACzChN,OAAA;sBAAM4M,SAAS,EAAC,6BAA6B;sBAAAM,QAAA,EAAC;oBAAgB;sBAAAL,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAClE,CAAC,eACNhN,OAAA;oBAAK4M,SAAS,EAAC,qGAAqG;oBAAAM,QAAA,EACjHpK,gBAAgB,CAAC8B,IAAI,CAAC7B,OAAO;kBAAC;oBAAA8J,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC5B,CAAC,eACNhN,OAAA;oBAAK4M,SAAS,EAAC,uBAAuB;oBAAAM,QAAA,GACnC5J,SAAS,CAACsB,IAAI,CAAC7B,OAAO,EAAE6B,IAAI,CAACrB,UAAU,CAAC,EAAC,gCAC5C;kBAAA;oBAAAsJ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eAGNhN,OAAA;kBAAK4M,SAAS,EAAC,iCAAiC;kBAAAM,QAAA,gBAC9ClN,OAAA;oBAAK4M,SAAS,EAAC,2CAA2C;oBAAAM,QAAA,gBACxDlN,OAAA;sBAAK4M,SAAS,EAAC,6BAA6B;sBAAAM,QAAA,gBAC1ClN,OAAA,CAACF,WAAW;wBAAC8M,SAAS,EAAC;sBAAuB;wBAAAC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAAC,eACjDhN,OAAA;wBAAM4M,SAAS,EAAC,eAAe;wBAAAM,QAAA,EAAC;sBAAmB;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACvD,CAAC,eACNhN,OAAA;sBAAK4M,SAAS,EAAC,6BAA6B;sBAAAM,QAAA,gBAC1ClN,OAAA;wBAAK4M,SAAS,EAAC;sBAAqC;wBAAAC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC,eAC3DhN,OAAA;wBAAM4M,SAAS,EAAC,8BAA8B;wBAAAM,QAAA,EAAC;sBAAS;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAC5D,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACH,CAAC,eACNhN,OAAA;oBAAK4M,SAAS,EAAC,4BAA4B;oBAAAM,QAAA,GACxCtI,IAAI,CAACyH,OAAO,CAACC,MAAM,EAAC,0BAAmB,EAAC1H,IAAI,CAACyH,OAAO,CAACE,QAAQ,EAAC,uBACjE;kBAAA;oBAAAM,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eAGNhN,OAAA;kBAAK4M,SAAS,EAAC,+DAA+D;kBAAAM,QAAA,gBAC5ElN,OAAA;oBACE2N,OAAO,EAAElB,MAAO;oBAChBG,SAAS,EAAC,qMAAqM;oBAAAM,QAAA,gBAE/MlN,OAAA,CAACL,SAAS;sBAACiN,SAAS,EAAC;oBAAc;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,UAExC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,eACThN,OAAA;oBACE2N,OAAO,EAAEjB,WAAY;oBACrBE,SAAS,EAAC,qMAAqM;oBAAAM,QAAA,gBAE/MlN,OAAA,CAACP,MAAM;sBAACmN,SAAS,EAAC;oBAAc;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eAErC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,eACThN,OAAA;oBACE2N,OAAO,EAAEA,CAAA,KAAIG,MAAM,CAACC,KAAK,CAAC,CAAE;oBAC5BnB,SAAS,EAAC,qQAAqQ;oBAAAM,QAAA,gBAE/QlN,OAAA,CAACJ,QAAQ;sBAACgN,SAAS,EAAC;oBAAc;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,QAEvC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC,eAGNhN,OAAA;kBAAK4M,SAAS,EAAC,MAAM;kBAAAM,QAAA,eACnBlN,OAAA;oBACE2N,OAAO,EAAEA,CAAA,KAAM;sBACb,MAAMK,eAAe,GAAGlL,gBAAgB,CAAC8B,IAAI,CAAC7B,OAAO,CAAC;sBACtD,IAAIiL,eAAe,EAAE;wBACnBF,MAAM,CAACG,QAAQ,CAACC,IAAI,GAAG,yBAAyBF,eAAe,EAAE;sBACnE;oBACF,CAAE;oBACFpB,SAAS,EAAC,0OAA0O;oBAAAM,QAAA,gBAEpPlN,OAAA,CAACT,QAAQ;sBAACqN,SAAS,EAAC;oBAAc;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,mCAEvC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNhN,OAAA;QAAK4M,SAAS,EAAC,4BAA4B;QAAAM,QAAA,eACzClN,OAAA;UAAK4M,SAAS,EAAC,qEAAqE;UAAAM,QAAA,eAClFlN,OAAA;YAAK4M,SAAS,EAAC,wBAAwB;YAAAM,QAAA,gBACrClN,OAAA;cAAK4M,SAAS,EAAC,iDAAiD;cAAAM,QAAA,gBAC9DlN,OAAA,CAACV,UAAU;gBAACsN,SAAS,EAAC;cAAuB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAChDhN,OAAA;gBAAI4M,SAAS,EAAC,eAAe;gBAAAM,QAAA,EAAC;cAAY;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5C,CAAC,eACNhN,OAAA;cAAK4M,SAAS,EAAC,iCAAiC;cAAAM,QAAA,GAC7ChJ,KAAK,KAAK,WAAW,iBACpBlE,OAAA;gBAAAkN,QAAA,EAAG;cAAkG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CACzG,EACA9I,KAAK,KAAK,SAAS,iBAClBlE,OAAA;gBAAAkN,QAAA,EAAG;cAA6F;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CACpG,EACA9I,KAAK,KAAK,QAAQ,iBACjBlE,OAAA;gBAAAkN,QAAA,EAAG;cAAoF;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAC3F;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAGL9I,KAAK,KAAK,QAAQ,IAAIU,IAAI,iBACzB5E,OAAA;QAAK4M,SAAS,EAAC,4BAA4B;QAAAM,QAAA,eACzClN,OAAA;UAAK4M,SAAS,EAAC,+EAA+E;UAAAM,QAAA,eAC5FlN,OAAA;YAAK4M,SAAS,EAAC,2BAA2B;YAAAM,QAAA,gBACxClN,OAAA;cAAI4M,SAAS,EAAC,wBAAwB;cAAAM,QAAA,EAAC;YAAsB;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAGlEhN,OAAA;cAAK4M,SAAS,EAAC,4CAA4C;cAAAM,QAAA,gBACzDlN,OAAA;gBAAK4M,SAAS,EAAC,kDAAkD;gBAAAM,QAAA,gBAC/DlN,OAAA;kBAAK4M,SAAS,EAAC,kCAAkC;kBAAAM,QAAA,EAAE,EAAAvJ,aAAA,GAAAiB,IAAI,CAAC7B,OAAO,cAAAY,aAAA,uBAAZA,aAAA,CAAcuI,OAAO,CAAC,CAAC,CAAC,KAAI;gBAAK;kBAAAW,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC3FhN,OAAA;kBAAK4M,SAAS,EAAC,uBAAuB;kBAAAM,QAAA,EAAC;gBAAU;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpD,CAAC,eACNhN,OAAA;gBAAK4M,SAAS,EAAC,wDAAwD;gBAAAM,QAAA,gBACrElN,OAAA;kBAAK4M,SAAS,EAAC,qCAAqC;kBAAAM,QAAA,EAAE,EAAAtJ,gBAAA,GAAAgB,IAAI,CAACrB,UAAU,cAAAK,gBAAA,uBAAfA,gBAAA,CAAiBsI,OAAO,CAAC,CAAC,CAAC,KAAI;gBAAK;kBAAAW,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACjGhN,OAAA;kBAAK4M,SAAS,EAAC,0BAA0B;kBAAAM,QAAA,EAAC;gBAAa;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1D,CAAC,eACNhN,OAAA;gBAAK4M,SAAS,EAAC,sDAAsD;gBAAAM,QAAA,gBACnElN,OAAA;kBAAK4M,SAAS,EAAC,oCAAoC;kBAAAM,QAAA,EAAE,EAAArJ,kBAAA,GAAAe,IAAI,CAACuH,YAAY,cAAAtI,kBAAA,uBAAjBA,kBAAA,CAAmBqI,OAAO,CAAC,CAAC,CAAC,KAAI;gBAAK;kBAAAW,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAClGhN,OAAA;kBAAK4M,SAAS,EAAC,yBAAyB;kBAAAM,QAAA,EAAC;gBAAU;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtD,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAGNhN,OAAA;cAAK4M,SAAS,EAAC,wFAAwF;cAAAM,QAAA,gBACrGlN,OAAA;gBAAK4M,SAAS,EAAC,0CAA0C;gBAAAM,QAAA,EAAC;cAAgB;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAChFhN,OAAA;gBAAK4M,SAAS,EAAC,gGAAgG;gBAAAM,QAAA,EAC5GpK,gBAAgB,CAAC8B,IAAI,CAAC7B,OAAO;cAAC;gBAAA8J,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC5B,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAGNhN,OAAA;cAAK4M,SAAS,EAAC,gDAAgD;cAAAM,QAAA,gBAC7DlN,OAAA;gBACE2N,OAAO,EAAElB,MAAO;gBAChBG,SAAS,EAAC,mIAAmI;gBAAAM,QAAA,EAC9I;cAED;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACThN,OAAA;gBACE2N,OAAO,EAAEjB,WAAY;gBACrBE,SAAS,EAAC,mIAAmI;gBAAAM,QAAA,EAC9I;cAED;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACThN,OAAA;gBACE2N,OAAO,EAAEA,CAAA,KAAM;kBACb,MAAMK,eAAe,GAAGlL,gBAAgB,CAAC8B,IAAI,CAAC7B,OAAO,CAAC;kBACtD,IAAIiL,eAAe,EAAE;oBACnBF,MAAM,CAACG,QAAQ,CAACC,IAAI,GAAG,yBAAyBF,eAAe,EAAE;kBACnE;gBACF,CAAE;gBACFpB,SAAS,EAAC,wKAAwK;gBAAAM,QAAA,EACnL;cAED;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACtJ,EAAA,CAzhBuBD,OAAO;AAAA0K,EAAA,GAAP1K,OAAO;AAAA,IAAA0K,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}