{"ast":null,"code":"var _jsxFileName = \"/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { Camera as CameraIcon, Sparkles, Activity, Target } from 'lucide-react';\n\n// Constants - FIXED FOR REALISTIC MEASUREMENTS\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst A4_WIDTH_CM = 21.0;\nconst CHEST_MULTIPLIER = 3.2; // Increased from 1.75 to get realistic chest measurements\nconst UPPER_WAIST_FACTOR = 1.8; // Increased from 0.90 to get realistic waist measurements\n\n// BALANCED SIZE RECOMMENDATION SYSTEM - All measurements equally important\nconst recommendSize = (chestCm, shoulderCm, waistCm) => {\n  if (!chestCm || !shoulderCm || !waistCm || chestCm <= 0 || shoulderCm <= 0 || waistCm <= 0) {\n    return null;\n  }\n\n  // REALISTIC SIZE RANGES (in cm) - Based on actual human measurements\n  const sizeRanges = {\n    XXS: {\n      chest: [70, 80],\n      shoulder: [32, 37],\n      waist: [55, 62]\n    },\n    XS: {\n      chest: [80, 85],\n      shoulder: [37, 40],\n      waist: [62, 67]\n    },\n    S: {\n      chest: [85, 90],\n      shoulder: [40, 43],\n      waist: [67, 72]\n    },\n    M: {\n      chest: [90, 95],\n      shoulder: [43, 46],\n      waist: [72, 77]\n    },\n    L: {\n      chest: [95, 100],\n      shoulder: [46, 49],\n      waist: [77, 82]\n    },\n    XL: {\n      chest: [100, 105],\n      shoulder: [49, 52],\n      waist: [82, 87]\n    },\n    XXL: {\n      chest: [105, 110],\n      shoulder: [52, 55],\n      waist: [87, 92]\n    },\n    '3XL': {\n      chest: [110, 115],\n      shoulder: [55, 58],\n      waist: [92, 97]\n    },\n    '4XL': {\n      chest: [115, 120],\n      shoulder: [58, 61],\n      waist: [97, 102]\n    }\n  };\n\n  // Calculate size score for each measurement (0-8)\n  const getSizeScore = (value, ranges) => {\n    const sizes = ['XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL', '3XL', '4XL'];\n    for (let i = 0; i < sizes.length; i++) {\n      const size = sizes[i];\n      if (value >= ranges[size][0] && value < ranges[size][1]) {\n        return i;\n      }\n    }\n    // Handle values outside ranges\n    if (value < ranges.XXS[0]) return 0; // XXS\n    return 8; // 4XL\n  };\n\n  // Get individual scores - ALL EQUALLY IMPORTANT\n  const chestScore = getSizeScore(chestCm, sizeRanges);\n  const shoulderScore = getSizeScore(shoulderCm, sizeRanges);\n  const waistScore = getSizeScore(waistCm, sizeRanges);\n\n  // BALANCED CALCULATION - All measurements equally important\n  const averageScore = (chestScore + shoulderScore + waistScore) / 3;\n\n  // Small body proportion adjustments (much smaller than before)\n  let finalScore = averageScore;\n\n  // Waist-to-chest ratio (body shape indicator)\n  const waistChestRatio = waistCm / chestCm;\n  if (waistChestRatio < 0.65) {\n    // Very slim/athletic - go down slightly\n    finalScore -= 0.15;\n  } else if (waistChestRatio > 0.95) {\n    // Fuller build - go up slightly\n    finalScore += 0.15;\n  }\n\n  // Shoulder-to-chest ratio (shoulder width indicator)\n  const shoulderChestRatio = shoulderCm / chestCm;\n  if (shoulderChestRatio > 0.55) {\n    // Broad shoulders - go up slightly\n    finalScore += 0.1;\n  } else if (shoulderChestRatio < 0.35) {\n    // Narrow shoulders - go down slightly\n    finalScore -= 0.1;\n  }\n\n  // Convert to size with bounds checking\n  const sizeOrder = ['XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL', '3XL', '4XL'];\n  const sizeIndex = Math.max(0, Math.min(sizeOrder.length - 1, Math.round(finalScore)));\n  const finalSize = sizeOrder[sizeIndex];\n\n  // Enhanced logging\n  console.log(`🎯 BALANCED SIZE CALCULATION:`, {\n    measurements: {\n      chestCm: chestCm.toFixed(1),\n      shoulderCm: shoulderCm.toFixed(1),\n      waistCm: waistCm.toFixed(1)\n    },\n    scores: {\n      chest: chestScore,\n      shoulder: shoulderScore,\n      waist: waistScore\n    },\n    calculation: {\n      averageScore: averageScore.toFixed(2),\n      finalScore: finalScore.toFixed(2),\n      finalSize\n    },\n    ratios: {\n      waistChest: waistChestRatio.toFixed(3),\n      shoulderChest: shoulderChestRatio.toFixed(3)\n    }\n  });\n  return finalSize;\n};\n\n// Measurement validation\nconst validateMeasurements = (chestCm, shoulderCm, waistCm) => {\n  const warnings = [];\n  const errors = [];\n\n  // Check for unrealistic measurements\n  if (chestCm < 60 || chestCm > 150) {\n    errors.push(`Chest measurement (${chestCm}cm) is unrealistic. Expected: 60-150cm`);\n  } else if (chestCm < 70 || chestCm > 130) {\n    warnings.push(`Chest measurement (${chestCm}cm) is outside normal range (70-130cm)`);\n  }\n  if (shoulderCm < 25 || shoulderCm > 80) {\n    errors.push(`Shoulder measurement (${shoulderCm}cm) is unrealistic. Expected: 25-80cm`);\n  } else if (shoulderCm < 35 || shoulderCm > 65) {\n    warnings.push(`Shoulder measurement (${shoulderCm}cm) is outside normal range (35-65cm)`);\n  }\n  if (waistCm < 40 || waistCm > 120) {\n    errors.push(`Waist measurement (${waistCm}cm) is unrealistic. Expected: 40-120cm`);\n  } else if (waistCm < 55 || waistCm > 100) {\n    warnings.push(`Waist measurement (${waistCm}cm) is outside normal range (55-100cm)`);\n  }\n  return {\n    warnings,\n    errors,\n    isValid: errors.length === 0\n  };\n};\n\n// Fit recommendations\nconst getFitRecommendation = (chestCm, shoulderCm, waistCm) => {\n  if (!chestCm || !shoulderCm || !waistCm) return \"Standard fit recommended\";\n  const shoulderChestRatio = shoulderCm / chestCm;\n  const waistChestRatio = waistCm / chestCm;\n  if (shoulderChestRatio > 0.55 && waistChestRatio < 0.80) {\n    return \"Athletic fit (broad shoulders, slim waist)\";\n  } else if (waistChestRatio < 0.75) {\n    return \"Slim fit (athletic build)\";\n  } else if (waistChestRatio > 0.90) {\n    return \"Regular/comfortable fit\";\n  }\n  return \"Standard fit\";\n};\nexport default function Measure() {\n  _s();\n  var _meas$chestCm, _meas$shoulderCm, _meas$upperWaistCm;\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n  const [phase, setPhase] = useState(\"calibrate\");\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [barPx, setBarPx] = useState(300);\n  const [cmPerPx, setCmPerPx] = useState(null);\n  const [locked, setLocked] = useState(false);\n  const [meas, setMeas] = useState(null);\n\n  // Stability settings\n  const STABILITY_FRAMES = 12;\n  const MOVEMENT_EPS = 0.015;\n  const recentShoulderN = useRef([]);\n  const chestBuf = useRef([]);\n  const shoulderBuf = useRef([]);\n  const waistBuf = useRef([]);\n  const getDistance = useCallback((a, b) => Math.hypot(a.x - b.x, a.y - b.y), []);\n  const stopCamera = () => {\n    try {\n      var _camRef$current, _camRef$current$stop;\n      (_camRef$current = camRef.current) === null || _camRef$current === void 0 ? void 0 : (_camRef$current$stop = _camRef$current.stop) === null || _camRef$current$stop === void 0 ? void 0 : _camRef$current$stop.call(_camRef$current);\n      const v = videoRef.current;\n      (v === null || v === void 0 ? void 0 : v.srcObject) && v.srcObject.getTracks().forEach(t => t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  };\n  const startCamera = async pose => {\n    const v = videoRef.current;\n    const camera = new Camera(v, {\n      onFrame: async () => {\n        await pose.send({\n          image: v\n        });\n      },\n      width: 1280,\n      height: 720\n    });\n    camRef.current = camera;\n    camera.start();\n  };\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    try {\n      const pose = new Pose({\n        locateFile: file => `/mediapipe/pose/${file.replace('simd_', '')}`\n      });\n      poseRef.current = pose;\n      pose.setOptions({\n        modelComplexity: 0,\n        smoothLandmarks: true,\n        enableSegmentation: false,\n        minDetectionConfidence: 0.6,\n        minTrackingConfidence: 0.6\n      });\n      pose.onResults(res => {\n        if (locked) return;\n        const W = res.image.width,\n          H = res.image.height;\n        if (canvas.width !== W) canvas.width = W;\n        if (canvas.height !== H) canvas.height = H;\n        ctx.save();\n        ctx.clearRect(0, 0, W, H);\n        ctx.drawImage(res.image, 0, 0, W, H);\n\n        // Guide box\n        const gx = W * 0.08,\n          gy = H * 0.08;\n        const gW = W * (1 - 0.08 * 2),\n          gH = H * (1 - 0.08 * 2);\n        ctx.strokeStyle = \"rgba(59, 130, 246, 0.8)\";\n        ctx.lineWidth = 4;\n        ctx.strokeRect(gx, gy, gW, gH);\n\n        // Calibration bar\n        if (phase === \"calibrate\") {\n          const barH = 20;\n          const barY = H * 0.12;\n          ctx.fillStyle = \"rgba(59, 130, 246, 0.9)\";\n          ctx.fillRect((W - barPx) / 2, barY, barPx, barH);\n          ctx.strokeStyle = \"rgba(255, 255, 255, 0.9)\";\n          ctx.lineWidth = 2;\n          ctx.strokeRect((W - barPx) / 2, barY, barPx, barH);\n          ctx.font = \"16px system-ui, sans-serif\";\n          ctx.fillStyle = \"rgba(255, 255, 255, 0.95)\";\n          const text = \"Match this bar to A4 width (21 cm) at chest depth\";\n          const textX = Math.max(20, (W - ctx.measureText(text).width) / 2);\n          ctx.fillText(text, textX, barY - 15);\n        }\n        const lm = res.poseLandmarks;\n        if (!lm) {\n          setStatus(\"Detecting body…\");\n          ctx.restore();\n          return;\n        }\n\n        // Check visibility\n        const vis = i => {\n          var _lm$i$visibility, _lm$i;\n          return ((_lm$i$visibility = (_lm$i = lm[i]) === null || _lm$i === void 0 ? void 0 : _lm$i.visibility) !== null && _lm$i$visibility !== void 0 ? _lm$i$visibility : 0) > 0.45;\n        };\n        const shouldersOK = vis(11) && vis(12);\n        const hipsOK = vis(23) || vis(24);\n        if (!(shouldersOK && hipsOK)) {\n          setStatus(\"Show shoulders & upper torso.\");\n          ctx.restore();\n          return;\n        }\n        const Lsh = lm[11],\n          Rsh = lm[12];\n        const Lhip = lm[23],\n          Rhip = lm[24];\n        const hip = vis(23) ? Lhip : Rhip;\n        const shMid = {\n          x: (Lsh.x + Rsh.x) / 2,\n          y: (Lsh.y + Rsh.y) / 2\n        };\n\n        // Draw key points\n        [Lsh, Rsh, shMid, hip].forEach(point => {\n          if (point) {\n            ctx.fillStyle = \"#3B82F6\";\n            ctx.beginPath();\n            ctx.arc(point.x * W, point.y * H, 8, 0, Math.PI * 2);\n            ctx.fill();\n          }\n        });\n\n        // Check if inside guide\n        const inside = [Lsh, Rsh, hip].every(p => p.x * W >= gx && p.x * W <= gx + gW && p.y * H >= gy && p.y * H <= gy + gH);\n        if (!inside) {\n          setStatus(\"Step back/center inside the frame.\");\n          ctx.restore();\n          return;\n        }\n        if (phase === \"calibrate\") {\n          setStatus(\"Adjust bar → Set calibration.\");\n          ctx.restore();\n          return;\n        }\n        if (!cmPerPx) {\n          setStatus(\"Click Set calibration first.\");\n          ctx.restore();\n          return;\n        }\n\n        // Calculate measurements\n        const shoulderWidthN = getDistance(Lsh, Rsh);\n        const bufN = recentShoulderN.current;\n        bufN.push(shoulderWidthN);\n        if (bufN.length > STABILITY_FRAMES) bufN.shift();\n        const avg = bufN.reduce((a, b) => a + b, 0) / bufN.length;\n        const maxDev = Math.max(...bufN.map(v => Math.abs(v - avg)));\n\n        // Measurements in cm\n        const shoulderPx = Math.abs((Lsh.x - Rsh.x) * W);\n        const shoulderCm = shoulderPx * cmPerPx;\n        const chestCmInstant = shoulderCm * CHEST_MULTIPLIER;\n        let upperWaistCmInstant = null;\n        if (vis(23) && vis(24)) {\n          const hipFlatCm = Math.abs((Lhip.x - Rhip.x) * W) * cmPerPx;\n          upperWaistCmInstant = hipFlatCm * UPPER_WAIST_FACTOR;\n        }\n\n        // Median smoothing\n        const pushMed = (ref, val, n = 15) => {\n          if (val == null) return null;\n          ref.current.push(val);\n          if (ref.current.length > n) ref.current.shift();\n          const s = [...ref.current].sort((a, b) => a - b);\n          const m = Math.floor(s.length / 2);\n          return s.length % 2 ? s[m] : (s[m - 1] + s[m]) / 2;\n        };\n        const chestMed = pushMed(chestBuf, chestCmInstant);\n        const shoulderMed = pushMed(shoulderBuf, shoulderCm);\n        const waistMed = pushMed(waistBuf, upperWaistCmInstant);\n\n        // Check stability\n        const spread = chestBuf.current.length >= 8 ? Math.max(...chestBuf.current) - Math.min(...chestBuf.current) : 999;\n        const stable = bufN.length >= STABILITY_FRAMES && maxDev < MOVEMENT_EPS && spread < 1.8;\n        if (stable && chestMed && shoulderMed) {\n          const out = {\n            chestCm: Number(chestMed.toFixed(1)),\n            shoulderCm: Number(shoulderMed.toFixed(1)),\n            upperWaistCm: waistMed ? Number(waistMed.toFixed(1)) : undefined,\n            quality: {\n              frames: chestBuf.current.length,\n              spreadCm: Number(spread.toFixed(2))\n            }\n          };\n          setMeas(out);\n          setLocked(true);\n          setPhase(\"locked\");\n          setStatus(\"Locked ✔️\");\n          stopCamera();\n        } else {\n          setStatus(\"Hold still…\");\n        }\n        ctx.restore();\n      });\n      startCamera(pose);\n      return () => {\n        stopCamera();\n      };\n    } catch (error) {\n      console.error(\"❌ MediaPipe initialization failed:\", error);\n      setStatus(`MediaPipe Error: ${error.message}. Please refresh the page.`);\n      setPhase(\"error\");\n    }\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n  const setCalibration = () => {\n    if (barPx < 40) return;\n    setCmPerPx(A4_WIDTH_CM / barPx);\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n  };\n  const retake = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1–2 seconds.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n  const recalibrate = () => {\n    setLocked(false);\n    setMeas(null);\n    setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBuf.current = [];\n    shoulderBuf.current = [];\n    waistBuf.current = [];\n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 relative overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-10 left-10 w-72 h-72 bg-blue-500/10 rounded-full blur-3xl animate-pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-10 right-10 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse delay-1000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative z-10 flex flex-col items-center min-h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-7xl flex items-center justify-between px-6 py-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg\",\n            children: /*#__PURE__*/_jsxDEV(Sparkles, {\n              className: \"w-7 h-7 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold text-white\",\n              children: \"AI Fashion Fit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-200\",\n              children: \"Balanced Body Measurement System\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-blue-500 to-emerald-500 rounded-full px-6 py-3 shadow-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3 text-white\",\n            children: [phase === \"locked\" ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xl\",\n              children: \"\\u2705\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 37\n            }, this) : phase === \"measure\" ? /*#__PURE__*/_jsxDEV(Activity, {\n              className: \"w-5 h-5 animate-pulse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 38\n            }, this) : /*#__PURE__*/_jsxDEV(Target, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 16\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium text-sm\",\n              children: status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-6xl px-6 flex-1 flex items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full bg-black/20 backdrop-blur-lg rounded-3xl overflow-hidden shadow-2xl border border-white/10\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative aspect-video\",\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              className: \"absolute inset-0 w-full h-full object-contain bg-black rounded-3xl\",\n              autoPlay: true,\n              muted: true,\n              playsInline: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              className: \"absolute inset-0 w-full h-full object-contain pointer-events-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this), phase === \"calibrate\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-6 left-1/2 transform -translate-x-1/2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-white/95 backdrop-blur-md rounded-2xl px-6 py-4 shadow-2xl border border-white/20\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Target, {\n                      className: \"w-5 h-5 text-amber-600\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 431,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm font-medium text-gray-700\",\n                      children: \"A4 width calibration\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 432,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"range\",\n                    min: 120,\n                    max: 900,\n                    value: barPx,\n                    onChange: e => setBarPx(Number(e.target.value)),\n                    className: \"w-64 accent-blue-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 434,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: setCalibration,\n                    className: \"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white px-6 py-2 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg\",\n                    children: \"Set Calibration\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 442,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-4xl px-6 py-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold mb-3\",\n              children: \"\\uD83D\\uDCCF Measurement Instructions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-white/80 space-y-2\",\n              children: [phase === \"calibrate\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\uD83D\\uDCC4 Hold an A4 sheet at chest level and adjust the bar to match its width for accurate calibration.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 19\n              }, this), phase === \"measure\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\uD83E\\uDDCD Stand straight with arms slightly away from your body. Hold still for precise measurement.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 19\n              }, this), phase === \"locked\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2705 Measurements captured successfully! You can retake if needed.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this), phase === \"locked\" && meas && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-4xl px-6 py-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/95 backdrop-blur-md rounded-2xl p-6 border border-gray-200 shadow-xl\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-gray-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-bold mb-4\",\n              children: \"\\uD83D\\uDCCA Upper Body Measurement Results\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-50 rounded-xl p-4 border border-blue-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-blue-600\",\n                  children: ((_meas$chestCm = meas.chestCm) === null || _meas$chestCm === void 0 ? void 0 : _meas$chestCm.toFixed(1)) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-blue-500\",\n                  children: \"Chest (cm)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-emerald-50 rounded-xl p-4 border border-emerald-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-emerald-600\",\n                  children: ((_meas$shoulderCm = meas.shoulderCm) === null || _meas$shoulderCm === void 0 ? void 0 : _meas$shoulderCm.toFixed(1)) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-emerald-500\",\n                  children: \"Shoulder (cm)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-purple-50 rounded-xl p-4 border border-purple-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-purple-600\",\n                  children: ((_meas$upperWaistCm = meas.upperWaistCm) === null || _meas$upperWaistCm === void 0 ? void 0 : _meas$upperWaistCm.toFixed(1)) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-purple-500\",\n                  children: \"Waist (cm)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-blue-50 to-emerald-50 rounded-xl p-4 mb-6 border border-blue-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-lg font-semibold text-gray-700 mb-2\",\n                children: \"\\uD83C\\uDFAF Recommended Size\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-3xl font-bold bg-gradient-to-r from-blue-600 to-emerald-600 bg-clip-text text-transparent mb-2\",\n                children: recommendSize(meas.chestCm, meas.upperWaistCm, meas.shoulderCm)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-600 mb-3\",\n                children: [\"Based on \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"all three measurements equally\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 30\n                }, this), \" - not just chest!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-white/50 rounded-lg p-3 border border-blue-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"text-sm font-medium text-blue-800 mb-2\",\n                  children: \"\\uD83D\\uDD2C How Size is Calculated:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-blue-700 space-y-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Step 1:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 513,\n                      columnNumber: 28\n                    }, this), \" Each measurement gets a size score (0-8)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 513,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Step 2:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 514,\n                      columnNumber: 28\n                    }, this), \" Calculate average of all three scores\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 514,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Step 3:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 515,\n                      columnNumber: 28\n                    }, this), \" Apply small adjustments for body proportions\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 515,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Step 4:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 516,\n                      columnNumber: 28\n                    }, this), \" Final size = balanced average, not chest-dominant\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 516,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 512,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 17\n            }, this), meas.chestCm && meas.shoulderCm && meas.upperWaistCm && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 mb-6 border border-purple-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-purple-800 mb-2\",\n                children: \"\\uD83D\\uDCA1 Fit Recommendations\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-purple-700\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Fit Type:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 526,\n                    columnNumber: 26\n                  }, this), \" \", getFitRecommendation(meas.chestCm, meas.shoulderCm, meas.upperWaistCm)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 526,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 525,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 19\n            }, this), meas.chestCm && meas.shoulderCm && meas.upperWaistCm && (() => {\n              const validation = validateMeasurements(meas.chestCm, meas.shoulderCm, meas.upperWaistCm);\n              if (validation.errors.length > 0 || validation.warnings.length > 0) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-yellow-50 rounded-xl p-4 mb-6 border border-yellow-200\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-semibold text-yellow-800 mb-2\",\n                    children: \"\\u26A0\\uFE0F Measurement Validation\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 537,\n                    columnNumber: 25\n                  }, this), validation.errors.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm font-medium text-red-700 mb-1\",\n                      children: \"\\u274C Critical Issues:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 540,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                      className: \"text-xs text-red-600 space-y-1\",\n                      children: validation.errors.map((error, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                        children: [\"\\u2022 \", error]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 543,\n                        columnNumber: 33\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 541,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 539,\n                    columnNumber: 27\n                  }, this), validation.warnings.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm font-medium text-yellow-700 mb-1\",\n                      children: \"\\u26A0\\uFE0F Warnings:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 550,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                      className: \"text-xs text-yellow-600 space-y-1\",\n                      children: validation.warnings.map((warning, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                        children: [\"\\u2022 \", warning]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 553,\n                        columnNumber: 33\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 551,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 549,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-3 p-2 bg-blue-50 rounded border border-blue-200\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-blue-700\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"\\uD83D\\uDCA1 Tip:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 560,\n                        columnNumber: 29\n                      }, this), \" If measurements seem incorrect, try recalibrating with the A4 sheet.\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 559,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 558,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 536,\n                  columnNumber: 23\n                }, this);\n              }\n              return null;\n            })(), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col sm:flex-row gap-3 justify-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: retake,\n                className: \"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-gray-300\",\n                children: \"\\uD83D\\uDD04 Retake\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: recalibrate,\n                className: \"bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-blue-300\",\n                children: \"\\uD83C\\uDFAF Recalibrate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  const recommendedSize = recommendSize(meas.chestCm, meas.upperWaistCm, meas.shoulderCm);\n                  if (recommendedSize) {\n                    const measurementData = encodeURIComponent(JSON.stringify({\n                      size: recommendedSize,\n                      measurements: {\n                        chestCm: meas.chestCm,\n                        shoulderCm: meas.shoulderCm,\n                        upperWaistCm: meas.upperWaistCm\n                      }\n                    }));\n                    window.location.href = `/recommendations?data=${measurementData}`;\n                  }\n                },\n                className: \"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-300 shadow-lg\",\n                children: \"\\u2728 Get Recommendations\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 387,\n    columnNumber: 5\n  }, this);\n}\n_s(Measure, \"vfDiX3M2kd+Wt+O4kRhlVrYCCig=\");\n_c = Measure;\nvar _c;\n$RefreshReg$(_c, \"Measure\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","Pose","Camera","CameraIcon","Sparkles","Activity","Target","jsxDEV","_jsxDEV","A4_WIDTH_CM","CHEST_MULTIPLIER","UPPER_WAIST_FACTOR","recommendSize","chestCm","shoulderCm","waistCm","sizeRanges","XXS","chest","shoulder","waist","XS","S","M","L","XL","XXL","getSizeScore","value","ranges","sizes","i","length","size","chestScore","shoulderScore","waistScore","averageScore","finalScore","waistChestRatio","shoulderChestRatio","sizeOrder","sizeIndex","Math","max","min","round","finalSize","console","log","measurements","toFixed","scores","calculation","ratios","waistChest","shoulderChest","validateMeasurements","warnings","errors","push","isValid","getFitRecommendation","Measure","_s","_meas$chestCm","_meas$shoulderCm","_meas$upperWaistCm","videoRef","canvasRef","poseRef","camRef","phase","setPhase","status","setStatus","barPx","setBarPx","cmPerPx","setCmPerPx","locked","setLocked","meas","setMeas","STABILITY_FRAMES","MOVEMENT_EPS","recentShoulderN","chestBuf","shoulderBuf","waistBuf","getDistance","a","b","hypot","x","y","stopCamera","_camRef$current","_camRef$current$stop","current","stop","call","v","srcObject","getTracks","forEach","t","startCamera","pose","camera","onFrame","send","image","width","height","start","canvas","ctx","getContext","locateFile","file","replace","setOptions","modelComplexity","smoothLandmarks","enableSegmentation","minDetectionConfidence","minTrackingConfidence","onResults","res","W","H","save","clearRect","drawImage","gx","gy","gW","gH","strokeStyle","lineWidth","strokeRect","barH","barY","fillStyle","fillRect","font","text","textX","measureText","fillText","lm","poseLandmarks","restore","vis","_lm$i$visibility","_lm$i","visibility","shouldersOK","hipsOK","Lsh","Rsh","Lhip","Rhip","hip","shMid","point","beginPath","arc","PI","fill","inside","every","p","shoulderWidthN","bufN","shift","avg","reduce","maxDev","map","abs","shoulderPx","chestCmInstant","upperWaistCmInstant","hipFlatCm","pushMed","ref","val","n","s","sort","m","floor","chestMed","shoulderMed","waistMed","spread","stable","out","Number","upperWaistCm","undefined","quality","frames","spreadCm","error","message","setCalibration","retake","recalibrate","className","children","fileName","_jsxFileName","lineNumber","columnNumber","autoPlay","muted","playsInline","type","onChange","e","target","onClick","validation","index","warning","recommendedSize","measurementData","encodeURIComponent","JSON","stringify","window","location","href","_c","$RefreshReg$"],"sources":["/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx"],"sourcesContent":["// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { Camera as CameraIcon, Sparkles, Activity, Target } from 'lucide-react';\n\n// Constants - FIXED FOR REALISTIC MEASUREMENTS\nconst A4_WIDTH_CM = 21.0;\nconst CHEST_MULTIPLIER = 3.2; // Increased from 1.75 to get realistic chest measurements\nconst UPPER_WAIST_FACTOR = 1.8; // Increased from 0.90 to get realistic waist measurements\n\n// BALANCED SIZE RECOMMENDATION SYSTEM - All measurements equally important\nconst recommendSize = (chestCm, shoulderCm, waistCm) => {\n  if (!chestCm || !shoulderCm || !waistCm || chestCm <= 0 || shoulderCm <= 0 || waistCm <= 0) {\n    return null;\n  }\n\n  // REALISTIC SIZE RANGES (in cm) - Based on actual human measurements\n  const sizeRanges = {\n    XXS: { chest: [70, 80], shoulder: [32, 37], waist: [55, 62] },\n    XS:  { chest: [80, 85], shoulder: [37, 40], waist: [62, 67] },\n    S:   { chest: [85, 90], shoulder: [40, 43], waist: [67, 72] },\n    M:   { chest: [90, 95], shoulder: [43, 46], waist: [72, 77] },\n    L:   { chest: [95, 100], shoulder: [46, 49], waist: [77, 82] },\n    XL:  { chest: [100, 105], shoulder: [49, 52], waist: [82, 87] },\n    XXL: { chest: [105, 110], shoulder: [52, 55], waist: [87, 92] },\n    '3XL': { chest: [110, 115], shoulder: [55, 58], waist: [92, 97] },\n    '4XL': { chest: [115, 120], shoulder: [58, 61], waist: [97, 102] }\n  };\n\n  // Calculate size score for each measurement (0-8)\n  const getSizeScore = (value, ranges) => {\n    const sizes = ['XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL', '3XL', '4XL'];\n    for (let i = 0; i < sizes.length; i++) {\n      const size = sizes[i];\n      if (value >= ranges[size][0] && value < ranges[size][1]) {\n        return i;\n      }\n    }\n    // Handle values outside ranges\n    if (value < ranges.XXS[0]) return 0; // XXS\n    return 8; // 4XL\n  };\n\n  // Get individual scores - ALL EQUALLY IMPORTANT\n  const chestScore = getSizeScore(chestCm, sizeRanges);\n  const shoulderScore = getSizeScore(shoulderCm, sizeRanges);\n  const waistScore = getSizeScore(waistCm, sizeRanges);\n\n  // BALANCED CALCULATION - All measurements equally important\n  const averageScore = (chestScore + shoulderScore + waistScore) / 3;\n\n  // Small body proportion adjustments (much smaller than before)\n  let finalScore = averageScore;\n\n  // Waist-to-chest ratio (body shape indicator)\n  const waistChestRatio = waistCm / chestCm;\n  if (waistChestRatio < 0.65) {\n    // Very slim/athletic - go down slightly\n    finalScore -= 0.15;\n  } else if (waistChestRatio > 0.95) {\n    // Fuller build - go up slightly\n    finalScore += 0.15;\n  }\n\n  // Shoulder-to-chest ratio (shoulder width indicator)\n  const shoulderChestRatio = shoulderCm / chestCm;\n  if (shoulderChestRatio > 0.55) {\n    // Broad shoulders - go up slightly\n    finalScore += 0.1;\n  } else if (shoulderChestRatio < 0.35) {\n    // Narrow shoulders - go down slightly\n    finalScore -= 0.1;\n  }\n\n  // Convert to size with bounds checking\n  const sizeOrder = ['XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL', '3XL', '4XL'];\n  const sizeIndex = Math.max(0, Math.min(sizeOrder.length - 1, Math.round(finalScore)));\n  const finalSize = sizeOrder[sizeIndex];\n\n  // Enhanced logging\n  console.log(`🎯 BALANCED SIZE CALCULATION:`, {\n    measurements: { chestCm: chestCm.toFixed(1), shoulderCm: shoulderCm.toFixed(1), waistCm: waistCm.toFixed(1) },\n    scores: { chest: chestScore, shoulder: shoulderScore, waist: waistScore },\n    calculation: { averageScore: averageScore.toFixed(2), finalScore: finalScore.toFixed(2), finalSize },\n    ratios: { waistChest: waistChestRatio.toFixed(3), shoulderChest: shoulderChestRatio.toFixed(3) }\n  });\n\n  return finalSize;\n};\n\n// Measurement validation\nconst validateMeasurements = (chestCm, shoulderCm, waistCm) => {\n  const warnings = [];\n  const errors = [];\n\n  // Check for unrealistic measurements\n  if (chestCm < 60 || chestCm > 150) {\n    errors.push(`Chest measurement (${chestCm}cm) is unrealistic. Expected: 60-150cm`);\n  } else if (chestCm < 70 || chestCm > 130) {\n    warnings.push(`Chest measurement (${chestCm}cm) is outside normal range (70-130cm)`);\n  }\n\n  if (shoulderCm < 25 || shoulderCm > 80) {\n    errors.push(`Shoulder measurement (${shoulderCm}cm) is unrealistic. Expected: 25-80cm`);\n  } else if (shoulderCm < 35 || shoulderCm > 65) {\n    warnings.push(`Shoulder measurement (${shoulderCm}cm) is outside normal range (35-65cm)`);\n  }\n\n  if (waistCm < 40 || waistCm > 120) {\n    errors.push(`Waist measurement (${waistCm}cm) is unrealistic. Expected: 40-120cm`);\n  } else if (waistCm < 55 || waistCm > 100) {\n    warnings.push(`Waist measurement (${waistCm}cm) is outside normal range (55-100cm)`);\n  }\n\n  return { warnings, errors, isValid: errors.length === 0 };\n};\n\n// Fit recommendations\nconst getFitRecommendation = (chestCm, shoulderCm, waistCm) => {\n  if (!chestCm || !shoulderCm || !waistCm) return \"Standard fit recommended\";\n  \n  const shoulderChestRatio = shoulderCm / chestCm;\n  const waistChestRatio = waistCm / chestCm;\n  \n  if (shoulderChestRatio > 0.55 && waistChestRatio < 0.80) {\n    return \"Athletic fit (broad shoulders, slim waist)\";\n  } else if (waistChestRatio < 0.75) {\n    return \"Slim fit (athletic build)\";\n  } else if (waistChestRatio > 0.90) {\n    return \"Regular/comfortable fit\";\n  }\n  \n  return \"Standard fit\";\n};\n\nexport default function Measure() {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  const camRef = useRef(null);\n\n  const [phase, setPhase] = useState(\"calibrate\");\n  const [status, setStatus] = useState(\"Hold an A4 sheet at chest level and match the bar width.\");\n  const [barPx, setBarPx] = useState(300);\n  const [cmPerPx, setCmPerPx] = useState(null);\n  const [locked, setLocked] = useState(false);\n  const [meas, setMeas] = useState(null);\n\n  // Stability settings\n  const STABILITY_FRAMES = 12;\n  const MOVEMENT_EPS = 0.015;\n  const recentShoulderN = useRef([]);\n  const chestBuf = useRef([]);\n  const shoulderBuf = useRef([]);\n  const waistBuf = useRef([]);\n\n  const getDistance = useCallback((a, b) => Math.hypot(a.x - b.x, a.y - b.y), []);\n\n  const stopCamera = () => {\n    try {\n      camRef.current?.stop?.();\n      const v = videoRef.current;\n      v?.srcObject && v.srcObject.getTracks().forEach(t => t.stop());\n      if (v) v.srcObject = null;\n    } catch {}\n  };\n\n  const startCamera = async (pose) => {\n    const v = videoRef.current;\n    const camera = new Camera(v, {\n      onFrame: async () => { await pose.send({ image: v }); },\n      width: 1280, height: 720,\n    });\n    camRef.current = camera;\n    camera.start();\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    try {\n      const pose = new Pose({\n        locateFile: (file) => `/mediapipe/pose/${file.replace('simd_', '')}`,\n      });\n      poseRef.current = pose;\n\n      pose.setOptions({\n        modelComplexity: 0,\n        smoothLandmarks: true,\n        enableSegmentation: false,\n        minDetectionConfidence: 0.6,\n        minTrackingConfidence: 0.6,\n      });\n\n      pose.onResults((res) => {\n        if (locked) return;\n\n        const W = res.image.width, H = res.image.height;\n        if (canvas.width !== W) canvas.width = W;\n        if (canvas.height !== H) canvas.height = H;\n\n        ctx.save();\n        ctx.clearRect(0, 0, W, H);\n        ctx.drawImage(res.image, 0, 0, W, H);\n\n        // Guide box\n        const gx = W * 0.08, gy = H * 0.08;\n        const gW = W * (1 - 0.08 * 2), gH = H * (1 - 0.08 * 2);\n        ctx.strokeStyle = \"rgba(59, 130, 246, 0.8)\";\n        ctx.lineWidth = 4;\n        ctx.strokeRect(gx, gy, gW, gH);\n\n        // Calibration bar\n        if (phase === \"calibrate\") {\n          const barH = 20;\n          const barY = H * 0.12;\n          \n          ctx.fillStyle = \"rgba(59, 130, 246, 0.9)\";\n          ctx.fillRect((W - barPx) / 2, barY, barPx, barH);\n          \n          ctx.strokeStyle = \"rgba(255, 255, 255, 0.9)\";\n          ctx.lineWidth = 2;\n          ctx.strokeRect((W - barPx) / 2, barY, barPx, barH);\n          \n          ctx.font = \"16px system-ui, sans-serif\";\n          ctx.fillStyle = \"rgba(255, 255, 255, 0.95)\";\n          const text = \"Match this bar to A4 width (21 cm) at chest depth\";\n          const textX = Math.max(20, (W - ctx.measureText(text).width) / 2);\n          ctx.fillText(text, textX, barY - 15);\n        }\n\n        const lm = res.poseLandmarks;\n        if (!lm) { setStatus(\"Detecting body…\"); ctx.restore(); return; }\n\n        // Check visibility\n        const vis = (i) => (lm[i]?.visibility ?? 0) > 0.45;\n        const shouldersOK = vis(11) && vis(12);\n        const hipsOK = vis(23) || vis(24);\n        \n        if (!(shouldersOK && hipsOK)) { \n          setStatus(\"Show shoulders & upper torso.\"); \n          ctx.restore(); \n          return; \n        }\n\n        const Lsh = lm[11], Rsh = lm[12];\n        const Lhip = lm[23], Rhip = lm[24];\n        const hip = vis(23) ? Lhip : Rhip;\n        const shMid = { x: (Lsh.x + Rsh.x) / 2, y: (Lsh.y + Rsh.y) / 2 };\n\n        // Draw key points\n        [Lsh, Rsh, shMid, hip].forEach(point => {\n          if (point) {\n            ctx.fillStyle = \"#3B82F6\";\n            ctx.beginPath();\n            ctx.arc(point.x * W, point.y * H, 8, 0, Math.PI * 2);\n            ctx.fill();\n          }\n        });\n\n        // Check if inside guide\n        const inside = [Lsh, Rsh, hip].every(p => \n          p.x * W >= gx && p.x * W <= gx + gW && p.y * H >= gy && p.y * H <= gy + gH\n        );\n        if (!inside) { \n          setStatus(\"Step back/center inside the frame.\"); \n          ctx.restore(); \n          return; \n        }\n\n        if (phase === \"calibrate\") { \n          setStatus(\"Adjust bar → Set calibration.\"); \n          ctx.restore(); \n          return; \n        }\n        if (!cmPerPx) { \n          setStatus(\"Click Set calibration first.\"); \n          ctx.restore(); \n          return; \n        }\n\n        // Calculate measurements\n        const shoulderWidthN = getDistance(Lsh, Rsh);\n        const bufN = recentShoulderN.current;\n        bufN.push(shoulderWidthN);\n        if (bufN.length > STABILITY_FRAMES) bufN.shift();\n        \n        const avg = bufN.reduce((a, b) => a + b, 0) / bufN.length;\n        const maxDev = Math.max(...bufN.map(v => Math.abs(v - avg)));\n\n        // Measurements in cm\n        const shoulderPx = Math.abs((Lsh.x - Rsh.x) * W);\n        const shoulderCm = shoulderPx * cmPerPx;\n        const chestCmInstant = shoulderCm * CHEST_MULTIPLIER;\n\n        let upperWaistCmInstant = null;\n        if (vis(23) && vis(24)) {\n          const hipFlatCm = Math.abs((Lhip.x - Rhip.x) * W) * cmPerPx;\n          upperWaistCmInstant = hipFlatCm * UPPER_WAIST_FACTOR;\n        }\n\n        // Median smoothing\n        const pushMed = (ref, val, n = 15) => {\n          if (val == null) return null;\n          ref.current.push(val);\n          if (ref.current.length > n) ref.current.shift();\n          const s = [...ref.current].sort((a, b) => a - b);\n          const m = Math.floor(s.length / 2);\n          return s.length % 2 ? s[m] : (s[m - 1] + s[m]) / 2;\n        };\n\n        const chestMed = pushMed(chestBuf, chestCmInstant);\n        const shoulderMed = pushMed(shoulderBuf, shoulderCm);\n        const waistMed = pushMed(waistBuf, upperWaistCmInstant);\n\n        // Check stability\n        const spread = chestBuf.current.length >= 8 ? \n          Math.max(...chestBuf.current) - Math.min(...chestBuf.current) : 999;\n        const stable = bufN.length >= STABILITY_FRAMES && maxDev < MOVEMENT_EPS && spread < 1.8;\n\n        if (stable && chestMed && shoulderMed) {\n          const out = {\n            chestCm: Number(chestMed.toFixed(1)),\n            shoulderCm: Number(shoulderMed.toFixed(1)),\n            upperWaistCm: waistMed ? Number(waistMed.toFixed(1)) : undefined,\n            quality: { frames: chestBuf.current.length, spreadCm: Number(spread.toFixed(2)) }\n          };\n          setMeas(out);\n          setLocked(true);\n          setPhase(\"locked\");\n          setStatus(\"Locked ✔️\");\n          stopCamera();\n        } else {\n          setStatus(\"Hold still…\");\n        }\n\n        ctx.restore();\n      });\n\n      startCamera(pose);\n      return () => { stopCamera(); };\n    } catch (error) {\n      console.error(\"❌ MediaPipe initialization failed:\", error);\n      setStatus(`MediaPipe Error: ${error.message}. Please refresh the page.`);\n      setPhase(\"error\");\n    }\n  }, [phase, cmPerPx, getDistance, locked, barPx]);\n\n  const setCalibration = () => {\n    if (barPx < 40) return;\n    setCmPerPx(A4_WIDTH_CM / barPx);\n    setPhase(\"measure\");\n    setStatus(\"Calibration set. Stand centered; shoulders & upper torso visible.\");\n    chestBuf.current = []; \n    shoulderBuf.current = []; \n    waistBuf.current = []; \n    recentShoulderN.current = [];\n  };\n\n  const retake = () => {\n    setLocked(false); \n    setMeas(null); \n    setPhase(\"measure\");\n    setStatus(\"Stand centered; hold still 1–2 seconds.\");\n    chestBuf.current = []; \n    shoulderBuf.current = []; \n    waistBuf.current = []; \n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  const recalibrate = () => {\n    setLocked(false); \n    setMeas(null); \n    setPhase(\"calibrate\");\n    setStatus(\"Hold an A4 sheet at chest level and match the bar width.\");\n    chestBuf.current = []; \n    shoulderBuf.current = []; \n    waistBuf.current = []; \n    recentShoulderN.current = [];\n    if (poseRef.current) startCamera(poseRef.current);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 relative overflow-hidden\">\n      {/* Background */}\n      <div className=\"absolute inset-0\">\n        <div className=\"absolute top-10 left-10 w-72 h-72 bg-blue-500/10 rounded-full blur-3xl animate-pulse\"></div>\n        <div className=\"absolute bottom-10 right-10 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n      </div>\n\n      <div className=\"relative z-10 flex flex-col items-center min-h-screen\">\n        {/* Header */}\n        <div className=\"w-full max-w-7xl flex items-center justify-between px-6 py-6\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg\">\n              <Sparkles className=\"w-7 h-7 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-bold text-white\">AI Fashion Fit</h1>\n              <p className=\"text-sm text-blue-200\">Balanced Body Measurement System</p>\n            </div>\n          </div>\n          \n          {/* Status Badge */}\n          <div className=\"bg-gradient-to-r from-blue-500 to-emerald-500 rounded-full px-6 py-3 shadow-lg\">\n            <div className=\"flex items-center space-x-3 text-white\">\n              {phase === \"locked\" ? <span className=\"text-xl\">✅</span> : \n               phase === \"measure\" ? <Activity className=\"w-5 h-5 animate-pulse\" /> : \n               <Target className=\"w-5 h-5\" />}\n              <span className=\"font-medium text-sm\">{status}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Camera Section */}\n        <div className=\"w-full max-w-6xl px-6 flex-1 flex items-center\">\n          <div className=\"relative w-full bg-black/20 backdrop-blur-lg rounded-3xl overflow-hidden shadow-2xl border border-white/10\">\n            <div className=\"relative aspect-video\">\n              <video ref={videoRef} className=\"absolute inset-0 w-full h-full object-contain bg-black rounded-3xl\" autoPlay muted playsInline />\n              <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full object-contain pointer-events-none\" />\n\n              {/* Calibration UI */}\n              {phase === \"calibrate\" && (\n                <div className=\"absolute bottom-6 left-1/2 transform -translate-x-1/2\">\n                  <div className=\"bg-white/95 backdrop-blur-md rounded-2xl px-6 py-4 shadow-2xl border border-white/20\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Target className=\"w-5 h-5 text-amber-600\" />\n                        <span className=\"text-sm font-medium text-gray-700\">A4 width calibration</span>\n                      </div>\n                      <input \n                        type=\"range\" \n                        min={120} \n                        max={900} \n                        value={barPx} \n                        onChange={(e) => setBarPx(Number(e.target.value))} \n                        className=\"w-64 accent-blue-500\"\n                      />\n                      <button \n                        onClick={setCalibration} \n                        className=\"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white px-6 py-2 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 shadow-lg\"\n                      >\n                        Set Calibration\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Instructions */}\n        <div className=\"w-full max-w-4xl px-6 py-4\">\n          <div className=\"bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20\">\n            <div className=\"text-center text-white\">\n              <h3 className=\"font-semibold mb-3\">📏 Measurement Instructions</h3>\n              <div className=\"text-sm text-white/80 space-y-2\">\n                {phase === \"calibrate\" && (\n                  <p>📄 Hold an A4 sheet at chest level and adjust the bar to match its width for accurate calibration.</p>\n                )}\n                {phase === \"measure\" && (\n                  <p>🧍 Stand straight with arms slightly away from your body. Hold still for precise measurement.</p>\n                )}\n                {phase === \"locked\" && (\n                  <p>✅ Measurements captured successfully! You can retake if needed.</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Results Display */}\n        {phase === \"locked\" && meas && (\n          <div className=\"w-full max-w-4xl px-6 py-6\">\n            <div className=\"bg-white/95 backdrop-blur-md rounded-2xl p-6 border border-gray-200 shadow-xl\">\n              <div className=\"text-center text-gray-800\">\n                <h3 className=\"text-xl font-bold mb-4\">📊 Upper Body Measurement Results</h3>\n                \n                {/* Measurements Grid */}\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n                  <div className=\"bg-blue-50 rounded-xl p-4 border border-blue-200\">\n                    <div className=\"text-2xl font-bold text-blue-600\">{meas.chestCm?.toFixed(1) || 'N/A'}</div>\n                    <div className=\"text-sm text-blue-500\">Chest (cm)</div>\n                  </div>\n                  <div className=\"bg-emerald-50 rounded-xl p-4 border border-emerald-200\">\n                    <div className=\"text-2xl font-bold text-emerald-600\">{meas.shoulderCm?.toFixed(1) || 'N/A'}</div>\n                    <div className=\"text-sm text-emerald-500\">Shoulder (cm)</div>\n                  </div>\n                  <div className=\"bg-purple-50 rounded-xl p-4 border border-purple-200\">\n                    <div className=\"text-2xl font-bold text-purple-600\">{meas.upperWaistCm?.toFixed(1) || 'N/A'}</div>\n                    <div className=\"text-sm text-purple-500\">Waist (cm)</div>\n                  </div>\n                </div>\n\n                {/* Size Recommendation */}\n                <div className=\"bg-gradient-to-r from-blue-50 to-emerald-50 rounded-xl p-4 mb-6 border border-blue-200\">\n                  <div className=\"text-lg font-semibold text-gray-700 mb-2\">🎯 Recommended Size</div>\n                  <div className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-emerald-600 bg-clip-text text-transparent mb-2\">\n                    {recommendSize(meas.chestCm, meas.upperWaistCm, meas.shoulderCm)}\n                  </div>\n                  <div className=\"text-sm text-gray-600 mb-3\">\n                    Based on <strong>all three measurements equally</strong> - not just chest!\n                  </div>\n                  \n                  {/* How it works */}\n                  <div className=\"bg-white/50 rounded-lg p-3 border border-blue-200\">\n                    <h5 className=\"text-sm font-medium text-blue-800 mb-2\">🔬 How Size is Calculated:</h5>\n                    <div className=\"text-xs text-blue-700 space-y-1\">\n                      <p>• <strong>Step 1:</strong> Each measurement gets a size score (0-8)</p>\n                      <p>• <strong>Step 2:</strong> Calculate average of all three scores</p>\n                      <p>• <strong>Step 3:</strong> Apply small adjustments for body proportions</p>\n                      <p>• <strong>Step 4:</strong> Final size = balanced average, not chest-dominant</p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Fit Recommendations */}\n                {meas.chestCm && meas.shoulderCm && meas.upperWaistCm && (\n                  <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 mb-6 border border-purple-200\">\n                    <h4 className=\"font-semibold text-purple-800 mb-2\">💡 Fit Recommendations</h4>\n                    <div className=\"text-sm text-purple-700\">\n                      <p><strong>Fit Type:</strong> {getFitRecommendation(meas.chestCm, meas.shoulderCm, meas.upperWaistCm)}</p>\n                    </div>\n                  </div>\n                )}\n\n                {/* Measurement Validation */}\n                {meas.chestCm && meas.shoulderCm && meas.upperWaistCm && (() => {\n                  const validation = validateMeasurements(meas.chestCm, meas.shoulderCm, meas.upperWaistCm);\n                  if (validation.errors.length > 0 || validation.warnings.length > 0) {\n                    return (\n                      <div className=\"bg-yellow-50 rounded-xl p-4 mb-6 border border-yellow-200\">\n                        <h4 className=\"font-semibold text-yellow-800 mb-2\">⚠️ Measurement Validation</h4>\n                        {validation.errors.length > 0 && (\n                          <div className=\"mb-3\">\n                            <p className=\"text-sm font-medium text-red-700 mb-1\">❌ Critical Issues:</p>\n                            <ul className=\"text-xs text-red-600 space-y-1\">\n                              {validation.errors.map((error, index) => (\n                                <li key={index}>• {error}</li>\n                              ))}\n                            </ul>\n                          </div>\n                        )}\n                        {validation.warnings.length > 0 && (\n                          <div>\n                            <p className=\"text-sm font-medium text-yellow-700 mb-1\">⚠️ Warnings:</p>\n                            <ul className=\"text-xs text-yellow-600 space-y-1\">\n                              {validation.warnings.map((warning, index) => (\n                                <li key={index}>• {warning}</li>\n                              ))}\n                            </ul>\n                          </div>\n                        )}\n                        <div className=\"mt-3 p-2 bg-blue-50 rounded border border-blue-200\">\n                          <p className=\"text-xs text-blue-700\">\n                            <strong>💡 Tip:</strong> If measurements seem incorrect, try recalibrating with the A4 sheet.\n                          </p>\n                        </div>\n                      </div>\n                    );\n                  }\n                  return null;\n                })()}\n\n                {/* Action Buttons */}\n                <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n                  <button \n                    onClick={retake}\n                    className=\"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-gray-300\"\n                  >\n                    🔄 Retake\n                  </button>\n                  <button \n                    onClick={recalibrate}\n                    className=\"bg-blue-100 hover:bg-blue-200 text-blue-700 px-6 py-3 rounded-xl font-medium transition-all duration-300 border-2 border-blue-300\"\n                  >\n                    🎯 Recalibrate\n                  </button>\n                  <button \n                    onClick={() => {\n                      const recommendedSize = recommendSize(meas.chestCm, meas.upperWaistCm, meas.shoulderCm);\n                      if (recommendedSize) {\n                        const measurementData = encodeURIComponent(JSON.stringify({\n                          size: recommendedSize,\n                          measurements: {\n                            chestCm: meas.chestCm,\n                            shoulderCm: meas.shoulderCm,\n                            upperWaistCm: meas.upperWaistCm\n                          }\n                        }));\n                        window.location.href = `/recommendations?data=${measurementData}`;\n                      }\n                    }}\n                    className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-xl font-medium transition-all duration-300 shadow-lg\"\n                  >\n                    ✨ Get Recommendations\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}