{"ast":null,"code":"var _jsxFileName = \"/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { drawConnectors, drawLandmarks } from \"@mediapipe/drawing_utils\";\nimport PoseOverlay from \"../components/PoseOverlay\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst poseSteps = [\"front\", \"side\", \"back\"];\nconst Measure = () => {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [userHeight, setUserHeight] = useState(170);\n  const [landmarksDetected, setLandmarksDetected] = useState(false);\n  const [measurements, setMeasurements] = useState({\n    chest: null,\n    waist: null\n  });\n  const [suggestedSize, setSuggestedSize] = useState(\"\");\n  const [capturedImages, setCapturedImages] = useState({});\n  const getDistance = useCallback((a, b) => {\n    const dx = a.x - b.x;\n    const dy = a.y - b.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }, []);\n  const getSizeSuggestion = (chest, waist) => {\n    if (chest > 95 || waist > 85) return \"XL\";\n    if (chest > 90 || waist > 80) return \"L\";\n    if (chest > 85 || waist > 75) return \"M\";\n    if (chest > 80 || waist > 70) return \"S\";\n    return \"Custom\";\n  };\n  const handleCapture = () => {\n    const canvas = canvasRef.current;\n    const dataUrl = canvas.toDataURL(\"image/png\");\n    const step = poseSteps[currentStep];\n    setCapturedImages(prev => ({\n      ...prev,\n      [step]: dataUrl\n    }));\n    if (currentStep < poseSteps.length - 1) {\n      setCurrentStep(s => s + 1);\n    } else {\n      alert(\"‚úÖ All poses captured!\");\n    }\n  };\n  useEffect(() => {\n    const videoElement = videoRef.current;\n    const canvasElement = canvasRef.current;\n    const canvasCtx = canvasElement.getContext(\"2d\");\n    const pose = new Pose({\n      locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`\n    });\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true,\n      enableSegmentation: false,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5\n    });\n    pose.onResults(results => {\n      const lm = results.poseLandmarks;\n\n      // ‚úÖ Match canvas to incoming video frame for sharp, correct coords\n      const frameW = results.image.width;\n      const frameH = results.image.height;\n      if (canvasElement.width !== frameW) canvasElement.width = frameW;\n      if (canvasElement.height !== frameH) canvasElement.height = frameH;\n      canvasCtx.save();\n      canvasCtx.clearRect(0, 0, frameW, frameH);\n      canvasCtx.drawImage(results.image, 0, 0, frameW, frameH);\n      if (lm) {\n        // Silhouette overlay\n        const pts = [lm[11], lm[13], lm[15], lm[23], lm[24], lm[16], lm[14], lm[12], lm[0]].map(p => ({\n          x: p.x * frameW,\n          y: p.y * frameH\n        }));\n        canvasCtx.fillStyle = \"rgba(0, 255, 255, 0.3)\";\n        canvasCtx.beginPath();\n        pts.forEach((pt, i) => i === 0 ? canvasCtx.moveTo(pt.x, pt.y) : canvasCtx.lineTo(pt.x, pt.y));\n        canvasCtx.closePath();\n        canvasCtx.fill();\n\n        // Pose lines + landmarks\n        drawConnectors(canvasCtx, lm, Pose.POSE_CONNECTIONS, {\n          lineWidth: 2\n        });\n        drawLandmarks(canvasCtx, lm, {\n          lineWidth: 1\n        });\n\n        // ‚úÖ More forgiving full-body check (either ankle) and slightly lower vis threshold\n        const vis = id => {\n          var _lm$id$visibility, _lm$id;\n          return ((_lm$id$visibility = (_lm$id = lm[id]) === null || _lm$id === void 0 ? void 0 : _lm$id.visibility) !== null && _lm$id$visibility !== void 0 ? _lm$id$visibility : 0) > 0.5;\n        };\n        const coreOK = vis(11) && vis(12) && vis(23) && vis(24) && vis(0);\n        const feetOK = vis(27) || vis(28);\n        if (coreOK && feetOK) {\n          setLandmarksDetected(true);\n          const shoulderWidth = getDistance(lm[11], lm[12]);\n          const hipWidth = getDistance(lm[23], lm[24]);\n\n          // Use whichever ankle is visible for height\n          const h1 = getDistance(lm[0], lm[27]);\n          const h2 = getDistance(lm[0], lm[28]);\n          const fullBodyHeight = Math.max(h1, h2);\n          if (fullBodyHeight > 0) {\n            const pxToCmRatio = userHeight / fullBodyHeight;\n            const chestCm = shoulderWidth * pxToCmRatio;\n            const waistCm = hipWidth * pxToCmRatio;\n            setMeasurements({\n              chest: chestCm.toFixed(1),\n              waist: waistCm.toFixed(1)\n            });\n            setSuggestedSize(getSizeSuggestion(chestCm, waistCm));\n          }\n        } else {\n          setLandmarksDetected(false);\n          setMeasurements({\n            chest: null,\n            waist: null\n          });\n          setSuggestedSize(\"\");\n        }\n      }\n      canvasCtx.restore();\n    });\n\n    // ‚úÖ Higher resolution for better full-body detection\n    const camera = new Camera(videoElement, {\n      onFrame: async () => {\n        await pose.send({\n          image: videoElement\n        });\n      },\n      width: 1280,\n      height: 720\n    });\n    camera.start();\n    return () => {\n      camera.stop();\n    };\n  }, [getDistance, userHeight, currentStep]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full min-h-screen bg-black flex flex-col items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-5xl flex items-center justify-between px-3 pt-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        value: userHeight,\n        onChange: e => setUserHeight(Number(e.target.value)),\n        placeholder: \"Enter your height (cm)\",\n        className: \"z-30 p-2 bg-white rounded shadow-md text-sm w-44\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"z-30 bg-white/90 px-3 py-1 rounded text-sm font-medium\",\n        children: [\"Step \", currentStep + 1, \" of \", poseSteps.length, \": \", poseSteps[currentStep].toUpperCase(), \" Pose\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full max-w-5xl aspect-video mt-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"absolute inset-0 w-full h-full object-contain bg-black\",\n        autoPlay: true,\n        muted: true,\n        playsInline: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"absolute inset-0 w-full h-full object-contain\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PoseOverlay, {\n        view: poseSteps[currentStep]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-4 left-4 text-white font-semibold\",\n        children: landmarksDetected ? \"‚úÖ Full body detected!\" : \"üîç Please step back until head & feet are visible\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCapture,\n        className: \"absolute bottom-4 right-4 bg-purple-600 text-white px-4 py-2 rounded shadow-md hover:bg-purple-700\",\n        children: [\"Capture \", poseSteps[currentStep].toUpperCase()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), measurements.chest && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-3 left-3 bg-white/90 text-black p-4 rounded-lg shadow-md text-sm w-52 z-30\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg font-bold mb-1\",\n          children: \"\\uD83D\\uDCCF Measurements\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\uD83D\\uDC55 Chest: \", measurements.chest, \" cm\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\uD83D\\uDC56 Waist: \", measurements.waist, \" cm\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-1 text-purple-700 font-semibold\",\n          children: [\"\\uD83D\\uDC57 Suggested Size: \", suggestedSize]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this), Object.keys(capturedImages).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-20 left-1/2 -translate-x-1/2 flex gap-2 z-20\",\n        children: Object.entries(capturedImages).map(([key, url]) => /*#__PURE__*/_jsxDEV(\"img\", {\n          src: url,\n          alt: `${key} view`,\n          className: \"w-16 h-24 object-cover border-2 border-white rounded\"\n        }, key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n};\n_s(Measure, \"ZW5TMjWH/6ddKKw1qbu0f3ahRdU=\");\n_c = Measure;\nexport default Measure;\nvar _c;\n$RefreshReg$(_c, \"Measure\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","Pose","Camera","drawConnectors","drawLandmarks","PoseOverlay","jsxDEV","_jsxDEV","poseSteps","Measure","_s","videoRef","canvasRef","currentStep","setCurrentStep","userHeight","setUserHeight","landmarksDetected","setLandmarksDetected","measurements","setMeasurements","chest","waist","suggestedSize","setSuggestedSize","capturedImages","setCapturedImages","getDistance","a","b","dx","x","dy","y","Math","sqrt","getSizeSuggestion","handleCapture","canvas","current","dataUrl","toDataURL","step","prev","length","s","alert","videoElement","canvasElement","canvasCtx","getContext","pose","locateFile","file","setOptions","modelComplexity","smoothLandmarks","enableSegmentation","minDetectionConfidence","minTrackingConfidence","onResults","results","lm","poseLandmarks","frameW","image","width","frameH","height","save","clearRect","drawImage","pts","map","p","fillStyle","beginPath","forEach","pt","i","moveTo","lineTo","closePath","fill","POSE_CONNECTIONS","lineWidth","vis","id","_lm$id$visibility","_lm$id","visibility","coreOK","feetOK","shoulderWidth","hipWidth","h1","h2","fullBodyHeight","max","pxToCmRatio","chestCm","waistCm","toFixed","restore","camera","onFrame","send","start","stop","className","children","type","value","onChange","e","Number","target","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","toUpperCase","ref","autoPlay","muted","playsInline","view","onClick","Object","keys","entries","key","url","src","alt","_c","$RefreshReg$"],"sources":["/Users/dhirajbalayar/Desktop/fashion/frontend/src/pages/Measure.jsx"],"sourcesContent":["// src/pages/Measure.jsx\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { Pose } from \"@mediapipe/pose\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { drawConnectors, drawLandmarks } from \"@mediapipe/drawing_utils\";\nimport PoseOverlay from \"../components/PoseOverlay\";\n\nconst poseSteps = [\"front\", \"side\", \"back\"];\n\nconst Measure = () => {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [userHeight, setUserHeight] = useState(170);\n  const [landmarksDetected, setLandmarksDetected] = useState(false);\n  const [measurements, setMeasurements] = useState({ chest: null, waist: null });\n  const [suggestedSize, setSuggestedSize] = useState(\"\");\n  const [capturedImages, setCapturedImages] = useState({});\n\n  const getDistance = useCallback((a, b) => {\n    const dx = a.x - b.x;\n    const dy = a.y - b.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }, []);\n\n  const getSizeSuggestion = (chest, waist) => {\n    if (chest > 95 || waist > 85) return \"XL\";\n    if (chest > 90 || waist > 80) return \"L\";\n    if (chest > 85 || waist > 75) return \"M\";\n    if (chest > 80 || waist > 70) return \"S\";\n    return \"Custom\";\n  };\n\n  const handleCapture = () => {\n    const canvas = canvasRef.current;\n    const dataUrl = canvas.toDataURL(\"image/png\");\n    const step = poseSteps[currentStep];\n    setCapturedImages((prev) => ({ ...prev, [step]: dataUrl }));\n\n    if (currentStep < poseSteps.length - 1) {\n      setCurrentStep((s) => s + 1);\n    } else {\n      alert(\"‚úÖ All poses captured!\");\n    }\n  };\n\n  useEffect(() => {\n    const videoElement = videoRef.current;\n    const canvasElement = canvasRef.current;\n    const canvasCtx = canvasElement.getContext(\"2d\");\n\n    const pose = new Pose({\n      locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`,\n    });\n\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true,\n      enableSegmentation: false,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5,\n    });\n\n    pose.onResults((results) => {\n      const lm = results.poseLandmarks;\n\n      // ‚úÖ Match canvas to incoming video frame for sharp, correct coords\n      const frameW = results.image.width;\n      const frameH = results.image.height;\n      if (canvasElement.width !== frameW) canvasElement.width = frameW;\n      if (canvasElement.height !== frameH) canvasElement.height = frameH;\n\n      canvasCtx.save();\n      canvasCtx.clearRect(0, 0, frameW, frameH);\n      canvasCtx.drawImage(results.image, 0, 0, frameW, frameH);\n\n      if (lm) {\n        // Silhouette overlay\n        const pts = [lm[11], lm[13], lm[15], lm[23], lm[24], lm[16], lm[14], lm[12], lm[0]].map((p) => ({\n          x: p.x * frameW,\n          y: p.y * frameH,\n        }));\n        canvasCtx.fillStyle = \"rgba(0, 255, 255, 0.3)\";\n        canvasCtx.beginPath();\n        pts.forEach((pt, i) => (i === 0 ? canvasCtx.moveTo(pt.x, pt.y) : canvasCtx.lineTo(pt.x, pt.y)));\n        canvasCtx.closePath();\n        canvasCtx.fill();\n\n        // Pose lines + landmarks\n        drawConnectors(canvasCtx, lm, Pose.POSE_CONNECTIONS, { lineWidth: 2 });\n        drawLandmarks(canvasCtx, lm, { lineWidth: 1 });\n\n        // ‚úÖ More forgiving full-body check (either ankle) and slightly lower vis threshold\n        const vis = (id) => (lm[id]?.visibility ?? 0) > 0.5;\n        const coreOK = vis(11) && vis(12) && vis(23) && vis(24) && vis(0);\n        const feetOK = vis(27) || vis(28);\n\n        if (coreOK && feetOK) {\n          setLandmarksDetected(true);\n\n          const shoulderWidth = getDistance(lm[11], lm[12]);\n          const hipWidth = getDistance(lm[23], lm[24]);\n\n          // Use whichever ankle is visible for height\n          const h1 = getDistance(lm[0], lm[27]);\n          const h2 = getDistance(lm[0], lm[28]);\n          const fullBodyHeight = Math.max(h1, h2);\n\n          if (fullBodyHeight > 0) {\n            const pxToCmRatio = userHeight / fullBodyHeight;\n            const chestCm = shoulderWidth * pxToCmRatio;\n            const waistCm = hipWidth * pxToCmRatio;\n\n            setMeasurements({\n              chest: chestCm.toFixed(1),\n              waist: waistCm.toFixed(1),\n            });\n            setSuggestedSize(getSizeSuggestion(chestCm, waistCm));\n          }\n        } else {\n          setLandmarksDetected(false);\n          setMeasurements({ chest: null, waist: null });\n          setSuggestedSize(\"\");\n        }\n      }\n      canvasCtx.restore();\n    });\n\n    // ‚úÖ Higher resolution for better full-body detection\n    const camera = new Camera(videoElement, {\n      onFrame: async () => {\n        await pose.send({ image: videoElement });\n      },\n      width: 1280,\n      height: 720,\n    });\n\n    camera.start();\n\n    return () => {\n      camera.stop();\n    };\n  }, [getDistance, userHeight, currentStep]);\n\n  return (\n    <div className=\"relative w-full min-h-screen bg-black flex flex-col items-center\">\n      {/* Top controls (outside video box) */}\n      <div className=\"w-full max-w-5xl flex items-center justify-between px-3 pt-2\">\n        <input\n          type=\"number\"\n          value={userHeight}\n          onChange={(e) => setUserHeight(Number(e.target.value))}\n          placeholder=\"Enter your height (cm)\"\n          className=\"z-30 p-2 bg-white rounded shadow-md text-sm w-44\"\n        />\n        <div className=\"z-30 bg-white/90 px-3 py-1 rounded text-sm font-medium\">\n          Step {currentStep + 1} of {poseSteps.length}: {poseSteps[currentStep].toUpperCase()} Pose\n        </div>\n      </div>\n\n      {/* ‚úÖ 16:9 wrapper so we see the whole camera frame without cropping */}\n      <div className=\"relative w-full max-w-5xl aspect-video mt-2\">\n        <video\n          ref={videoRef}\n          className=\"absolute inset-0 w-full h-full object-contain bg-black\"\n          autoPlay\n          muted\n          playsInline\n        />\n        <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full object-contain\" />\n\n        {/* Your pose guide overlay */}\n        <PoseOverlay view={poseSteps[currentStep]} />\n\n        {/* Status + Capture UI inside the video area */}\n        <div className=\"absolute bottom-4 left-4 text-white font-semibold\">\n          {landmarksDetected ? \"‚úÖ Full body detected!\" : \"üîç Please step back until head & feet are visible\"}\n        </div>\n\n        <button\n          onClick={handleCapture}\n          className=\"absolute bottom-4 right-4 bg-purple-600 text-white px-4 py-2 rounded shadow-md hover:bg-purple-700\"\n        >\n          Capture {poseSteps[currentStep].toUpperCase()}\n        </button>\n\n        {measurements.chest && (\n          <div className=\"absolute top-3 left-3 bg-white/90 text-black p-4 rounded-lg shadow-md text-sm w-52 z-30\">\n            <div className=\"text-lg font-bold mb-1\">üìè Measurements</div>\n            <div>üëï Chest: {measurements.chest} cm</div>\n            <div>üëñ Waist: {measurements.waist} cm</div>\n            <div className=\"mt-1 text-purple-700 font-semibold\">\n              üëó Suggested Size: {suggestedSize}\n            </div>\n          </div>\n        )}\n\n        {Object.keys(capturedImages).length > 0 && (\n          <div className=\"absolute bottom-20 left-1/2 -translate-x-1/2 flex gap-2 z-20\">\n            {Object.entries(capturedImages).map(([key, url]) => (\n              <img\n                key={key}\n                src={url}\n                alt={`${key} view`}\n                className=\"w-16 h-24 object-cover border-2 border-white rounded\"\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Measure;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}